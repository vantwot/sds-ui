{"ast":null,"code":"import { Angle } from '../../geometry';\nexport const watermark = function (img, options) {\n  const width = img.width;\n  const height = img.height;\n  const canvas = document.createElement('canvas');\n  canvas.width = width * 3;\n  canvas.height = height * 3;\n  const ctx = canvas.getContext('2d');\n  const angle = options.angle != null ? -options.angle : -20;\n  const radians = Angle.toRad(angle);\n  const stepX = canvas.width / 4;\n  const stepY = canvas.height / 4;\n\n  for (let i = 0; i < 4; i += 1) {\n    for (let j = 0; j < 4; j += 1) {\n      if ((i + j) % 2 > 0) {\n        ctx.setTransform(1, 0, 0, 1, (2 * i - 1) * stepX, (2 * j - 1) * stepY);\n        ctx.rotate(radians);\n        ctx.drawImage(img, -width / 2, -height / 2, width, height);\n      }\n    }\n  }\n\n  return canvas;\n};","map":{"version":3,"sources":["../../../src/registry/background/watermark.ts"],"names":[],"mappings":"AACA,SAAS,KAAT,QAAsB,gBAAtB;AAMA,OAAO,MAAM,SAAS,GAA4C,UAChE,GADgE,EAEhE,OAFgE,EAEzD;AAEP,QAAM,KAAK,GAAG,GAAG,CAAC,KAAlB;AACA,QAAM,MAAM,GAAG,GAAG,CAAC,MAAnB;AACA,QAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAf;AAEA,EAAA,MAAM,CAAC,KAAP,GAAe,KAAK,GAAG,CAAvB;AACA,EAAA,MAAM,CAAC,MAAP,GAAgB,MAAM,GAAG,CAAzB;AAEA,QAAM,GAAG,GAAG,MAAM,CAAC,UAAP,CAAkB,IAAlB,CAAZ;AACA,QAAM,KAAK,GAAG,OAAO,CAAC,KAAR,IAAiB,IAAjB,GAAwB,CAAC,OAAO,CAAC,KAAjC,GAAyC,CAAC,EAAxD;AACA,QAAM,OAAO,GAAG,KAAK,CAAC,KAAN,CAAY,KAAZ,CAAhB;AACA,QAAM,KAAK,GAAG,MAAM,CAAC,KAAP,GAAe,CAA7B;AACA,QAAM,KAAK,GAAG,MAAM,CAAC,MAAP,GAAgB,CAA9B;;AAEA,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAApB,EAAuB,CAAC,IAAI,CAA5B,EAA+B;AAC7B,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAApB,EAAuB,CAAC,IAAI,CAA5B,EAA+B;AAC7B,UAAI,CAAC,CAAC,GAAG,CAAL,IAAU,CAAV,GAAc,CAAlB,EAAqB;AACnB,QAAA,GAAG,CAAC,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAAC,IAAI,CAAJ,GAAQ,CAAT,IAAc,KAA3C,EAAkD,CAAC,IAAI,CAAJ,GAAQ,CAAT,IAAc,KAAhE;AACA,QAAA,GAAG,CAAC,MAAJ,CAAW,OAAX;AACA,QAAA,GAAG,CAAC,SAAJ,CAAc,GAAd,EAAmB,CAAC,KAAD,GAAS,CAA5B,EAA+B,CAAC,MAAD,GAAU,CAAzC,EAA4C,KAA5C,EAAmD,MAAnD;AACD;AACF;AACF;;AAED,SAAO,MAAP;AACD,CA5BM","sourceRoot":"","sourcesContent":["import { Angle } from '../../geometry';\nexport const watermark = function (img, options) {\n    const width = img.width;\n    const height = img.height;\n    const canvas = document.createElement('canvas');\n    canvas.width = width * 3;\n    canvas.height = height * 3;\n    const ctx = canvas.getContext('2d');\n    const angle = options.angle != null ? -options.angle : -20;\n    const radians = Angle.toRad(angle);\n    const stepX = canvas.width / 4;\n    const stepY = canvas.height / 4;\n    for (let i = 0; i < 4; i += 1) {\n        for (let j = 0; j < 4; j += 1) {\n            if ((i + j) % 2 > 0) {\n                ctx.setTransform(1, 0, 0, 1, (2 * i - 1) * stepX, (2 * j - 1) * stepY);\n                ctx.rotate(radians);\n                ctx.drawImage(img, -width / 2, -height / 2, width, height);\n            }\n        }\n    }\n    return canvas;\n};\n//# sourceMappingURL=watermark.js.map"]},"metadata":{},"sourceType":"module"}