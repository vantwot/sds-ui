{"ast":null,"code":"function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport { $window, isMini } from '@antv/l7-utils';\nimport Point from '../geo/point';\nvar DOM = {};\nexport default DOM;\n\nDOM.create = function (tagName, className, container) {\n  var el = $window.document.createElement(tagName);\n\n  if (className !== undefined) {\n    el.className = className;\n  }\n\n  if (container) {\n    container.appendChild(el);\n  }\n\n  return el;\n};\n\nDOM.createNS = function (namespaceURI, tagName) {\n  var el = $window.document.createElementNS(namespaceURI, tagName);\n  return el;\n};\n\nvar docStyle = $window.document && $window.document.documentElement.style;\n\nfunction testProp(props) {\n  if (!docStyle) {\n    return props[0];\n  }\n\n  var _iterator = _createForOfIteratorHelper(props),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var i = _step.value;\n\n      if (i in docStyle) {\n        return i;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return props[0];\n}\n\nvar selectProp = testProp(['userSelect', 'MozUserSelect', 'WebkitUserSelect', 'msUserSelect']);\nvar userSelect;\n\nDOM.disableDrag = function () {\n  if (docStyle && selectProp) {\n    userSelect = docStyle[selectProp];\n    docStyle[selectProp] = 'none';\n  }\n};\n\nDOM.enableDrag = function () {\n  if (docStyle && selectProp) {\n    docStyle[selectProp] = userSelect;\n  }\n};\n\nvar transformProp = testProp(['transform', 'WebkitTransform']);\n\nDOM.setTransform = function (el, value) {\n  el.style[transformProp] = value;\n};\n\nvar passiveSupported = false;\n\ntry {\n  var options = Object.defineProperty({}, 'passive', {\n    get: function get() {\n      passiveSupported = true;\n    }\n  });\n  $window.addEventListener('test', options, options);\n  $window.removeEventListener('test', options, options);\n} catch (err) {\n  passiveSupported = false;\n}\n\nDOM.addEventListener = function (target, type, callback) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  if ('passive' in options && passiveSupported) {\n    target.addEventListener(type, callback, options);\n  } else {\n    target.addEventListener(type, callback, options.capture);\n  }\n};\n\nDOM.removeEventListener = function (target, type, callback) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  if ('passive' in options && passiveSupported) {\n    target.removeEventListener(type, callback, options);\n  } else {\n    target.removeEventListener(type, callback, options.capture);\n  }\n};\n\nvar suppressClick = function suppressClick(e) {\n  e.preventDefault();\n  e.stopPropagation();\n  $window.removeEventListener('click', suppressClick, true);\n};\n\nDOM.suppressClick = function () {\n  if (isMini) {\n    return;\n  }\n\n  $window.addEventListener('click', suppressClick, true);\n  setTimeout(function () {\n    $window.removeEventListener('click', suppressClick, true);\n  }, 0);\n};\n\nDOM.mousePos = function (el, e) {\n  if (!isMini) {\n    var rect = el.getBoundingClientRect();\n    return new Point(e.clientX - rect.left - el.clientLeft, e.clientY - rect.top - el.clientTop);\n  } else {\n    return new Point(e.clientX - el.left - 0, e.clientY - el.top - 0);\n  }\n};\n\nDOM.touchPos = function (el, touches) {\n  if (!isMini) {\n    var rect = el.getBoundingClientRect();\n    var points = [];\n\n    var _iterator2 = _createForOfIteratorHelper(touches),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var touche = _step2.value;\n        points.push(new Point(touche.clientX - rect.left - el.clientLeft, touche.clientY - rect.top - el.clientTop));\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    return points;\n  } else {\n    var _points = [];\n\n    var _iterator3 = _createForOfIteratorHelper(touches),\n        _step3;\n\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _touche = _step3.value;\n\n        _points.push(new Point(_touche.clientX - el.left, _touche.clientY - el.top));\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n\n    return _points;\n  }\n};\n\nDOM.mouseButton = function (e) {\n  if (!isMini) {\n    return e.button;\n  }\n\n  if (typeof $window.InstallTrigger !== 'undefined' && e.button === 2 && e.ctrlKey && $window.navigator.platform.toUpperCase().indexOf('MAC') >= 0) {\n    return 0;\n  }\n\n  return e.button;\n};\n\nDOM.remove = function (node) {\n  if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n};","map":{"version":3,"sources":["../../src/utils/dom.ts"],"names":["DOM","el","$window","className","container","docStyle","props","i","selectProp","testProp","userSelect","transformProp","passiveSupported","options","get","target","suppressClick","e","setTimeout","rect","points","touche","node"],"mappings":"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","sourcesContent":["import { $window, isMini } from '@antv/l7-utils';\n// @ts-ignore\nimport Point from '../geo/point';\n\nconst DOM: {\n  [key: string]: (...arg: any[]) => any;\n} = {};\nexport default DOM;\n\nDOM.create = (tagName: string, className?: string, container?: HTMLElement) => {\n  const el = $window.document.createElement(tagName) as HTMLElement;\n  if (className !== undefined) {\n    el.className = className;\n  }\n  if (container) {\n    container.appendChild(el);\n  }\n  return el;\n};\n\nDOM.createNS = (namespaceURI: string, tagName: string) => {\n  const el = $window.document.createElementNS(\n    namespaceURI,\n    tagName,\n  ) as HTMLElement;\n  return el;\n};\n\nconst docStyle = $window.document && $window.document.documentElement.style;\n\nfunction testProp(props: any) {\n  if (!docStyle) {\n    return props[0];\n  }\n  for (const i of props) {\n    if (i in docStyle) {\n      return i;\n    }\n  }\n  return props[0];\n}\n\nconst selectProp = testProp([\n  'userSelect',\n  'MozUserSelect',\n  'WebkitUserSelect',\n  'msUserSelect',\n]);\nlet userSelect: any;\n\nDOM.disableDrag = () => {\n  if (docStyle && selectProp) {\n    userSelect = docStyle[selectProp];\n    docStyle[selectProp] = 'none';\n  }\n};\n\nDOM.enableDrag = () => {\n  if (docStyle && selectProp) {\n    docStyle[selectProp] = userSelect;\n  }\n};\n\nconst transformProp = testProp(['transform', 'WebkitTransform']);\n\nDOM.setTransform = (el: HTMLElement, value: string) => {\n  // https://github.com/facebook/flow/issues/7754\n  // $FlowFixMe\n  el.style[transformProp] = value;\n};\n\n// Feature detection for {passive: false} support in add/removeEventListener.\nlet passiveSupported = false;\n\ntry {\n  // https://github.com/facebook/flow/issues/285\n  // $FlowFixMe\n  const options = Object.defineProperty({}, 'passive', {\n    get() {\n      // eslint-disable-line\n      passiveSupported = true;\n    },\n  });\n  // @ts-ignore\n  $window.addEventListener('test', options, options);\n  // @ts-ignore\n  $window.removeEventListener('test', options, options);\n} catch (err) {\n  passiveSupported = false;\n}\n\nDOM.addEventListener = (\n  target: any,\n  type: any,\n  callback: any,\n  options: { passive?: boolean; capture?: boolean } = {},\n) => {\n  if ('passive' in options && passiveSupported) {\n    target.addEventListener(type, callback, options);\n  } else {\n    target.addEventListener(type, callback, options.capture);\n  }\n};\n\nDOM.removeEventListener = (\n  target: any,\n  type: any,\n  callback: any,\n  options: { passive?: boolean; capture?: boolean } = {},\n) => {\n  if ('passive' in options && passiveSupported) {\n    target.removeEventListener(type, callback, options);\n  } else {\n    target.removeEventListener(type, callback, options.capture);\n  }\n};\n\n// Suppress the next click, but only if it's immediate.\nconst suppressClick = (e: MouseEvent) => {\n  e.preventDefault();\n  e.stopPropagation();\n  $window.removeEventListener('click', suppressClick, true);\n};\n\nDOM.suppressClick = () => {\n  if (isMini) {\n    return;\n  }\n  $window.addEventListener('click', suppressClick, true);\n  setTimeout(() => {\n    $window.removeEventListener('click', suppressClick, true);\n  }, 0);\n};\n\nDOM.mousePos = (el: HTMLElement, e: MouseEvent | Touch) => {\n  // 暂时从 el 上获取 top/left， 后面需要动态获取\n  if (!isMini) {\n    const rect = el.getBoundingClientRect();\n    return new Point(\n      e.clientX - rect.left - el.clientLeft,\n      e.clientY - rect.top - el.clientTop,\n    );\n  } else {\n    return new Point(\n      // @ts-ignore\n      e.clientX - el.left - 0,\n      // @ts-ignore\n      e.clientY - el.top - 0,\n    );\n  }\n};\n\nDOM.touchPos = (el: HTMLElement, touches: Touch[]) => {\n  // 暂时从 el 上获取 top/left， 后面需要动态获取\n  if (!isMini) {\n    const rect = el.getBoundingClientRect();\n    const points = [];\n    for (const touche of touches) {\n      points.push(\n        new Point(\n          touche.clientX - rect.left - el.clientLeft,\n          touche.clientY - rect.top - el.clientTop,\n        ),\n      );\n    }\n    return points;\n  } else {\n    const points = [];\n    for (const touche of touches) {\n      points.push(\n        new Point(\n          // @ts-ignore\n          touche.clientX - el.left,\n          // @ts-ignore\n          touche.clientY - el.top,\n        ),\n      );\n    }\n    return points;\n  }\n};\n\nDOM.mouseButton = (e: MouseEvent) => {\n  if (!isMini) {\n    return e.button;\n  }\n  if (\n    // @ts-ignore\n    typeof $window.InstallTrigger !== 'undefined' &&\n    e.button === 2 &&\n    e.ctrlKey &&\n    $window.navigator.platform.toUpperCase().indexOf('MAC') >= 0\n  ) {\n    // Fix for https://github.com/mapbox/mapbox-gl-js/issues/3131:\n    // Firefox (detected by InstallTrigger) on Mac determines e.button = 2 when\n    // using Control + left click\n    return 0;\n  }\n  return e.button;\n};\n\nDOM.remove = (node: HTMLElement) => {\n  if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}