{"ast":null,"code":"import _classCallCheck from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport JQuery from 'jquery';\nimport { Platform } from '../platform';\nexport var MouseWheelHandle = /*#__PURE__*/function () {\n  function MouseWheelHandle(target, onWheelCallback, onWheelGuard) {\n    _classCallCheck(this, MouseWheelHandle);\n\n    this.animationFrameId = 0;\n    this.deltaX = 0;\n    this.deltaY = 0;\n    this.eventName = Platform.isEventSupported('wheel') ? 'wheel' : 'mousewheel';\n    this.target = target;\n    this.onWheelCallback = onWheelCallback;\n    this.onWheelGuard = onWheelGuard;\n    this.onWheel = this.onWheel.bind(this);\n    this.didWheel = this.didWheel.bind(this);\n  }\n\n  _createClass(MouseWheelHandle, [{\n    key: \"enable\",\n    value: function enable() {\n      if (Platform.SUPPORT_PASSIVE) {\n        this.target.addEventListener(this.eventName, this.onWheel, {\n          passive: false\n        });\n      } else {\n        JQuery(this.target).on('mousewheel', this.onWheel);\n      }\n    }\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      if (Platform.SUPPORT_PASSIVE) {\n        this.target.removeEventListener(this.eventName, this.onWheel);\n      } else {\n        JQuery(this.target).off('mousewheel');\n      }\n    }\n  }, {\n    key: \"onWheel\",\n    value: function onWheel(e) {\n      var _this = this;\n\n      if (this.onWheelGuard != null && !this.onWheelGuard(e)) {\n        return;\n      }\n\n      this.deltaX += e.deltaX;\n      this.deltaY += e.deltaY;\n      e.preventDefault();\n      var changed;\n\n      if (this.deltaX !== 0 || this.deltaY !== 0) {\n        e.stopPropagation();\n        changed = true;\n      }\n\n      if (changed === true && this.animationFrameId === 0) {\n        this.animationFrameId = requestAnimationFrame(function () {\n          _this.didWheel(e);\n        });\n      }\n    }\n  }, {\n    key: \"didWheel\",\n    value: function didWheel(e) {\n      this.animationFrameId = 0;\n      this.onWheelCallback(e, this.deltaX, this.deltaY);\n      this.deltaX = 0;\n      this.deltaY = 0;\n    }\n  }]);\n\n  return MouseWheelHandle;\n}();","map":{"version":3,"sources":["../../../src/util/dom/mousewheel.ts"],"names":[],"mappings":";;AAAA,OAAO,MAAP,MAAmB,QAAnB;AACA,SAAS,QAAT,QAAyB,aAAzB;AAEA,WAAa,gBAAb;AAWE,4BACE,MADF,EAEE,eAFF,EAGE,YAHF,EAG8C;AAAA;;AAVtC,SAAA,gBAAA,GAAmB,CAAnB;AACA,SAAA,MAAA,GAAS,CAAT;AACA,SAAA,MAAA,GAAS,CAAT;AACA,SAAA,SAAA,GAAY,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,IAChB,OADgB,GAEhB,YAFI;AASN,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,eAAL,GAAuB,eAAvB;AACA,SAAK,YAAL,GAAoB,YAApB;AACA,SAAK,OAAL,GAAe,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAK,QAAL,GAAgB,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAAhB;AACD;;AArBH;AAAA;AAAA,WAuBS,kBAAM;AACX,UAAI,QAAQ,CAAC,eAAb,EAA8B;AAC5B,aAAK,MAAL,CAAY,gBAAZ,CAA6B,KAAK,SAAlC,EAA6C,KAAK,OAAlD,EAA2D;AACzD,UAAA,OAAO,EAAE;AADgD,SAA3D;AAGD,OAJD,MAIO;AACL,QAAA,MAAM,CAAC,KAAK,MAAN,CAAN,CAAoB,EAApB,CAAuB,YAAvB,EAAqC,KAAK,OAA1C;AACD;AACF;AA/BH;AAAA;AAAA,WAiCS,mBAAO;AACZ,UAAI,QAAQ,CAAC,eAAb,EAA8B;AAC5B,aAAK,MAAL,CAAY,mBAAZ,CAAgC,KAAK,SAArC,EAAgD,KAAK,OAArD;AACD,OAFD,MAEO;AACL,QAAA,MAAM,CAAC,KAAK,MAAN,CAAN,CAAoB,GAApB,CAAwB,YAAxB;AACD;AACF;AAvCH;AAAA;AAAA,WAyCU,iBAAQ,CAAR,EAAuD;AAAA;;AAC7D,UAAI,KAAK,YAAL,IAAqB,IAArB,IAA6B,CAAC,KAAK,YAAL,CAAkB,CAAlB,CAAlC,EAAwD;AACtD;AACD;;AAED,WAAK,MAAL,IAAe,CAAC,CAAC,MAAjB;AACA,WAAK,MAAL,IAAe,CAAC,CAAC,MAAjB;AACA,MAAA,CAAC,CAAC,cAAF;AAEA,UAAI,OAAJ;;AACA,UAAI,KAAK,MAAL,KAAgB,CAAhB,IAAqB,KAAK,MAAL,KAAgB,CAAzC,EAA4C;AAC1C,QAAA,CAAC,CAAC,eAAF;AACA,QAAA,OAAO,GAAG,IAAV;AACD;;AAED,UAAI,OAAO,KAAK,IAAZ,IAAoB,KAAK,gBAAL,KAA0B,CAAlD,EAAqD;AACnD,aAAK,gBAAL,GAAwB,qBAAqB,CAAC,YAAK;AACjD,UAAA,KAAI,CAAC,QAAL,CAAc,CAAd;AACD,SAF4C,CAA7C;AAGD;AACF;AA7DH;AAAA;AAAA,WA+DU,kBAAS,CAAT,EAAwD;AAC9D,WAAK,gBAAL,GAAwB,CAAxB;AACA,WAAK,eAAL,CAAqB,CAArB,EAAwB,KAAK,MAA7B,EAAqC,KAAK,MAA1C;AACA,WAAK,MAAL,GAAc,CAAd;AACA,WAAK,MAAL,GAAc,CAAd;AACD;AApEH;;AAAA;AAAA","sourceRoot":"","sourcesContent":["import JQuery from 'jquery';\nimport { Platform } from '../platform';\nexport class MouseWheelHandle {\n    constructor(target, onWheelCallback, onWheelGuard) {\n        this.animationFrameId = 0;\n        this.deltaX = 0;\n        this.deltaY = 0;\n        this.eventName = Platform.isEventSupported('wheel')\n            ? 'wheel'\n            : 'mousewheel';\n        this.target = target;\n        this.onWheelCallback = onWheelCallback;\n        this.onWheelGuard = onWheelGuard;\n        this.onWheel = this.onWheel.bind(this);\n        this.didWheel = this.didWheel.bind(this);\n    }\n    enable() {\n        if (Platform.SUPPORT_PASSIVE) {\n            this.target.addEventListener(this.eventName, this.onWheel, {\n                passive: false,\n            });\n        }\n        else {\n            JQuery(this.target).on('mousewheel', this.onWheel);\n        }\n    }\n    disable() {\n        if (Platform.SUPPORT_PASSIVE) {\n            this.target.removeEventListener(this.eventName, this.onWheel);\n        }\n        else {\n            JQuery(this.target).off('mousewheel');\n        }\n    }\n    onWheel(e) {\n        if (this.onWheelGuard != null && !this.onWheelGuard(e)) {\n            return;\n        }\n        this.deltaX += e.deltaX;\n        this.deltaY += e.deltaY;\n        e.preventDefault();\n        let changed;\n        if (this.deltaX !== 0 || this.deltaY !== 0) {\n            e.stopPropagation();\n            changed = true;\n        }\n        if (changed === true && this.animationFrameId === 0) {\n            this.animationFrameId = requestAnimationFrame(() => {\n                this.didWheel(e);\n            });\n        }\n    }\n    didWheel(e) {\n        this.animationFrameId = 0;\n        this.onWheelCallback(e, this.deltaX, this.deltaY);\n        this.deltaX = 0;\n        this.deltaY = 0;\n    }\n}\n//# sourceMappingURL=mousewheel.js.map"]},"metadata":{},"sourceType":"module"}