{"ast":null,"code":"import _slicedToArray from\"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';/* Components */import ErrorWarning from'./ErrorWarning';import LoadingCard from'./LoadingCard';import SortPolicies from'./SortPolicies';import SubjectsHorizontalList from'./SubjectsHorizontalList';/* UI Components Library */import{Card,List,Space,Avatar}from'antd';/* Icons */import{CitationsIcon}from'../media/icons/citations';import{CalendarOutlined,BankOutlined,TeamOutlined}from'@ant-design/icons';/* Utilities */import{APIRequest}from'../apis/api';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AuthorsTab=function AuthorsTab(_ref){var core=_ref.core;var _useState=useState({max:10,page:1}),_useState2=_slicedToArray(_useState,2),pagination=_useState2[0],setPagination=_useState2[1];var _useState3=useState('citations'),_useState4=_slicedToArray(_useState3,2),sort=_useState4[0],setSort=_useState4[1];var _APIRequest=APIRequest(\"\".concat(core.URL,\"&data=authors&max=\").concat(pagination.max,\"&page=\").concat(pagination.page,\"&sort=\").concat(sort)),_APIRequest2=_slicedToArray(_APIRequest,2),state=_APIRequest2[0],setUrl=_APIRequest2[1];var onPageChange=function onPageChange(_ref2){var page=_ref2.page,pageSize=_ref2.pageSize;setPagination({page:page,max:pageSize});window.scrollTo(0,0);};useEffect(function(){setUrl(\"\".concat(core.URL,\"&data=authors&max=\").concat(pagination.max,\"&page=\").concat(pagination.page,\"&sort=\").concat(sort));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[pagination,sort]);if(state.isError){return/*#__PURE__*/_jsx(ErrorWarning,{});}if(state.isLoading){return/*#__PURE__*/_jsx(LoadingCard,{});}return/*#__PURE__*/_jsx(Card,{headStyle:{backgroundColor:'#003e65',color:'white'},size:\"small\",title:\"Autores\",extra:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"white-text\",children:[state.data.total||state.data.total_results,' ',state.data.total>1||state.data.total_results>1?'resultados':'resultado']}),/*#__PURE__*/_jsx(SortPolicies,{sort:sort,setSort:setSort})]}),children:/*#__PURE__*/_jsx(List,{itemLayout:\"vertical\",size:\"large\",dataSource:state.data.data,pagination:{size:'small',position:'bottom',total:state.data.total,onChange:function onChange(page,pageSize){return onPageChange({page:page,pageSize:pageSize});},hideOnSinglePage:true,current:pagination.page,pageSize:pagination.max},renderItem:function renderItem(item){var _item$subjects;return/*#__PURE__*/_jsx(List.Item,{actions:[/*#__PURE__*/_jsxs(Space,{style:{fontSize:18},children:[/*#__PURE__*/React.createElement(CalendarOutlined),\"Publicaciones: \",item.products_count]}),/*#__PURE__*/_jsxs(Space,{style:{fontSize:18},children:[/*#__PURE__*/React.createElement(CitationsIcon),\"Citado: \",item.citations_count]})],children:/*#__PURE__*/_jsx(List.Item.Meta,{avatar:/*#__PURE__*/_jsx(Avatar,{className:\"avatar\",size:\"large\",children:item.name.charAt(0)}),title:/*#__PURE__*/_jsx(Link,{style:{fontSize:18,textDecoration:'underline'},to:\"/app/authors?id=\".concat(item.id),onClick:function onClick(){return core.setURL(\"/app/authors?id=\".concat(item.id));},children:item.name}),description:/*#__PURE__*/_jsxs(_Fragment,{children:[item.affiliation.group.name?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TeamOutlined,{}),' ',/*#__PURE__*/_jsx(Link,{style:{fontSize:12,textDecoration:'underline'},to:\"/app/groups?id=\".concat(item.affiliation.group.id),onClick:function onClick(){return core.setURL(\"/app/groups?id=\".concat(item.affiliation.group.id));},children:item.affiliation.group.name})]}):'',item.affiliation.institution.name?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(BankOutlined,{}),' ',/*#__PURE__*/_jsx(Link,{style:{fontSize:12,textDecoration:'underline'},to:\"/app/institutions?id=\".concat(item.affiliation.institution.id),onClick:function onClick(){return core.setURL(\"/app/institutions?id=\".concat(item.affiliation.institution.id));},children:item.affiliation.institution.name})]}):'',((_item$subjects=item.subjects)===null||_item$subjects===void 0?void 0:_item$subjects.length)?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"subjects__list--title\",children:\"Temas: \"}),SubjectsHorizontalList({subjectsList:item.subjects,core:core})]}):'']})})});}})});};export default AuthorsTab;","map":{"version":3,"sources":["/home/manolo/sds-ui/src/components/AuthorsTab.jsx"],"names":["React","useState","useEffect","ErrorWarning","LoadingCard","SortPolicies","SubjectsHorizontalList","Card","List","Space","Avatar","CitationsIcon","CalendarOutlined","BankOutlined","TeamOutlined","APIRequest","Link","AuthorsTab","core","max","page","pagination","setPagination","sort","setSort","URL","state","setUrl","onPageChange","pageSize","window","scrollTo","isError","isLoading","backgroundColor","color","data","total","total_results","size","position","onChange","hideOnSinglePage","current","item","fontSize","createElement","products_count","citations_count","name","charAt","textDecoration","id","setURL","affiliation","group","institution","subjects","length","subjectsList"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\n/* Components */\nimport ErrorWarning from './ErrorWarning';\nimport LoadingCard from './LoadingCard';\nimport SortPolicies from './SortPolicies';\nimport SubjectsHorizontalList from './SubjectsHorizontalList';\n\n/* UI Components Library */\nimport { Card, List, Space, Avatar } from 'antd';\n\n/* Icons */\nimport { CitationsIcon } from '../media/icons/citations';\nimport {\n  CalendarOutlined,\n  BankOutlined,\n  TeamOutlined,\n} from '@ant-design/icons';\n\n/* Utilities */\nimport { APIRequest } from '../apis/api';\nimport { Link } from 'react-router-dom';\n\nconst AuthorsTab = ({ core }) => {\n  const [pagination, setPagination] = useState({ max: 10, page: 1 });\n  const [sort, setSort] = useState('citations');\n  const [state, setUrl] = APIRequest(\n    `${core.URL}&data=authors&max=${pagination.max}&page=${pagination.page}&sort=${sort}`\n  );\n\n  const onPageChange = ({ page, pageSize }) => {\n    setPagination({ page: page, max: pageSize });\n    window.scrollTo(0, 0);\n  };\n\n  useEffect(() => {\n    setUrl(\n      `${core.URL}&data=authors&max=${pagination.max}&page=${pagination.page}&sort=${sort}`\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pagination, sort]);\n\n  if (state.isError) {\n    return <ErrorWarning />;\n  }\n  if (state.isLoading) {\n    return <LoadingCard />;\n  }\n  return (\n    <Card\n      headStyle={{ backgroundColor: '#003e65', color: 'white' }}\n      size=\"small\"\n      title=\"Autores\"\n      extra={\n        <div>\n          <p className=\"white-text\">\n            {state.data.total || state.data.total_results}{' '}\n            {state.data.total > 1 || state.data.total_results > 1\n              ? 'resultados'\n              : 'resultado'}\n          </p>\n          <SortPolicies sort={sort} setSort={setSort} />\n        </div>\n      }\n    >\n      <List\n        itemLayout=\"vertical\"\n        size=\"large\"\n        dataSource={state.data.data}\n        pagination={{\n          size: 'small',\n          position: 'bottom',\n          total: state.data.total,\n          onChange: (page, pageSize) =>\n            onPageChange({\n              page,\n              pageSize,\n            }),\n          hideOnSinglePage: true,\n          current: pagination.page,\n          pageSize: pagination.max,\n        }}\n        renderItem={(item) => (\n          <List.Item\n            actions={[\n              <Space style={{ fontSize: 18 }}>\n                {React.createElement(CalendarOutlined)}\n                Publicaciones: {item.products_count}\n              </Space>,\n              <Space style={{ fontSize: 18 }}>\n                {React.createElement(CitationsIcon)}\n                Citado: {item.citations_count}\n              </Space>,\n            ]}\n          >\n            <List.Item.Meta\n              avatar={\n                <Avatar className=\"avatar\" size=\"large\">\n                  {item.name.charAt(0)}\n                </Avatar>\n              }\n              title={\n                <Link\n                  style={{ fontSize: 18, textDecoration: 'underline' }}\n                  to={`/app/authors?id=${item.id}`}\n                  onClick={() => core.setURL(`/app/authors?id=${item.id}`)}\n                >\n                  {item.name}\n                </Link>\n              }\n              description={\n                <>\n                  {item.affiliation.group.name ? (\n                    <div>\n                      <TeamOutlined />{' '}\n                      <Link\n                        style={{\n                          fontSize: 12,\n                          textDecoration: 'underline',\n                        }}\n                        to={`/app/groups?id=${item.affiliation.group.id}`}\n                        onClick={() =>\n                          core.setURL(\n                            `/app/groups?id=${item.affiliation.group.id}`\n                          )\n                        }\n                      >\n                        {item.affiliation.group.name}\n                      </Link>\n                    </div>\n                  ) : (\n                    ''\n                  )}\n                  {item.affiliation.institution.name ? (\n                    <div>\n                      <BankOutlined />{' '}\n                      <Link\n                        style={{\n                          fontSize: 12,\n                          textDecoration: 'underline',\n                        }}\n                        to={`/app/institutions?id=${item.affiliation.institution.id}`}\n                        onClick={() =>\n                          core.setURL(\n                            `/app/institutions?id=${item.affiliation.institution.id}`\n                          )\n                        }\n                      >\n                        {item.affiliation.institution.name}\n                      </Link>\n                    </div>\n                  ) : (\n                    ''\n                  )}\n                  {item.subjects?.length ? (\n                    <>\n                      <p className=\"subjects__list--title\">Temas: </p>\n                      {SubjectsHorizontalList({\n                        subjectsList: item.subjects,\n                        core: core,\n                      })}\n                    </>\n                  ) : (\n                    ''\n                  )}\n                </>\n              }\n            />\n          </List.Item>\n        )}\n      />\n    </Card>\n  );\n};\n\nexport default AuthorsTab;\n"]},"metadata":{},"sourceType":"module"}