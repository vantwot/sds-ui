{"ast":null,"code":"import _slicedToArray from\"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';/* Components */import ErrorWarning from'./ErrorWarning';import LoadingCard from'./LoadingCard';import SortPolicies from'./SortPolicies';/* UI Components Library */import{Card,List,Space,Avatar}from'antd';/* Icons */import{CitationsIcon}from'../media/icons/citations';import{CalendarOutlined,BankOutlined}from'@ant-design/icons';/* Utilities */import{APIRequest}from'../apis/api';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GroupsTab=function GroupsTab(_ref){var core=_ref.core;var _useState=useState({max:10,page:1}),_useState2=_slicedToArray(_useState,2),pagination=_useState2[0],setPagination=_useState2[1];var _useState3=useState('citations'),_useState4=_slicedToArray(_useState3,2),sort=_useState4[0],setSort=_useState4[1];var _APIRequest=APIRequest(\"\".concat(core.URL,\"&data=groups&max=\").concat(pagination.max,\"&page=\").concat(pagination.page,\"&sort=\").concat(sort)),_APIRequest2=_slicedToArray(_APIRequest,2),state=_APIRequest2[0],setUrl=_APIRequest2[1];var onPageChange=function onPageChange(_ref2){var page=_ref2.page,pageSize=_ref2.pageSize;setPagination({page:page,max:pageSize});window.scrollTo(0,0);};useEffect(function(){setUrl(\"\".concat(core.URL,\"&data=groups&max=\").concat(pagination.max,\"&page=\").concat(pagination.page,\"&sort=\").concat(sort));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[pagination,sort]);if(state.isError){return/*#__PURE__*/_jsx(ErrorWarning,{});}if(state.isLoading){return/*#__PURE__*/_jsx(LoadingCard,{});}return/*#__PURE__*/_jsx(Card,{headStyle:{backgroundColor:'#003e65',color:'white'},size:\"small\",title:\"Grupos de Investigaci\\xF3n\",extra:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"white-text\",children:[state.data.total||state.data.total_results,' ',state.data.total>1||state.data.total_results>1?'resultados':'resultado']}),/*#__PURE__*/_jsx(SortPolicies,{sort:sort,setSort:setSort})]}),children:/*#__PURE__*/_jsx(List,{itemLayout:\"vertical\",size:\"large\",dataSource:state.data.data,pagination:{size:'small',position:'bottom',total:state.data.total,onChange:function onChange(page,pageSize){return onPageChange({page:page,pageSize:pageSize});},hideOnSinglePage:true,current:pagination.page,pageSize:pagination.max},renderItem:function renderItem(item){var _item$institution;return/*#__PURE__*/_jsx(List.Item,{actions:[/*#__PURE__*/_jsxs(Space,{style:{fontSize:18},children:[/*#__PURE__*/React.createElement(CalendarOutlined),\"Publicaciones: \",item.products_count]}),/*#__PURE__*/_jsxs(Space,{style:{fontSize:18},children:[/*#__PURE__*/React.createElement(CitationsIcon),\"Citado: \",item.citations_count]})],children:/*#__PURE__*/_jsx(List.Item.Meta,{avatar:/*#__PURE__*/_jsx(Avatar,{className:\"avatar\",size:\"large\",children:item.name.charAt(0)}),title:/*#__PURE__*/_jsx(Link,{style:{fontSize:18,textDecoration:'underline'},to:\"/app/groups?id=\".concat(item.id),onClick:function onClick(){return core.setURL(\"/app/groups?id=\".concat(item.id));},children:item.name}),description:((_item$institution=item.institution)===null||_item$institution===void 0?void 0:_item$institution.name)?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(BankOutlined,{}),' ',/*#__PURE__*/_jsx(Link,{style:{fontSize:12,textDecoration:'underline'},to:\"/app/institutions?id=\".concat(item.institution.id),onClick:function onClick(){return core.setURL(\"/app/institutions?id=\".concat(item.institution.id));},children:item.institution.name})]}):''})});}})});};export default GroupsTab;","map":{"version":3,"sources":["/home/manolo/sds-ui/src/components/GroupsTab.jsx"],"names":["React","useState","useEffect","ErrorWarning","LoadingCard","SortPolicies","Card","List","Space","Avatar","CitationsIcon","CalendarOutlined","BankOutlined","APIRequest","Link","GroupsTab","core","max","page","pagination","setPagination","sort","setSort","URL","state","setUrl","onPageChange","pageSize","window","scrollTo","isError","isLoading","backgroundColor","color","data","total","total_results","size","position","onChange","hideOnSinglePage","current","item","fontSize","createElement","products_count","citations_count","name","charAt","textDecoration","id","setURL","institution"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\n/* Components */\nimport ErrorWarning from './ErrorWarning';\nimport LoadingCard from './LoadingCard';\nimport SortPolicies from './SortPolicies';\n\n/* UI Components Library */\nimport { Card, List, Space, Avatar } from 'antd';\n\n/* Icons */\nimport { CitationsIcon } from '../media/icons/citations';\nimport { CalendarOutlined, BankOutlined } from '@ant-design/icons';\n\n/* Utilities */\nimport { APIRequest } from '../apis/api';\nimport { Link } from 'react-router-dom';\n\nconst GroupsTab = ({ core }) => {\n  const [pagination, setPagination] = useState({ max: 10, page: 1 });\n  const [sort, setSort] = useState('citations');\n  const [state, setUrl] = APIRequest(\n    `${core.URL}&data=groups&max=${pagination.max}&page=${pagination.page}&sort=${sort}`\n  );\n\n  const onPageChange = ({ page, pageSize }) => {\n    setPagination({ page: page, max: pageSize });\n    window.scrollTo(0, 0);\n  };\n\n  useEffect(() => {\n    setUrl(\n      `${core.URL}&data=groups&max=${pagination.max}&page=${pagination.page}&sort=${sort}`\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pagination, sort]);\n\n  if (state.isError) {\n    return <ErrorWarning />;\n  }\n  if (state.isLoading) {\n    return <LoadingCard />;\n  }\n  return (\n    <Card\n      headStyle={{ backgroundColor: '#003e65', color: 'white' }}\n      size=\"small\"\n      title=\"Grupos de InvestigaciÃ³n\"\n      extra={\n        <div>\n          <p className=\"white-text\">\n            {state.data.total || state.data.total_results}{' '}\n            {state.data.total > 1 || state.data.total_results > 1\n              ? 'resultados'\n              : 'resultado'}\n          </p>\n          <SortPolicies sort={sort} setSort={setSort} />\n        </div>\n      }\n    >\n      <List\n        itemLayout=\"vertical\"\n        size=\"large\"\n        dataSource={state.data.data}\n        pagination={{\n          size: 'small',\n          position: 'bottom',\n          total: state.data.total,\n          onChange: (page, pageSize) =>\n            onPageChange({\n              page,\n              pageSize,\n            }),\n          hideOnSinglePage: true,\n          current: pagination.page,\n          pageSize: pagination.max,\n        }}\n        renderItem={(item) => (\n          <List.Item\n            actions={[\n              <Space style={{ fontSize: 18 }}>\n                {React.createElement(CalendarOutlined)}\n                Publicaciones: {item.products_count}\n              </Space>,\n              <Space style={{ fontSize: 18 }}>\n                {React.createElement(CitationsIcon)}\n                Citado: {item.citations_count}\n              </Space>,\n            ]}\n          >\n            <List.Item.Meta\n              avatar={\n                <Avatar className=\"avatar\" size=\"large\">\n                  {item.name.charAt(0)}\n                </Avatar>\n              }\n              title={\n                <Link\n                  style={{ fontSize: 18, textDecoration: 'underline' }}\n                  to={`/app/groups?id=${item.id}`}\n                  onClick={() => core.setURL(`/app/groups?id=${item.id}`)}\n                >\n                  {item.name}\n                </Link>\n              }\n              description={\n                item.institution?.name ? (\n                  <div>\n                    <BankOutlined />{' '}\n                    <Link\n                      style={{\n                        fontSize: 12,\n                        textDecoration: 'underline',\n                      }}\n                      to={`/app/institutions?id=${item.institution.id}`}\n                      onClick={() =>\n                        core.setURL(\n                          `/app/institutions?id=${item.institution.id}`\n                        )\n                      }\n                    >\n                      {item.institution.name}\n                    </Link>\n                  </div>\n                ) : (\n                  ''\n                )\n              }\n            />\n          </List.Item>\n        )}\n      />\n    </Card>\n  );\n};\n\nexport default GroupsTab;\n"]},"metadata":{},"sourceType":"module"}