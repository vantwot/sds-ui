{"ast":null,"code":"import JQuery from 'jquery';\nimport { Platform } from '../platform';\nexport class MouseWheelHandle {\n  constructor(target, onWheelCallback, onWheelGuard) {\n    this.animationFrameId = 0;\n    this.deltaX = 0;\n    this.deltaY = 0;\n    this.eventName = Platform.isEventSupported('wheel') ? 'wheel' : 'mousewheel';\n    this.target = target;\n    this.onWheelCallback = onWheelCallback;\n    this.onWheelGuard = onWheelGuard;\n    this.onWheel = this.onWheel.bind(this);\n    this.didWheel = this.didWheel.bind(this);\n  }\n\n  enable() {\n    if (Platform.SUPPORT_PASSIVE) {\n      this.target.addEventListener(this.eventName, this.onWheel, {\n        passive: false\n      });\n    } else {\n      JQuery(this.target).on('mousewheel', this.onWheel);\n    }\n  }\n\n  disable() {\n    if (Platform.SUPPORT_PASSIVE) {\n      this.target.removeEventListener(this.eventName, this.onWheel);\n    } else {\n      JQuery(this.target).off('mousewheel');\n    }\n  }\n\n  onWheel(e) {\n    if (this.onWheelGuard != null && !this.onWheelGuard(e)) {\n      return;\n    }\n\n    this.deltaX += e.deltaX;\n    this.deltaY += e.deltaY;\n    e.preventDefault();\n    let changed;\n\n    if (this.deltaX !== 0 || this.deltaY !== 0) {\n      e.stopPropagation();\n      changed = true;\n    }\n\n    if (changed === true && this.animationFrameId === 0) {\n      this.animationFrameId = requestAnimationFrame(() => {\n        this.didWheel(e);\n      });\n    }\n  }\n\n  didWheel(e) {\n    this.animationFrameId = 0;\n    this.onWheelCallback(e, this.deltaX, this.deltaY);\n    this.deltaX = 0;\n    this.deltaY = 0;\n  }\n\n}","map":{"version":3,"sources":["../../../src/util/dom/mousewheel.ts"],"names":[],"mappings":"AAAA,OAAO,MAAP,MAAmB,QAAnB;AACA,SAAS,QAAT,QAAyB,aAAzB;AAEA,OAAM,MAAO,gBAAP,CAAuB;AAW3B,EAAA,WAAA,CACE,MADF,EAEE,eAFF,EAGE,YAHF,EAG8C;AAVtC,SAAA,gBAAA,GAAmB,CAAnB;AACA,SAAA,MAAA,GAAS,CAAT;AACA,SAAA,MAAA,GAAS,CAAT;AACA,SAAA,SAAA,GAAY,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,IAChB,OADgB,GAEhB,YAFI;AASN,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,eAAL,GAAuB,eAAvB;AACA,SAAK,YAAL,GAAoB,YAApB;AACA,SAAK,OAAL,GAAe,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAK,QAAL,GAAgB,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAAhB;AACD;;AAEM,EAAA,MAAM,GAAA;AACX,QAAI,QAAQ,CAAC,eAAb,EAA8B;AAC5B,WAAK,MAAL,CAAY,gBAAZ,CAA6B,KAAK,SAAlC,EAA6C,KAAK,OAAlD,EAA2D;AACzD,QAAA,OAAO,EAAE;AADgD,OAA3D;AAGD,KAJD,MAIO;AACL,MAAA,MAAM,CAAC,KAAK,MAAN,CAAN,CAAoB,EAApB,CAAuB,YAAvB,EAAqC,KAAK,OAA1C;AACD;AACF;;AAEM,EAAA,OAAO,GAAA;AACZ,QAAI,QAAQ,CAAC,eAAb,EAA8B;AAC5B,WAAK,MAAL,CAAY,mBAAZ,CAAgC,KAAK,SAArC,EAAgD,KAAK,OAArD;AACD,KAFD,MAEO;AACL,MAAA,MAAM,CAAC,KAAK,MAAN,CAAN,CAAoB,GAApB,CAAwB,YAAxB;AACD;AACF;;AAEO,EAAA,OAAO,CAAC,CAAD,EAAgD;AAC7D,QAAI,KAAK,YAAL,IAAqB,IAArB,IAA6B,CAAC,KAAK,YAAL,CAAkB,CAAlB,CAAlC,EAAwD;AACtD;AACD;;AAED,SAAK,MAAL,IAAe,CAAC,CAAC,MAAjB;AACA,SAAK,MAAL,IAAe,CAAC,CAAC,MAAjB;AACA,IAAA,CAAC,CAAC,cAAF;AAEA,QAAI,OAAJ;;AACA,QAAI,KAAK,MAAL,KAAgB,CAAhB,IAAqB,KAAK,MAAL,KAAgB,CAAzC,EAA4C;AAC1C,MAAA,CAAC,CAAC,eAAF;AACA,MAAA,OAAO,GAAG,IAAV;AACD;;AAED,QAAI,OAAO,KAAK,IAAZ,IAAoB,KAAK,gBAAL,KAA0B,CAAlD,EAAqD;AACnD,WAAK,gBAAL,GAAwB,qBAAqB,CAAC,MAAK;AACjD,aAAK,QAAL,CAAc,CAAd;AACD,OAF4C,CAA7C;AAGD;AACF;;AAEO,EAAA,QAAQ,CAAC,CAAD,EAAgD;AAC9D,SAAK,gBAAL,GAAwB,CAAxB;AACA,SAAK,eAAL,CAAqB,CAArB,EAAwB,KAAK,MAA7B,EAAqC,KAAK,MAA1C;AACA,SAAK,MAAL,GAAc,CAAd;AACA,SAAK,MAAL,GAAc,CAAd;AACD;;AApE0B","sourceRoot":"","sourcesContent":["import JQuery from 'jquery';\nimport { Platform } from '../platform';\nexport class MouseWheelHandle {\n    constructor(target, onWheelCallback, onWheelGuard) {\n        this.animationFrameId = 0;\n        this.deltaX = 0;\n        this.deltaY = 0;\n        this.eventName = Platform.isEventSupported('wheel')\n            ? 'wheel'\n            : 'mousewheel';\n        this.target = target;\n        this.onWheelCallback = onWheelCallback;\n        this.onWheelGuard = onWheelGuard;\n        this.onWheel = this.onWheel.bind(this);\n        this.didWheel = this.didWheel.bind(this);\n    }\n    enable() {\n        if (Platform.SUPPORT_PASSIVE) {\n            this.target.addEventListener(this.eventName, this.onWheel, {\n                passive: false,\n            });\n        }\n        else {\n            JQuery(this.target).on('mousewheel', this.onWheel);\n        }\n    }\n    disable() {\n        if (Platform.SUPPORT_PASSIVE) {\n            this.target.removeEventListener(this.eventName, this.onWheel);\n        }\n        else {\n            JQuery(this.target).off('mousewheel');\n        }\n    }\n    onWheel(e) {\n        if (this.onWheelGuard != null && !this.onWheelGuard(e)) {\n            return;\n        }\n        this.deltaX += e.deltaX;\n        this.deltaY += e.deltaY;\n        e.preventDefault();\n        let changed;\n        if (this.deltaX !== 0 || this.deltaY !== 0) {\n            e.stopPropagation();\n            changed = true;\n        }\n        if (changed === true && this.animationFrameId === 0) {\n            this.animationFrameId = requestAnimationFrame(() => {\n                this.didWheel(e);\n            });\n        }\n    }\n    didWheel(e) {\n        this.animationFrameId = 0;\n        this.onWheelCallback(e, this.deltaX, this.deltaY);\n        this.deltaX = 0;\n        this.deltaY = 0;\n    }\n}\n//# sourceMappingURL=mousewheel.js.map"]},"metadata":{},"sourceType":"module"}