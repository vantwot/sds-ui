{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport { bindAll, DOM } from '@antv/l7-utils';\nimport Control, { PositionType } from './BaseControl';\n\nvar Zoom = function (_Control) {\n  _inherits(Zoom, _Control);\n\n  var _super = _createSuper(Zoom);\n\n  function Zoom(cfg) {\n    var _this;\n\n    _classCallCheck(this, Zoom);\n\n    _this = _super.call(this, cfg);\n\n    _defineProperty(_assertThisInitialized(_this), \"disabled\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"zoomInButton\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"zoomOutButton\", void 0);\n\n    bindAll(['updateDisabled', 'zoomIn', 'zoomOut'], _assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Zoom, [{\n    key: \"getDefault\",\n    value: function getDefault() {\n      return {\n        position: PositionType.TOPLEFT,\n        zoomInText: '+',\n        zoomInTitle: 'Zoom in',\n        zoomOutText: '&#x2212;',\n        zoomOutTitle: 'Zoom out',\n        name: 'zoom'\n      };\n    }\n  }, {\n    key: \"onAdd\",\n    value: function onAdd() {\n      var zoomName = 'l7-control-zoom';\n      var container = DOM.create('div', zoomName + ' l7-bar');\n      this.zoomInButton = this.createButton(this.controlOption.zoomInText, this.controlOption.zoomInTitle, zoomName + '-in', container, this.zoomIn);\n      this.zoomOutButton = this.createButton(this.controlOption.zoomOutText, this.controlOption.zoomOutTitle, zoomName + '-out', container, this.zoomOut);\n      this.mapsService.on('zoomend', this.updateDisabled);\n      this.mapsService.on('zoomchange', this.updateDisabled);\n      this.updateDisabled();\n      return container;\n    }\n  }, {\n    key: \"onRemove\",\n    value: function onRemove() {\n      this.mapsService.off('zoomend', this.updateDisabled);\n      this.mapsService.off('zoomchange', this.updateDisabled);\n    }\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      this.disabled = true;\n      this.updateDisabled();\n      return this;\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      this.disabled = false;\n      this.updateDisabled();\n      return this;\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn() {\n      if (!this.disabled && this.mapsService.getZoom() < this.mapsService.getMaxZoom()) {\n        this.mapsService.zoomIn();\n      }\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut() {\n      if (!this.disabled && this.mapsService.getZoom() > this.mapsService.getMinZoom()) {\n        this.mapsService.zoomOut();\n      }\n    }\n  }, {\n    key: \"createButton\",\n    value: function createButton(html, tile, className, container, fn) {\n      var link = DOM.create('a', className, container);\n      link.innerHTML = html;\n      link.title = tile;\n      link.href = 'javascript:void(0)';\n      link.addEventListener('click', fn);\n      return link;\n    }\n  }, {\n    key: \"updateDisabled\",\n    value: function updateDisabled() {\n      var mapsService = this.mapsService;\n      var className = 'l7-disabled';\n      DOM.removeClass(this.zoomInButton, className);\n      DOM.removeClass(this.zoomOutButton, className);\n\n      if (this.disabled || mapsService.getZoom() <= mapsService.getMinZoom()) {\n        DOM.addClass(this.zoomOutButton, className);\n      }\n\n      if (this.disabled || mapsService.getZoom() >= mapsService.getMaxZoom()) {\n        DOM.addClass(this.zoomInButton, className);\n      }\n    }\n  }]);\n\n  return Zoom;\n}(Control);\n\nexport { Zoom as default };","map":{"version":3,"sources":["../../src/control/zoom.ts"],"names":["Zoom","Control","bindAll","position","PositionType","zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","name","zoomName","container","DOM","link","mapsService","className"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,SAAA,OAAA,EAAA,GAAA,QAAA,gBAAA;AACA,OAAA,OAAA,IAAA,YAAA,QAAA,eAAA;;IAOqBA,I;;;;;AAKnB,WAAA,IAAA,CAAA,GAAA,EAA+C;AAAA,QAAA,KAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,IAAA,CAAA;;AAC7C,IAAA,KAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,GAAA,CAAA;;AAD6C,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,cAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,eAAA,EAAA,KAAA,CAAA,CAAA;;AAE7CE,IAAAA,OAAO,CAAC,CAAA,gBAAA,EAAA,QAAA,EAAD,SAAC,CAAD,EAAA,sBAAA,CAAPA,KAAO,CAAA,CAAPA;AAF6C,WAAA,KAAA;AAG9C;;;;WACD,SAAA,UAAA,GAAoB;AAClB,aAAO;AACLC,QAAAA,QAAQ,EAAEC,YAAY,CADjB,OAAA;AAELC,QAAAA,UAAU,EAFL,GAAA;AAGLC,QAAAA,WAAW,EAHN,SAAA;AAILC,QAAAA,WAAW,EAJN,UAAA;AAKLC,QAAAA,YAAY,EALP,UAAA;AAMLC,QAAAA,IAAI,EAAE;AAND,OAAP;AAQD;;;WAED,SAAA,KAAA,GAA4B;AAC1B,UAAMC,QAAQ,GAAd,iBAAA;AACA,UAAMC,SAAS,GAAGC,GAAG,CAAHA,MAAAA,CAAAA,KAAAA,EAAkBF,QAAQ,GAA5C,SAAkBE,CAAlB;AAEA,WAAA,YAAA,GAAoB,KAAA,YAAA,CAClB,KAAA,aAAA,CADkB,UAAA,EAElB,KAAA,aAAA,CAFkB,WAAA,EAGlBF,QAAQ,GAHU,KAAA,EAAA,SAAA,EAKlB,KALF,MAAoB,CAApB;AAOA,WAAA,aAAA,GAAqB,KAAA,YAAA,CACnB,KAAA,aAAA,CADmB,WAAA,EAEnB,KAAA,aAAA,CAFmB,YAAA,EAGnBA,QAAQ,GAHW,MAAA,EAAA,SAAA,EAKnB,KALF,OAAqB,CAArB;AAOA,WAAA,WAAA,CAAA,EAAA,CAAA,SAAA,EAA+B,KAA/B,cAAA;AACA,WAAA,WAAA,CAAA,EAAA,CAAA,YAAA,EAAkC,KAAlC,cAAA;AACA,WAAA,cAAA;AACA,aAAA,SAAA;AACD;;;WAED,SAAA,QAAA,GAAkB;AAChB,WAAA,WAAA,CAAA,GAAA,CAAA,SAAA,EAAgC,KAAhC,cAAA;AACA,WAAA,WAAA,CAAA,GAAA,CAAA,YAAA,EAAmC,KAAnC,cAAA;AACD;;;WAED,SAAA,OAAA,GAAiB;AACf,WAAA,QAAA,GAAA,IAAA;AACA,WAAA,cAAA;AACA,aAAA,IAAA;AACD;;;WAED,SAAA,MAAA,GAAgB;AACd,WAAA,QAAA,GAAA,KAAA;AACA,WAAA,cAAA;AACA,aAAA,IAAA;AACD;;;WAED,SAAA,MAAA,GAAiB;AACf,UACE,CAAC,KAAD,QAAA,IACA,KAAA,WAAA,CAAA,OAAA,KAA6B,KAAA,WAAA,CAF/B,UAE+B,EAF/B,EAGE;AACA,aAAA,WAAA,CAAA,MAAA;AACD;AACF;;;WACD,SAAA,OAAA,GAAkB;AAChB,UACE,CAAC,KAAD,QAAA,IACA,KAAA,WAAA,CAAA,OAAA,KAA6B,KAAA,WAAA,CAF/B,UAE+B,EAF/B,EAGE;AACA,aAAA,WAAA,CAAA,OAAA;AACD;AACF;;;WACD,SAAA,YAAA,CAAA,IAAA,EAAA,IAAA,EAAA,SAAA,EAAA,SAAA,EAAA,EAAA,EAME;AACA,UAAMG,IAAI,GAAGD,GAAG,CAAHA,MAAAA,CAAAA,GAAAA,EAAAA,SAAAA,EAAb,SAAaA,CAAb;AACAC,MAAAA,IAAI,CAAJA,SAAAA,GAAAA,IAAAA;AACAA,MAAAA,IAAI,CAAJA,KAAAA,GAAAA,IAAAA;AACAA,MAAAA,IAAI,CAAJA,IAAAA,GAAAA,oBAAAA;AACAA,MAAAA,IAAI,CAAJA,gBAAAA,CAAAA,OAAAA,EAAAA,EAAAA;AACA,aAAA,IAAA;AACD;;;WACD,SAAA,cAAA,GAAyB;AACvB,UAAMC,WAAW,GAAG,KAApB,WAAA;AACA,UAAMC,SAAS,GAAf,aAAA;AACAH,MAAAA,GAAG,CAAHA,WAAAA,CAAgB,KAAhBA,YAAAA,EAAAA,SAAAA;AACAA,MAAAA,GAAG,CAAHA,WAAAA,CAAgB,KAAhBA,aAAAA,EAAAA,SAAAA;;AACA,UAAI,KAAA,QAAA,IAAiBE,WAAW,CAAXA,OAAAA,MAAyBA,WAAW,CAAzD,UAA8CA,EAA9C,EAAwE;AACtEF,QAAAA,GAAG,CAAHA,QAAAA,CAAa,KAAbA,aAAAA,EAAAA,SAAAA;AACD;;AACD,UAAI,KAAA,QAAA,IAAiBE,WAAW,CAAXA,OAAAA,MAAyBA,WAAW,CAAzD,UAA8CA,EAA9C,EAAwE;AACtEF,QAAAA,GAAG,CAAHA,QAAAA,CAAa,KAAbA,YAAAA,EAAAA,SAAAA;AACD;AACF;;;;EAtG+BX,O;;SAAbD,I","sourcesContent":["import { IControlOption } from '@antv/l7-core';\nimport { bindAll, DOM } from '@antv/l7-utils';\nimport Control, { PositionType } from './BaseControl';\nexport interface IZoomControlOption extends IControlOption {\n  zoomInText: string;\n  zoomInTitle: string;\n  zoomOutText: string;\n  zoomOutTitle: string;\n}\nexport default class Zoom extends Control {\n  private disabled: boolean;\n  private zoomInButton: HTMLElement;\n  private zoomOutButton: HTMLElement;\n\n  constructor(cfg?: Partial<IZoomControlOption>) {\n    super(cfg);\n    bindAll(['updateDisabled', 'zoomIn', 'zoomOut'], this);\n  }\n  public getDefault() {\n    return {\n      position: PositionType.TOPLEFT,\n      zoomInText: '+',\n      zoomInTitle: 'Zoom in',\n      zoomOutText: '&#x2212;',\n      zoomOutTitle: 'Zoom out',\n      name: 'zoom',\n    };\n  }\n\n  public onAdd(): HTMLElement {\n    const zoomName = 'l7-control-zoom';\n    const container = DOM.create('div', zoomName + ' l7-bar');\n\n    this.zoomInButton = this.createButton(\n      this.controlOption.zoomInText,\n      this.controlOption.zoomInTitle,\n      zoomName + '-in',\n      container,\n      this.zoomIn,\n    );\n    this.zoomOutButton = this.createButton(\n      this.controlOption.zoomOutText,\n      this.controlOption.zoomOutTitle,\n      zoomName + '-out',\n      container,\n      this.zoomOut,\n    );\n    this.mapsService.on('zoomend', this.updateDisabled);\n    this.mapsService.on('zoomchange', this.updateDisabled);\n    this.updateDisabled();\n    return container;\n  }\n\n  public onRemove() {\n    this.mapsService.off('zoomend', this.updateDisabled);\n    this.mapsService.off('zoomchange', this.updateDisabled);\n  }\n\n  public disable() {\n    this.disabled = true;\n    this.updateDisabled();\n    return this;\n  }\n\n  public enable() {\n    this.disabled = false;\n    this.updateDisabled();\n    return this;\n  }\n\n  private zoomIn() {\n    if (\n      !this.disabled &&\n      this.mapsService.getZoom() < this.mapsService.getMaxZoom()\n    ) {\n      this.mapsService.zoomIn();\n    }\n  }\n  private zoomOut() {\n    if (\n      !this.disabled &&\n      this.mapsService.getZoom() > this.mapsService.getMinZoom()\n    ) {\n      this.mapsService.zoomOut();\n    }\n  }\n  private createButton(\n    html: string,\n    tile: string,\n    className: string,\n    container: HTMLElement,\n    fn: (...arg: any[]) => any,\n  ) {\n    const link = DOM.create('a', className, container) as HTMLLinkElement;\n    link.innerHTML = html;\n    link.title = tile;\n    link.href = 'javascript:void(0)';\n    link.addEventListener('click', fn);\n    return link;\n  }\n  private updateDisabled() {\n    const mapsService = this.mapsService;\n    const className = 'l7-disabled';\n    DOM.removeClass(this.zoomInButton, className);\n    DOM.removeClass(this.zoomOutButton, className);\n    if (this.disabled || mapsService.getZoom() <= mapsService.getMinZoom()) {\n      DOM.addClass(this.zoomOutButton, className);\n    }\n    if (this.disabled || mapsService.getZoom() >= mapsService.getMaxZoom()) {\n      DOM.addClass(this.zoomInButton, className);\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}