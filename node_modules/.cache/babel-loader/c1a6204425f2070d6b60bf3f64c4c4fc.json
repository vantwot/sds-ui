{"ast":null,"code":"import _regeneratorRuntime from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport React from 'react';\nimport { // app service\nIconStore } from '@antv/xflow-core';\nimport { Menu } from '@antv/x6-react-components';\nexport var renderMenuOptions = function renderMenuOptions(props) {\n  var idx = props.idx,\n      menuItem = props.menuOptions,\n      target = props.target,\n      modelService = props.modelService,\n      commandService = props.commandService,\n      onHide = props.onHide;\n  var id = menuItem.id,\n      label = menuItem.label,\n      _menuItem$isEnabled = menuItem.isEnabled,\n      isEnabled = _menuItem$isEnabled === void 0 ? true : _menuItem$isEnabled,\n      _menuItem$isVisible = menuItem.isVisible,\n      isVisible = _menuItem$isVisible === void 0 ? true : _menuItem$isVisible,\n      iconName = menuItem.iconName,\n      _menuItem$submenu = menuItem.submenu,\n      submenu = _menuItem$submenu === void 0 ? [] : _menuItem$submenu,\n      active = menuItem.active,\n      hotkey = menuItem.hotkey,\n      render = menuItem.render,\n      _onClick = menuItem.onClick;\n\n  if (!isVisible) {\n    return null;\n  }\n  /** 分隔符：separator */\n\n\n  if (menuItem.type === 'separator') {\n    return React.createElement(Menu.Divider, {\n      key: String(menuItem.id) + idx\n    });\n  }\n  /** 根结点：root */\n\n\n  if (menuItem.type === 'root') {\n    return React.createElement(Menu, {\n      hasIcon: true\n    }, submenu.map(function (item, submenuIdx) {\n      return renderMenuOptions({\n        idx: submenuIdx,\n        target: target,\n        commandService: commandService,\n        modelService: modelService,\n        menuOptions: item,\n        onHide: onHide\n      });\n    }));\n  }\n  /** 子菜单：submenu */\n\n\n  if (menuItem.submenu && Array.isArray(menuItem.submenu)) {\n    var _Icon = IconStore.get(iconName);\n\n    var isDisable = !isEnabled;\n    return React.createElement(Menu.SubMenu, {\n      key: String(id),\n      text: label,\n      disabled: isDisable || submenu.length === 0,\n      icon: _Icon ? React.createElement(_Icon, null) : null,\n      active: active,\n      hotkey: hotkey\n    }, submenu.map(function (item, submenuIdx) {\n      return renderMenuOptions({\n        idx: submenuIdx,\n        target: target,\n        commandService: commandService,\n        modelService: modelService,\n        menuOptions: item,\n        onHide: onHide\n      });\n    }));\n  }\n  /** 叶子节点 */\n\n\n  var Icon = IconStore.get(iconName);\n\n  if (render) {\n    return React.createElement(render, {\n      menuItem: menuItem,\n      target: target,\n      commandService: commandService,\n      modelService: modelService,\n      onHide: onHide\n    }, [React.createElement(Menu.Item, {\n      key: String(id),\n      text: label,\n      disabled: !isEnabled,\n      icon: Icon ? React.createElement(Icon, null) : null,\n      active: active,\n      hotkey: hotkey\n    })]);\n  }\n\n  return React.createElement(Menu.Item, {\n    key: String(id),\n    text: label,\n    disabled: !isEnabled,\n    icon: Icon ? React.createElement(Icon, null) : null,\n    active: active,\n    hotkey: hotkey,\n    onClick: function onClick() {\n      return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _onClick({\n                  menuItem: menuItem,\n                  target: target,\n                  commandService: commandService,\n                  modelService: modelService\n                });\n\n              case 2:\n                onHide && onHide();\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n    }\n  });\n};","map":{"version":3,"sources":["../../../src/canvas-context-menu/components/menu-render.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport React from 'react';\nimport { \n// app service\nIconStore, } from '@antv/xflow-core';\nimport { Menu } from '@antv/x6-react-components';\nexport const renderMenuOptions = (props) => {\n    const { idx, menuOptions: menuItem, target, modelService, commandService, onHide } = props;\n    const { id, label, isEnabled = true, isVisible = true, iconName, submenu = [], active, hotkey, render, onClick, } = menuItem;\n    if (!isVisible) {\n        return null;\n    }\n    /** 分隔符：separator */\n    if (menuItem.type === 'separator') {\n        return React.createElement(Menu.Divider, { key: String(menuItem.id) + idx });\n    }\n    /** 根结点：root */\n    if (menuItem.type === 'root') {\n        return (React.createElement(Menu, { hasIcon: true }, submenu.map((item, submenuIdx) => renderMenuOptions({\n            idx: submenuIdx,\n            target,\n            commandService,\n            modelService,\n            menuOptions: item,\n            onHide,\n        }))));\n    }\n    /** 子菜单：submenu */\n    if (menuItem.submenu && Array.isArray(menuItem.submenu)) {\n        const Icon = IconStore.get(iconName);\n        const isDisable = !isEnabled;\n        return (React.createElement(Menu.SubMenu, { key: String(id), text: label, disabled: isDisable || submenu.length === 0, icon: Icon ? React.createElement(Icon, null) : null, active: active, hotkey: hotkey }, submenu.map((item, submenuIdx) => renderMenuOptions({\n            idx: submenuIdx,\n            target,\n            commandService,\n            modelService,\n            menuOptions: item,\n            onHide,\n        }))));\n    }\n    /** 叶子节点 */\n    const Icon = IconStore.get(iconName);\n    if (render) {\n        return React.createElement(render, { menuItem, target, commandService, modelService, onHide }, [\n            React.createElement(Menu.Item, { key: String(id), text: label, disabled: !isEnabled, icon: Icon ? React.createElement(Icon, null) : null, active: active, hotkey: hotkey }),\n        ]);\n    }\n    return (React.createElement(Menu.Item, { key: String(id), text: label, disabled: !isEnabled, icon: Icon ? React.createElement(Icon, null) : null, active: active, hotkey: hotkey, onClick: () => __awaiter(void 0, void 0, void 0, function* () {\n            yield onClick({ menuItem, target, commandService, modelService });\n            onHide && onHide();\n        }) }));\n};\n//# sourceMappingURL=menu-render.js.map"]},"metadata":{},"sourceType":"module"}