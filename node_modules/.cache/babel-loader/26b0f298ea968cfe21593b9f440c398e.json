{"ast":null,"code":"var _jsxFileName = \"/home/manolo/sds-ui/src/components/modules/SearchResult.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react'; //import { useHistory } from \"react-router\";\n\n/* Components */\n\nimport ErrorWarning from '../ErrorWarning';\nimport LoadingCard from '../LoadingCard';\nimport ProductionResult from '../ProductionResult';\nimport SortSearchResults from '../SortSearchResults';\n/* UI Library Components */\n\nimport { Avatar, Card, Col, List, Row, Space } from 'antd';\n/* Icons */\n\nimport { BankOutlined, TeamOutlined, CalendarOutlined } from '@ant-design/icons';\nimport { CitationsIcon } from '../../media/icons/citations';\n/* Utilities */\n\nimport { APIRequest } from '../../apis/api';\nimport { titles } from '../../utils/texts';\nimport { Link } from 'react-router-dom';\nimport { useLocation } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst queryString = require('query-string');\n\nconst SearchResult = _ref => {\n  _s();\n\n  let {\n    core\n  } = _ref;\n  const location = useLocation();\n  const parsed = queryString.parse(core.URL);\n  const type = parsed['/app/search?data'];\n  const [pagination, setPagination] = useState({\n    max: 10,\n    page: 1\n  });\n  const [sort, setSort] = useState('citations');\n  const [state, setUrl] = APIRequest(`${location.pathname}${location.search}&max=${pagination.max}&page=${pagination.page}&sort=${sort}`);\n  const tools = {\n    sort,\n    setSort\n  };\n  useEffect(() => {\n    document.title = 'Resultados de Búsqueda | SALUDATA';\n  }, []);\n  useEffect(() => {\n    setPagination({\n      max: 10,\n      page: 1\n    });\n    setSort('citations'); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [core.URL]);\n  useEffect(() => {\n    core.setFilters(state.data.filters);\n    return () => {\n      core.setFilters(null);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state]);\n  useEffect(() => {\n    setPagination({\n      max: 10,\n      page: 1\n    });\n  }, [sort]);\n  useEffect(() => {\n    setUrl(`${location.pathname}${location.search}&max=${pagination.max}&page=${pagination.page}&sort=${sort}`); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pagination]);\n\n  const onPageChange = _ref2 => {\n    let {\n      page,\n      pageSize\n    } = _ref2;\n    setPagination({\n      page: page,\n      max: pageSize\n    });\n    window.scrollTo(0, 0);\n  };\n\n  if (state.isError) {\n    return /*#__PURE__*/_jsxDEV(ErrorWarning, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 12\n    }, this);\n  } else if (state.isLoading) {\n    return /*#__PURE__*/_jsxDEV(LoadingCard, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 12\n    }, this);\n  }\n\n  return type === 'literature' ? /*#__PURE__*/_jsxDEV(ProductionResult, {\n    data: state.data,\n    core: core\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(Row, {\n    align: \"center\",\n    children: /*#__PURE__*/_jsxDEV(Col, {\n      span: 24,\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        headStyle: {\n          backgroundColor: '#003e65',\n          color: 'white'\n        },\n        size: \"small\",\n        bodyStyle: {\n          padding: '10px'\n        },\n        title: titles[parsed['/app/search?data']],\n        extra: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"white-text\",\n            children: [state.data.total_results, ' ', state.data.total_results === 1 ? 'resultado' : 'resultados']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SortSearchResults, {\n            tools: tools\n          }, \"1\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(List, {\n          itemLayout: \"vertical\",\n          size: \"large\",\n          dataSource: state.data.data,\n          pagination: {\n            size: 'small',\n            position: 'bottom',\n            total: state.data.total_results,\n            onChange: (page, pageSize) => onPageChange({\n              page,\n              pageSize\n            }),\n            hideOnSinglePage: true,\n            current: pagination.page,\n            pageSize: pagination.max\n          },\n          renderItem: item => {\n            var _item$affiliation, _item$affiliation$gro, _item$affiliation2, _item$affiliation2$gr, _item$affiliation4, _item$affiliation4$gr, _item$affiliation5, _item$affiliation5$in, _item$affiliation6, _item$affiliation6$in, _item$affiliation8, _item$affiliation8$in;\n\n            return /*#__PURE__*/_jsxDEV(List.Item, {\n              actions: [/*#__PURE__*/_jsxDEV(Space, {\n                style: {\n                  fontSize: 18\n                },\n                children: [/*#__PURE__*/React.createElement(CalendarOutlined), \"Publicaciones: \", item.papers_count || item.products_count]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Space, {\n                style: {\n                  fontSize: 18\n                },\n                children: [/*#__PURE__*/React.createElement(CitationsIcon), \"Citado: \", item.citations_count]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 19\n              }, this)],\n              children: /*#__PURE__*/_jsxDEV(List.Item.Meta, {\n                avatar: type === 'institutions' ? item.logo ? /*#__PURE__*/_jsxDEV(Avatar, {\n                  size: 48,\n                  src: item.logo\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(Avatar, {\n                  className: \"avatar\",\n                  size: 48,\n                  src: item.logo,\n                  children: \"U\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(Avatar, {\n                  className: \"avatar\",\n                  size: {\n                    xs: 40,\n                    sm: 50,\n                    md: 60,\n                    lg: 60,\n                    xl: 60,\n                    xxl: 60\n                  },\n                  children: item.name.charAt(0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 23\n                }, this),\n                title: /*#__PURE__*/_jsxDEV(Link, {\n                  className: \"searchResult--link\",\n                  to: `/app/${parsed['/app/search?data']}?id=${item.id}`,\n                  onClick: () => core.setURL(`/app/${parsed['/app/search?data']}?id=${item.id}`),\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 21\n                }, this),\n                description: type !== 'institutions' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [type === 'authors' && ((_item$affiliation = item.affiliation) === null || _item$affiliation === void 0 ? void 0 : (_item$affiliation$gro = _item$affiliation.group) === null || _item$affiliation$gro === void 0 ? void 0 : _item$affiliation$gro.name) ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(TeamOutlined, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 29\n                    }, this), ' ', /*#__PURE__*/_jsxDEV(Link, {\n                      className: \"affiliation--link\",\n                      to: `/app/groups?id=${(_item$affiliation2 = item.affiliation) === null || _item$affiliation2 === void 0 ? void 0 : (_item$affiliation2$gr = _item$affiliation2.group) === null || _item$affiliation2$gr === void 0 ? void 0 : _item$affiliation2$gr.id}`,\n                      onClick: () => {\n                        var _item$affiliation3, _item$affiliation3$gr;\n\n                        return core.setURL(`/app/groups?id=${(_item$affiliation3 = item.affiliation) === null || _item$affiliation3 === void 0 ? void 0 : (_item$affiliation3$gr = _item$affiliation3.group) === null || _item$affiliation3$gr === void 0 ? void 0 : _item$affiliation3$gr.id}`);\n                      },\n                      children: (_item$affiliation4 = item.affiliation) === null || _item$affiliation4 === void 0 ? void 0 : (_item$affiliation4$gr = _item$affiliation4.group) === null || _item$affiliation4$gr === void 0 ? void 0 : _item$affiliation4$gr.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 27\n                  }, this) : '', ((_item$affiliation5 = item.affiliation) === null || _item$affiliation5 === void 0 ? void 0 : (_item$affiliation5$in = _item$affiliation5.institution) === null || _item$affiliation5$in === void 0 ? void 0 : _item$affiliation5$in.name) && /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(BankOutlined, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 191,\n                      columnNumber: 29\n                    }, this), ' ', /*#__PURE__*/_jsxDEV(Link, {\n                      className: \"affiliation--link\",\n                      to: `/app/institutions?id=${(_item$affiliation6 = item.affiliation) === null || _item$affiliation6 === void 0 ? void 0 : (_item$affiliation6$in = _item$affiliation6.institution) === null || _item$affiliation6$in === void 0 ? void 0 : _item$affiliation6$in.id}`,\n                      onClick: () => {\n                        var _item$affiliation7, _item$affiliation7$in;\n\n                        return core.setURL(`/app/institutions?id=${(_item$affiliation7 = item.affiliation) === null || _item$affiliation7 === void 0 ? void 0 : (_item$affiliation7$in = _item$affiliation7.institution) === null || _item$affiliation7$in === void 0 ? void 0 : _item$affiliation7$in.id}`);\n                      },\n                      children: (_item$affiliation8 = item.affiliation) === null || _item$affiliation8 === void 0 ? void 0 : (_item$affiliation8$in = _item$affiliation8.institution) === null || _item$affiliation8$in === void 0 ? void 0 : _item$affiliation8$in.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 192,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true) : ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SearchResult, \"l0sU3/a07UFxiJBZUDlcT7+dNJQ=\", false, function () {\n  return [useLocation];\n});\n\n_c = SearchResult;\nexport default SearchResult;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchResult\");","map":{"version":3,"sources":["/home/manolo/sds-ui/src/components/modules/SearchResult.jsx"],"names":["React","useState","useEffect","ErrorWarning","LoadingCard","ProductionResult","SortSearchResults","Avatar","Card","Col","List","Row","Space","BankOutlined","TeamOutlined","CalendarOutlined","CitationsIcon","APIRequest","titles","Link","useLocation","queryString","require","SearchResult","core","location","parsed","parse","URL","type","pagination","setPagination","max","page","sort","setSort","state","setUrl","pathname","search","tools","document","title","setFilters","data","filters","onPageChange","pageSize","window","scrollTo","isError","isLoading","backgroundColor","color","padding","total_results","size","position","total","onChange","hideOnSinglePage","current","item","fontSize","createElement","papers_count","products_count","citations_count","logo","xs","sm","md","lg","xl","xxl","name","charAt","id","setURL","affiliation","group","institution"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\n//import { useHistory } from \"react-router\";\n\n/* Components */\nimport ErrorWarning from '../ErrorWarning';\nimport LoadingCard from '../LoadingCard';\nimport ProductionResult from '../ProductionResult';\nimport SortSearchResults from '../SortSearchResults';\n\n/* UI Library Components */\nimport { Avatar, Card, Col, List, Row, Space } from 'antd';\n\n/* Icons */\nimport {\n  BankOutlined,\n  TeamOutlined,\n  CalendarOutlined,\n} from '@ant-design/icons';\nimport { CitationsIcon } from '../../media/icons/citations';\n\n/* Utilities */\nimport { APIRequest } from '../../apis/api';\nimport { titles } from '../../utils/texts';\nimport { Link } from 'react-router-dom';\nimport { useLocation } from 'react-router';\nconst queryString = require('query-string');\n\nconst SearchResult = ({ core }) => {\n  const location = useLocation();\n  const parsed = queryString.parse(core.URL);\n  const type = parsed['/app/search?data'];\n  const [pagination, setPagination] = useState({ max: 10, page: 1 });\n  const [sort, setSort] = useState('citations');\n  const [state, setUrl] = APIRequest(\n    `${location.pathname}${location.search}&max=${pagination.max}&page=${pagination.page}&sort=${sort}`\n  );\n  const tools = { sort, setSort };\n\n  useEffect(() => {\n    document.title = 'Resultados de Búsqueda | SALUDATA';\n  }, []);\n\n  useEffect(() => {\n    setPagination({ max: 10, page: 1 });\n    setSort('citations');\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [core.URL]);\n\n  useEffect(() => {\n    core.setFilters(state.data.filters);\n    return () => {\n      core.setFilters(null);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state]);\n\n  useEffect(() => {\n    setPagination({ max: 10, page: 1 });\n  }, [sort]);\n\n  useEffect(() => {\n    setUrl(\n      `${location.pathname}${location.search}&max=${pagination.max}&page=${pagination.page}&sort=${sort}`\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pagination]);\n\n  const onPageChange = ({ page, pageSize }) => {\n    setPagination({ page: page, max: pageSize });\n    window.scrollTo(0, 0);\n  };\n\n  if (state.isError) {\n    return <ErrorWarning />;\n  } else if (state.isLoading) {\n    return <LoadingCard />;\n  }\n  return type === 'literature' ? (\n    <ProductionResult data={state.data} core={core} />\n  ) : (\n    <Row align=\"center\">\n      <Col span={24}>\n        <Card\n          headStyle={{ backgroundColor: '#003e65', color: 'white' }}\n          size=\"small\"\n          bodyStyle={{ padding: '10px' }}\n          title={titles[parsed['/app/search?data']]}\n          extra={\n            <div>\n              <p className=\"white-text\">\n                {state.data.total_results}{' '}\n                {state.data.total_results === 1 ? 'resultado' : 'resultados'}\n              </p>\n              <SortSearchResults tools={tools} key=\"1\" />\n            </div>\n          }\n        >\n          <List\n            itemLayout=\"vertical\"\n            size=\"large\"\n            dataSource={state.data.data}\n            pagination={{\n              size: 'small',\n              position: 'bottom',\n              total: state.data.total_results,\n              onChange: (page, pageSize) =>\n                onPageChange({\n                  page,\n                  pageSize,\n                }),\n              hideOnSinglePage: true,\n              current: pagination.page,\n              pageSize: pagination.max,\n            }}\n            renderItem={(item) => (\n              <List.Item\n                actions={[\n                  <Space style={{ fontSize: 18 }}>\n                    {React.createElement(CalendarOutlined)}\n                    Publicaciones: {item.papers_count || item.products_count}\n                  </Space>,\n                  <Space style={{ fontSize: 18 }}>\n                    {React.createElement(CitationsIcon)}\n                    Citado: {item.citations_count}\n                  </Space>,\n                ]}\n              >\n                <List.Item.Meta\n                  avatar={\n                    type === 'institutions' ? (\n                      item.logo ? (\n                        <Avatar size={48} src={item.logo} />\n                      ) : (\n                        <Avatar className=\"avatar\" size={48} src={item.logo}>\n                          U\n                        </Avatar>\n                      )\n                    ) : (\n                      <Avatar\n                        className=\"avatar\"\n                        size={{\n                          xs: 40,\n                          sm: 50,\n                          md: 60,\n                          lg: 60,\n                          xl: 60,\n                          xxl: 60,\n                        }}\n                      >\n                        {item.name.charAt(0)}\n                      </Avatar>\n                    )\n                  }\n                  title={\n                    <Link\n                      className=\"searchResult--link\"\n                      to={`/app/${parsed['/app/search?data']}?id=${item.id}`}\n                      onClick={() =>\n                        core.setURL(\n                          `/app/${parsed['/app/search?data']}?id=${item.id}`\n                        )\n                      }\n                    >\n                      {item.name}\n                    </Link>\n                  }\n                  description={\n                    type !== 'institutions' ? (\n                      <>\n                        {type === 'authors' && item.affiliation?.group?.name ? (\n                          <div>\n                            <TeamOutlined />{' '}\n                            <Link\n                              className=\"affiliation--link\"\n                              to={`/app/groups?id=${item.affiliation?.group?.id}`}\n                              onClick={() =>\n                                core.setURL(\n                                  `/app/groups?id=${item.affiliation?.group?.id}`\n                                )\n                              }\n                            >\n                              {item.affiliation?.group?.name}\n                            </Link>\n                          </div>\n                        ) : (\n                          ''\n                        )}\n                        {item.affiliation?.institution?.name && (\n                          <div>\n                            <BankOutlined />{' '}\n                            <Link\n                              className=\"affiliation--link\"\n                              to={`/app/institutions?id=${item.affiliation?.institution?.id}`}\n                              onClick={() =>\n                                core.setURL(\n                                  `/app/institutions?id=${item.affiliation?.institution?.id}`\n                                )\n                              }\n                            >\n                              {item.affiliation?.institution?.name}\n                            </Link>\n                          </div>\n                        )}\n                      </>\n                    ) : (\n                      ''\n                    )\n                  }\n                />\n              </List.Item>\n            )}\n          />\n        </Card>\n      </Col>\n    </Row>\n  );\n};\n\nexport default SearchResult;\n"]},"metadata":{},"sourceType":"module"}