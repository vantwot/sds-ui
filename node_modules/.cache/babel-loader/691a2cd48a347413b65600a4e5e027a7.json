{"ast":null,"code":"import _initializerDefineProperty from \"@babel/runtime/helpers/initializerDefineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/initializerWarningHelper\";\n\nvar _dec, _dec2, _dec3, _class, _class2, _descriptor, _descriptor2;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { TYPES } from '@antv/l7-core';\nimport { inject, injectable } from 'inversify';\nimport 'reflect-metadata';\nvar LayerAnimateStylePlugin = (_dec = injectable(), _dec2 = inject(TYPES.ICameraService), _dec3 = inject(TYPES.IRendererService), _dec(_class = (_class2 = function () {\n  function LayerAnimateStylePlugin() {\n    _classCallCheck(this, LayerAnimateStylePlugin);\n\n    _initializerDefineProperty(this, \"cameraService\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"rendererService\", _descriptor2, this);\n  }\n\n  _createClass(LayerAnimateStylePlugin, [{\n    key: \"apply\",\n    value: function apply(layer) {\n      layer.hooks.beforeRender.tap('LayerAnimateStylePlugin', function () {\n        layer.models.forEach(function (model) {\n          model.addUniforms(_objectSpread({}, layer.layerModel.getAnimateUniforms()));\n        });\n      });\n    }\n  }]);\n\n  return LayerAnimateStylePlugin;\n}(), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"cameraService\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"rendererService\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class2)) || _class);\nexport { LayerAnimateStylePlugin as default };","map":{"version":3,"sources":["../../src/plugins/LayerAnimateStylePlugin.ts"],"names":["injectable","LayerAnimateStylePlugin","inject","TYPES","layer","model"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAA,KAAA,QAAA,eAAA;AAWA,SAAA,MAAA,EAAA,UAAA,QAAA,WAAA;AACA,OAAA,kBAAA;IAGqBC,uB,WADpBD,UAAU,E,UAERE,MAAM,CAACC,KAAK,CAAN,cAAA,C,UAGND,MAAM,CAACC,KAAK,CAAN,gBAAA,C;;;;;;;;;;;WAGP,SAAA,KAAA,CAAA,KAAA,EAA4B;AAI1BC,MAAAA,KAAK,CAALA,KAAAA,CAAAA,YAAAA,CAAAA,GAAAA,CAAAA,yBAAAA,EAAwD,YAAM;AAE5DA,QAAAA,KAAK,CAALA,MAAAA,CAAAA,OAAAA,CAAqB,UAAA,KAAA,EAAmB;AACtCC,UAAAA,KAAK,CAALA,WAAAA,CAAAA,aAAAA,CAAAA,EAAAA,EACKD,KAAK,CAALA,UAAAA,CADLC,kBACKD,EADLC,CAAAA;AADFD,SAAAA;AAFFA,OAAAA;AAQD;;;;;;;;;;;;;;;SAnBkBH,uB","sourcesContent":["import {\n  CameraUniform,\n  CoordinateUniform,\n  ICameraService,\n  ICoordinateSystemService,\n  ILayer,\n  ILayerPlugin,\n  IModel,\n  IRendererService,\n  TYPES,\n} from '@antv/l7-core';\nimport { inject, injectable } from 'inversify';\nimport 'reflect-metadata';\n\n@injectable()\nexport default class LayerAnimateStylePlugin implements ILayerPlugin {\n  @inject(TYPES.ICameraService)\n  private readonly cameraService: ICameraService;\n\n  @inject(TYPES.IRendererService)\n  private readonly rendererService: IRendererService;\n\n  public apply(layer: ILayer) {\n    // layer.hooks.beforeRender.tap('LayerAnimateStylePlugin', () => {\n\n    // })\n    layer.hooks.beforeRender.tap('LayerAnimateStylePlugin', () => {\n      // 重新计算坐标系参数\n      layer.models.forEach((model: IModel) => {\n        model.addUniforms({\n          ...layer.layerModel.getAnimateUniforms(),\n        });\n      });\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}