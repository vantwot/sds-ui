{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport { TYPES } from '@antv/l7-core';\nimport { anchorTranslate, anchorType, applyAnchorClass, bindAll, DOM } from '@antv/l7-utils';\nimport { EventEmitter } from 'eventemitter3';\n\nvar Marker = function (_EventEmitter) {\n  _inherits(Marker, _EventEmitter);\n\n  var _super = _createSuper(Marker);\n\n  function Marker(option) {\n    var _this;\n\n    _classCallCheck(this, Marker);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"markerOption\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"defaultMarker\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"popup\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mapsService\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"sceneSerive\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"lngLat\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"scene\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"added\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"eventHandle\", function (e) {\n      _this.emit(e.type, {\n        target: e,\n        data: _this.markerOption.extData,\n        lngLat: _this.lngLat\n      });\n    });\n\n    _this.markerOption = _objectSpread(_objectSpread({}, _this.getDefault()), option);\n    bindAll(['update', 'onMove', 'onUp', 'addDragHandler', 'onMapClick'], _assertThisInitialized(_this));\n\n    _this.init();\n\n    return _this;\n  }\n\n  _createClass(Marker, [{\n    key: \"getDefault\",\n    value: function getDefault() {\n      return {\n        element: undefined,\n        anchor: anchorType.BOTTOM,\n        offsets: [0, 0],\n        color: '#5B8FF9',\n        draggable: false\n      };\n    }\n  }, {\n    key: \"addTo\",\n    value: function addTo(scene) {\n      this.scene = scene;\n      this.mapsService = scene.get(TYPES.IMapService);\n      this.sceneSerive = scene.get(TYPES.ISceneService);\n      var _this$markerOption = this.markerOption,\n          element = _this$markerOption.element,\n          draggable = _this$markerOption.draggable;\n      this.mapsService.getMarkerContainer().appendChild(element);\n      this.registerMarkerEvent(element);\n      this.mapsService.on('camerachange', this.update);\n      this.mapsService.on('viewchange', this.update);\n      this.update();\n      this.added = true;\n      this.emit('added');\n      return this;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      if (this.mapsService) {\n        this.mapsService.off('click', this.onMapClick);\n        this.mapsService.off('move', this.update);\n        this.mapsService.off('moveend', this.update);\n        this.mapsService.off('mousedown', this.addDragHandler);\n        this.mapsService.off('touchstart', this.addDragHandler);\n        this.mapsService.off('mouseup', this.onUp);\n        this.mapsService.off('touchend', this.onUp);\n      }\n\n      this.unRegisterMarkerEvent();\n      this.removeAllListeners();\n      var element = this.markerOption.element;\n\n      if (element) {\n        DOM.remove(element);\n      }\n\n      if (this.popup) {\n        this.popup.remove();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setLnglat\",\n    value: function setLnglat(lngLat) {\n      this.lngLat = lngLat;\n\n      if (Array.isArray(lngLat)) {\n        this.lngLat = {\n          lng: lngLat[0],\n          lat: lngLat[1]\n        };\n      }\n\n      if (this.popup) {\n        this.popup.setLnglat(this.lngLat);\n      }\n\n      this.update();\n      return this;\n    }\n  }, {\n    key: \"getLnglat\",\n    value: function getLnglat() {\n      return this.lngLat;\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement() {\n      return this.markerOption.element;\n    }\n  }, {\n    key: \"setElement\",\n    value: function setElement(el) {\n      var _this2 = this;\n\n      if (!this.added) {\n        this.once('added', function () {\n          _this2.setElement(el);\n        });\n        return this;\n      }\n\n      var element = this.markerOption.element;\n\n      if (element) {\n        DOM.remove(element);\n      }\n\n      this.markerOption.element = el;\n      this.init();\n      this.mapsService.getMarkerContainer().appendChild(el);\n      this.registerMarkerEvent(el);\n      this.update();\n      return this;\n    }\n  }, {\n    key: \"openPopup\",\n    value: function openPopup() {\n      var _this3 = this;\n\n      if (!this.added) {\n        this.once('added', function () {\n          _this3.openPopup();\n        });\n        return this;\n      }\n\n      var popup = this.popup;\n\n      if (!popup) {\n        return this;\n      }\n\n      if (!popup.isOpen()) {\n        popup.addTo(this.scene);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"closePopup\",\n    value: function closePopup() {\n      var _this4 = this;\n\n      if (!this.added) {\n        this.once('added', function () {\n          _this4.closePopup();\n        });\n      }\n\n      var popup = this.popup;\n\n      if (popup) {\n        popup.remove();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setPopup\",\n    value: function setPopup(popup) {\n      this.popup = popup;\n\n      if (this.lngLat) {\n        this.popup.setLnglat(this.lngLat);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"togglePopup\",\n    value: function togglePopup() {\n      var popup = this.popup;\n\n      if (!popup) {\n        return this;\n      } else if (popup.isOpen()) {\n        popup.remove();\n      } else {\n        popup.addTo(this.scene);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getPopup\",\n    value: function getPopup() {\n      return this.popup;\n    }\n  }, {\n    key: \"getOffset\",\n    value: function getOffset() {\n      return this.markerOption.offsets;\n    }\n  }, {\n    key: \"setDraggable\",\n    value: function setDraggable(draggable) {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"isDraggable\",\n    value: function isDraggable() {\n      return this.markerOption.draggable;\n    }\n  }, {\n    key: \"getExtData\",\n    value: function getExtData() {\n      return this.markerOption.extData;\n    }\n  }, {\n    key: \"setExtData\",\n    value: function setExtData(data) {\n      this.markerOption.extData = data;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      if (!this.mapsService) {\n        return;\n      }\n\n      var _this$markerOption2 = this.markerOption,\n          element = _this$markerOption2.element,\n          anchor = _this$markerOption2.anchor;\n      this.updatePosition();\n      DOM.setTransform(element, \"\".concat(anchorTranslate[anchor]));\n    }\n  }, {\n    key: \"onMapClick\",\n    value: function onMapClick(e) {\n      var element = this.markerOption.element;\n\n      if (this.popup && element) {\n        this.togglePopup();\n      }\n    }\n  }, {\n    key: \"updatePosition\",\n    value: function updatePosition() {\n      if (!this.mapsService) {\n        return;\n      }\n\n      var _this$markerOption3 = this.markerOption,\n          element = _this$markerOption3.element,\n          offsets = _this$markerOption3.offsets;\n      var _this$lngLat = this.lngLat,\n          lng = _this$lngLat.lng,\n          lat = _this$lngLat.lat;\n      var bounds = this.mapsService.getBounds();\n      var pos = this.mapsService.lngLatToContainer([lng, lat]);\n\n      if (element) {\n        element.style.display = 'block';\n        var container = this.mapsService.getContainer();\n        var containerWidth = 0;\n        var containerHeight = 0;\n\n        if (container) {\n          containerWidth = container.scrollWidth;\n          containerHeight = container.scrollHeight;\n        }\n\n        if (Math.abs(bounds[0][0]) > 180 || Math.abs(bounds[1][0]) > 180) {\n          if (pos.x > containerWidth) {\n            var newPos = this.mapsService.lngLatToContainer([lng - 360, lat]);\n            pos.x = newPos.x;\n          }\n\n          if (pos.x < 0) {\n            var _newPos = this.mapsService.lngLatToContainer([lng + 360, lat]);\n\n            pos.x = _newPos.x;\n          }\n        }\n\n        if (pos.x > containerWidth || pos.x < 0 || pos.y > containerHeight || pos.y < 0) {\n          element.style.display = 'none';\n        }\n\n        element.style.left = pos.x + offsets[0] + 'px';\n        element.style.top = pos.y - offsets[1] + 'px';\n      }\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this5 = this;\n\n      var element = this.markerOption.element;\n      var _this$markerOption4 = this.markerOption,\n          color = _this$markerOption4.color,\n          anchor = _this$markerOption4.anchor;\n\n      if (!element) {\n        this.defaultMarker = true;\n        element = DOM.create('div');\n        this.markerOption.element = element;\n        var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        svg.setAttributeNS(null, 'display', 'block');\n        svg.setAttributeNS(null, 'height', '48px');\n        svg.setAttributeNS(null, 'width', '48px');\n        svg.setAttributeNS(null, 'viewBox', '0 0 1024 1024');\n        var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        path.setAttributeNS(null, 'd', 'M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z');\n        path.setAttributeNS(null, 'fill', color);\n        svg.appendChild(path);\n        element.appendChild(svg);\n      }\n\n      DOM.addClass(element, 'l7-marker');\n      Object.keys(this.markerOption.style || {}).forEach(function (key) {\n        var _this5$markerOption, _this5$markerOption2;\n\n        var value = ((_this5$markerOption = _this5.markerOption) === null || _this5$markerOption === void 0 ? void 0 : _this5$markerOption.style) && ((_this5$markerOption2 = _this5.markerOption) === null || _this5$markerOption2 === void 0 ? void 0 : _this5$markerOption2.style[key]);\n\n        if (element) {\n          element.style[key] = value;\n        }\n      });\n      element.addEventListener('click', function (e) {\n        _this5.onMapClick(e);\n      });\n      element.addEventListener('click', this.eventHandle);\n      applyAnchorClass(element, anchor, 'marker');\n    }\n  }, {\n    key: \"registerMarkerEvent\",\n    value: function registerMarkerEvent(element) {\n      element.addEventListener('mousemove', this.eventHandle);\n      element.addEventListener('click', this.eventHandle);\n      element.addEventListener('mousedown', this.eventHandle);\n      element.addEventListener('mouseup', this.eventHandle);\n      element.addEventListener('dblclick', this.eventHandle);\n      element.addEventListener('contextmenu', this.eventHandle);\n      element.addEventListener('mouseover', this.eventHandle);\n      element.addEventListener('mouseout', this.eventHandle);\n    }\n  }, {\n    key: \"unRegisterMarkerEvent\",\n    value: function unRegisterMarkerEvent() {\n      var element = this.getElement();\n      element.removeEventListener('mousemove', this.eventHandle);\n      element.removeEventListener('click', this.eventHandle);\n      element.removeEventListener('mousedown', this.eventHandle);\n      element.removeEventListener('mouseup', this.eventHandle);\n      element.removeEventListener('dblclick', this.eventHandle);\n      element.removeEventListener('contextmenu', this.eventHandle);\n      element.removeEventListener('mouseover', this.eventHandle);\n      element.removeEventListener('mouseout', this.eventHandle);\n    }\n  }, {\n    key: \"addDragHandler\",\n    value: function addDragHandler(e) {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"onUp\",\n    value: function onUp(e) {\n      throw new Error('Method not implemented.');\n    }\n  }]);\n\n  return Marker;\n}(EventEmitter);\n\nexport { Marker as default };","map":{"version":3,"sources":["../src/marker.ts"],"names":["Marker","EventEmitter","bindAll","element","anchor","anchorType","offsets","color","draggable","scene","TYPES","DOM","Array","lng","lngLat","lat","popup","anchorTranslate","bounds","pos","container","containerWidth","containerHeight","Math","newPos","svg","document","path","Object","value","applyAnchorClass","e","target","data"],"mappings":"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","sourcesContent":["import {\n  ILngLat,\n  IMapService,\n  IMarkerOption,\n  IPoint,\n  IPopup,\n  ISceneService,\n  TYPES,\n} from '@antv/l7-core';\nimport {\n  anchorTranslate,\n  anchorType,\n  applyAnchorClass,\n  bindAll,\n  DOM,\n} from '@antv/l7-utils';\nimport { EventEmitter } from 'eventemitter3';\nimport { Container } from 'inversify';\n\n//  marker 支持 dragger 未完成\nexport default class Marker extends EventEmitter {\n  private markerOption: IMarkerOption;\n  private defaultMarker: boolean;\n  private popup: IPopup;\n  private mapsService: IMapService<unknown>;\n  private sceneSerive: ISceneService;\n  private lngLat: ILngLat;\n  private scene: Container;\n  private added: boolean = false;\n  constructor(option?: Partial<IMarkerOption>) {\n    super();\n    this.markerOption = {\n      ...this.getDefault(),\n      ...option,\n    };\n    bindAll(['update', 'onMove', 'onUp', 'addDragHandler', 'onMapClick'], this);\n    this.init();\n  }\n\n  public getDefault() {\n    return {\n      element: undefined, // DOM element\n      anchor: anchorType.BOTTOM,\n      offsets: [0, 0],\n      color: '#5B8FF9',\n      draggable: false,\n    };\n  }\n\n  public addTo(scene: Container) {\n    // this.remove();\n    this.scene = scene;\n    this.mapsService = scene.get<IMapService>(TYPES.IMapService);\n    this.sceneSerive = scene.get<ISceneService>(TYPES.ISceneService);\n    const { element, draggable } = this.markerOption;\n    // this.sceneSerive.getSceneContainer().appendChild(element as HTMLElement);\n    this.mapsService.getMarkerContainer().appendChild(element as HTMLElement);\n    this.registerMarkerEvent(element as HTMLElement);\n    this.mapsService.on('camerachange', this.update); // 注册高德1.x 的地图事件监听\n    this.mapsService.on('viewchange', this.update); // 注册高德2.0 的地图事件监听\n    this.update();\n    this.added = true;\n    this.emit('added');\n    return this;\n  }\n\n  public remove() {\n    if (this.mapsService) {\n      this.mapsService.off('click', this.onMapClick);\n      this.mapsService.off('move', this.update);\n      this.mapsService.off('moveend', this.update);\n      this.mapsService.off('mousedown', this.addDragHandler);\n      this.mapsService.off('touchstart', this.addDragHandler);\n      this.mapsService.off('mouseup', this.onUp);\n      this.mapsService.off('touchend', this.onUp);\n    }\n    this.unRegisterMarkerEvent();\n    this.removeAllListeners();\n    const { element } = this.markerOption;\n    if (element) {\n      DOM.remove(element);\n    }\n    if (this.popup) {\n      this.popup.remove();\n    }\n    return this;\n  }\n\n  public setLnglat(lngLat: ILngLat | IPoint) {\n    this.lngLat = lngLat as ILngLat;\n    if (Array.isArray(lngLat)) {\n      this.lngLat = {\n        lng: lngLat[0],\n        lat: lngLat[1],\n      };\n    }\n\n    if (this.popup) {\n      this.popup.setLnglat(this.lngLat);\n    }\n    this.update();\n    return this;\n  }\n\n  public getLnglat(): ILngLat {\n    return this.lngLat;\n  }\n\n  public getElement(): HTMLElement {\n    return this.markerOption.element as HTMLElement;\n  }\n\n  public setElement(el: HTMLElement): this {\n    if (!this.added) {\n      this.once('added', () => {\n        this.setElement(el);\n      });\n      return this;\n    }\n    const { element } = this.markerOption;\n    if (element) {\n      DOM.remove(element);\n    }\n    this.markerOption.element = el;\n    this.init();\n    this.mapsService.getMarkerContainer().appendChild(el as HTMLElement);\n    this.registerMarkerEvent(el as HTMLElement);\n    this.update();\n    return this;\n  }\n\n  public openPopup(): this {\n    if (!this.added) {\n      this.once('added', () => {\n        this.openPopup();\n      });\n      return this;\n    }\n    const popup = this.popup;\n    if (!popup) {\n      return this;\n    }\n    if (!popup.isOpen()) {\n      popup.addTo(this.scene);\n    }\n    return this;\n  }\n\n  public closePopup(): this {\n    if (!this.added) {\n      this.once('added', () => {\n        this.closePopup();\n      });\n    }\n    const popup = this.popup;\n    if (popup) {\n      popup.remove();\n    }\n    return this;\n  }\n\n  public setPopup(popup: IPopup) {\n    this.popup = popup;\n    if (this.lngLat) {\n      this.popup.setLnglat(this.lngLat);\n    }\n    return this;\n  }\n\n  public togglePopup() {\n    const popup = this.popup;\n    if (!popup) {\n      return this;\n    } else if (popup.isOpen()) {\n      popup.remove();\n    } else {\n      popup.addTo(this.scene);\n    }\n    return this;\n  }\n\n  public getPopup() {\n    return this.popup;\n  }\n\n  public getOffset(): number[] {\n    return this.markerOption.offsets;\n  }\n\n  public setDraggable(draggable: boolean) {\n    throw new Error('Method not implemented.');\n  }\n\n  public isDraggable() {\n    return this.markerOption.draggable;\n  }\n\n  public getExtData() {\n    return this.markerOption.extData;\n  }\n\n  public setExtData(data: any) {\n    this.markerOption.extData = data;\n  }\n\n  private update() {\n    if (!this.mapsService) {\n      return;\n    }\n    const { element, anchor } = this.markerOption;\n    this.updatePosition();\n    DOM.setTransform(element as HTMLElement, `${anchorTranslate[anchor]}`);\n  }\n\n  private onMapClick(e: MouseEvent) {\n    const { element } = this.markerOption;\n    if (this.popup && element) {\n      this.togglePopup();\n    }\n  }\n\n  private updatePosition() {\n    if (!this.mapsService) {\n      return;\n    }\n    const { element, offsets } = this.markerOption;\n    const { lng, lat } = this.lngLat;\n    const bounds = this.mapsService.getBounds();\n    const pos = this.mapsService.lngLatToContainer([lng, lat]);\n\n    if (element) {\n      element.style.display = 'block';\n      const container = this.mapsService.getContainer();\n      let containerWidth = 0;\n      let containerHeight = 0;\n      if (container) {\n        containerWidth = container.scrollWidth;\n        containerHeight = container.scrollHeight;\n      }\n      // 当前可视区域包含跨日界线\n      if (Math.abs(bounds[0][0]) > 180 || Math.abs(bounds[1][0]) > 180) {\n        if (pos.x > containerWidth) {\n          // 日界线右侧点左移\n          const newPos = this.mapsService.lngLatToContainer([lng - 360, lat]);\n          pos.x = newPos.x;\n        }\n        if (pos.x < 0) {\n          // 日界线左侧点右移\n          const newPos = this.mapsService.lngLatToContainer([lng + 360, lat]);\n          pos.x = newPos.x;\n        }\n      }\n      // 不在当前可视区域内隐藏点\n      if (\n        pos.x > containerWidth ||\n        pos.x < 0 ||\n        pos.y > containerHeight ||\n        pos.y < 0\n      ) {\n        element.style.display = 'none';\n      }\n      element.style.left = pos.x + offsets[0] + 'px';\n      element.style.top = pos.y - offsets[1] + 'px';\n    }\n  }\n\n  private init() {\n    let { element } = this.markerOption;\n    const { color, anchor } = this.markerOption;\n    if (!element) {\n      this.defaultMarker = true;\n      element = DOM.create('div') as HTMLDivElement;\n      this.markerOption.element = element;\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.setAttributeNS(null, 'display', 'block');\n      svg.setAttributeNS(null, 'height', '48px');\n      svg.setAttributeNS(null, 'width', '48px');\n      svg.setAttributeNS(null, 'viewBox', '0 0 1024 1024');\n\n      const path = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'path',\n      );\n      path.setAttributeNS(\n        null,\n        'd',\n        'M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z',\n      );\n      path.setAttributeNS(null, 'fill', color);\n      svg.appendChild(path);\n      element.appendChild(svg);\n    }\n    DOM.addClass(element, 'l7-marker');\n    Object.keys(this.markerOption.style || {}).forEach(\n      // @ts-ignore\n      (key: keyof CSSStyleDeclaration) => {\n        const value =\n          this.markerOption?.style && (this.markerOption?.style[key] as string);\n        if (element) {\n          // @ts-ignore\n          (element.style as CSSStyleDeclaration)[key] = value;\n        }\n      },\n    );\n\n    element.addEventListener('click', (e: MouseEvent) => {\n      this.onMapClick(e);\n    });\n    element.addEventListener('click', this.eventHandle);\n    applyAnchorClass(element, anchor, 'marker');\n  }\n  private registerMarkerEvent(element: HTMLElement) {\n    element.addEventListener('mousemove', this.eventHandle);\n    element.addEventListener('click', this.eventHandle);\n    element.addEventListener('mousedown', this.eventHandle);\n    element.addEventListener('mouseup', this.eventHandle);\n    element.addEventListener('dblclick', this.eventHandle);\n    element.addEventListener('contextmenu', this.eventHandle);\n    element.addEventListener('mouseover', this.eventHandle);\n    element.addEventListener('mouseout', this.eventHandle);\n  }\n  private unRegisterMarkerEvent() {\n    const element = this.getElement();\n    element.removeEventListener('mousemove', this.eventHandle);\n    element.removeEventListener('click', this.eventHandle);\n    element.removeEventListener('mousedown', this.eventHandle);\n    element.removeEventListener('mouseup', this.eventHandle);\n    element.removeEventListener('dblclick', this.eventHandle);\n    element.removeEventListener('contextmenu', this.eventHandle);\n    element.removeEventListener('mouseover', this.eventHandle);\n    element.removeEventListener('mouseout', this.eventHandle);\n  }\n\n  private eventHandle = (e: MouseEvent) => {\n    this.emit(e.type, {\n      target: e,\n      data: this.markerOption.extData,\n      lngLat: this.lngLat,\n    });\n  };\n  private addDragHandler(e: MouseEvent) {\n    throw new Error('Method not implemented.');\n  }\n\n  private onUp(e: MouseEvent) {\n    throw new Error('Method not implemented.');\n  }\n}\n"]},"metadata":{},"sourceType":"module"}