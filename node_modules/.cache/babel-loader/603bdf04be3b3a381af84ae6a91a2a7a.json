{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { ObjectExt } from '../../util';\nimport { Base } from '../base';\nexport function getMarkup(tagName) {\n  let noText = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return `<g class=\"rotatable\"><g class=\"scalable\"><${tagName}/></g>${noText ? '' : '<text/>'}</g>`;\n}\nexport function getName(name) {\n  return `basic.${name}`;\n}\nexport function getImageUrlHook() {\n  let attrName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'xlink:href';\n\n  const hook = metadata => {\n    const {\n      imageUrl,\n      imageWidth,\n      imageHeight\n    } = metadata,\n          others = __rest(metadata, [\"imageUrl\", \"imageWidth\", \"imageHeight\"]);\n\n    if (imageUrl != null || imageWidth != null || imageHeight != null) {\n      const apply = () => {\n        if (others.attrs) {\n          const image = others.attrs.image;\n\n          if (imageUrl != null) {\n            image[attrName] = imageUrl;\n          }\n\n          if (imageWidth != null) {\n            image.width = imageWidth;\n          }\n\n          if (imageHeight != null) {\n            image.height = imageHeight;\n          }\n\n          others.attrs.image = image;\n        }\n      };\n\n      if (others.attrs) {\n        if (others.attrs.image == null) {\n          others.attrs.image = {};\n        }\n\n        apply();\n      } else {\n        others.attrs = {\n          image: {}\n        };\n        apply();\n      }\n    }\n\n    return others;\n  };\n\n  return hook;\n}\nexport function createShape(shape, config) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const name = getName(shape);\n  const defaults = {\n    constructorName: name,\n    attrs: {\n      '.': {\n        fill: '#ffffff',\n        stroke: 'none'\n      },\n      [shape]: {\n        fill: '#ffffff',\n        stroke: '#000000'\n      }\n    }\n  };\n\n  if (!options.ignoreMarkup) {\n    defaults.markup = getMarkup(shape, options.noText === true);\n  }\n\n  const base = options.parent || Base;\n  return base.define(ObjectExt.merge(defaults, config, {\n    shape: name\n  }));\n}","map":{"version":3,"sources":["../../../src/shape/basic/util.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,SAAS,SAAT,QAA0B,YAA1B;AAGA,SAAS,IAAT,QAAqB,SAArB;AAEA,OAAM,SAAU,SAAV,CAAoB,OAApB,EAAmD;AAAA,MAAd,MAAc,uEAAL,KAAK;AACvD,SAAO,6CAA6C,OAAO,SACzD,MAAM,GAAG,EAAH,GAAQ,SAChB,MAFA;AAGD;AAED,OAAM,SAAU,OAAV,CAAkB,IAAlB,EAA8B;AAClC,SAAO,SAAS,IAAI,EAApB;AACD;AAED,OAAM,SAAU,eAAV,GAAiD;AAAA,MAAvB,QAAuB,uEAAZ,YAAY;;AACrD,QAAM,IAAI,GAAmB,QAAD,IAAa;AACvC,UAAM;AAAE,MAAA,QAAF;AAAY,MAAA,UAAZ;AAAwB,MAAA;AAAxB,QAAmD,QAAzD;AAAA,UAA8C,MAAM,GAAA,MAAA,CAAK,QAAL,EAA9C,CAAA,UAAA,EAAA,YAAA,EAAA,aAAA,CAA8C,CAApD;;AACA,QAAI,QAAQ,IAAI,IAAZ,IAAoB,UAAU,IAAI,IAAlC,IAA0C,WAAW,IAAI,IAA7D,EAAmE;AACjE,YAAM,KAAK,GAAG,MAAK;AACjB,YAAI,MAAM,CAAC,KAAX,EAAkB;AAChB,gBAAM,KAAK,GAAG,MAAM,CAAC,KAAP,CAAa,KAA3B;;AACA,cAAI,QAAQ,IAAI,IAAhB,EAAsB;AACpB,YAAA,KAAK,CAAC,QAAD,CAAL,GAAkB,QAAlB;AACD;;AACD,cAAI,UAAU,IAAI,IAAlB,EAAwB;AACtB,YAAA,KAAK,CAAC,KAAN,GAAc,UAAd;AACD;;AACD,cAAI,WAAW,IAAI,IAAnB,EAAyB;AACvB,YAAA,KAAK,CAAC,MAAN,GAAe,WAAf;AACD;;AACD,UAAA,MAAM,CAAC,KAAP,CAAa,KAAb,GAAqB,KAArB;AACD;AACF,OAdD;;AAgBA,UAAI,MAAM,CAAC,KAAX,EAAkB;AAChB,YAAI,MAAM,CAAC,KAAP,CAAa,KAAb,IAAsB,IAA1B,EAAgC;AAC9B,UAAA,MAAM,CAAC,KAAP,CAAa,KAAb,GAAqB,EAArB;AACD;;AACD,QAAA,KAAK;AACN,OALD,MAKO;AACL,QAAA,MAAM,CAAC,KAAP,GAAe;AACb,UAAA,KAAK,EAAE;AADM,SAAf;AAGA,QAAA,KAAK;AACN;AACF;;AAED,WAAO,MAAP;AACD,GAjCD;;AAmCA,SAAO,IAAP;AACD;AAED,OAAM,SAAU,WAAV,CACJ,KADI,EAEJ,MAFI,EAOE;AAAA,MAJN,OAIM,uEAAF,EAAE;AAEN,QAAM,IAAI,GAAG,OAAO,CAAC,KAAD,CAApB;AACA,QAAM,QAAQ,GAAgB;AAC5B,IAAA,eAAe,EAAE,IADW;AAE5B,IAAA,KAAK,EAAE;AACL,WAAK;AACH,QAAA,IAAI,EAAE,SADH;AAEH,QAAA,MAAM,EAAE;AAFL,OADA;AAKL,OAAC,KAAD,GAAS;AACP,QAAA,IAAI,EAAE,SADC;AAEP,QAAA,MAAM,EAAE;AAFD;AALJ;AAFqB,GAA9B;;AAcA,MAAI,CAAC,OAAO,CAAC,YAAb,EAA2B;AACzB,IAAA,QAAQ,CAAC,MAAT,GAAkB,SAAS,CAAC,KAAD,EAAQ,OAAO,CAAC,MAAR,KAAmB,IAA3B,CAA3B;AACD;;AAED,QAAM,IAAI,GAAG,OAAO,CAAC,MAAR,IAAkB,IAA/B;AACA,SAAO,IAAI,CAAC,MAAL,CACL,SAAS,CAAC,KAAV,CAAgB,QAAhB,EAA0B,MAA1B,EAAkC;AAAE,IAAA,KAAK,EAAE;AAAT,GAAlC,CADK,CAAP;AAGD","sourceRoot":"","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '../../util';\nimport { Base } from '../base';\nexport function getMarkup(tagName, noText = false) {\n    return `<g class=\"rotatable\"><g class=\"scalable\"><${tagName}/></g>${noText ? '' : '<text/>'}</g>`;\n}\nexport function getName(name) {\n    return `basic.${name}`;\n}\nexport function getImageUrlHook(attrName = 'xlink:href') {\n    const hook = (metadata) => {\n        const { imageUrl, imageWidth, imageHeight } = metadata, others = __rest(metadata, [\"imageUrl\", \"imageWidth\", \"imageHeight\"]);\n        if (imageUrl != null || imageWidth != null || imageHeight != null) {\n            const apply = () => {\n                if (others.attrs) {\n                    const image = others.attrs.image;\n                    if (imageUrl != null) {\n                        image[attrName] = imageUrl;\n                    }\n                    if (imageWidth != null) {\n                        image.width = imageWidth;\n                    }\n                    if (imageHeight != null) {\n                        image.height = imageHeight;\n                    }\n                    others.attrs.image = image;\n                }\n            };\n            if (others.attrs) {\n                if (others.attrs.image == null) {\n                    others.attrs.image = {};\n                }\n                apply();\n            }\n            else {\n                others.attrs = {\n                    image: {},\n                };\n                apply();\n            }\n        }\n        return others;\n    };\n    return hook;\n}\nexport function createShape(shape, config, options = {}) {\n    const name = getName(shape);\n    const defaults = {\n        constructorName: name,\n        attrs: {\n            '.': {\n                fill: '#ffffff',\n                stroke: 'none',\n            },\n            [shape]: {\n                fill: '#ffffff',\n                stroke: '#000000',\n            },\n        },\n    };\n    if (!options.ignoreMarkup) {\n        defaults.markup = getMarkup(shape, options.noText === true);\n    }\n    const base = options.parent || Base;\n    return base.define(ObjectExt.merge(defaults, config, { shape: name }));\n}\n//# sourceMappingURL=util.js.map"]},"metadata":{},"sourceType":"module"}