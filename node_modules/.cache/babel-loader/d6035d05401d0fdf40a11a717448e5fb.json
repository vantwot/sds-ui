{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MappingSource = void 0;\n\nvar MappingSource =\n/** @class */\nfunction () {\n  function MappingSource() {}\n\n  MappingSource.aggregation = function (source, aggregation) {\n    var _a = aggregation.type,\n        type = _a === void 0 ? 'grid' : _a,\n        radius = aggregation.radius,\n        method = aggregation.method,\n        field = aggregation.field;\n    var config = {\n      type: type,\n      size: radius,\n      method: method,\n      field: field\n    };\n\n    if (source.transforms) {\n      // 过滤 transform 有相同配置情况\n      source.transforms = source.transforms.filter(function (transform) {\n        return transform.type !== config.type;\n      });\n      source.transforms.push(config);\n    } else {\n      source.transforms = [config];\n    }\n  };\n\n  return MappingSource;\n}();\n\nexports.MappingSource = MappingSource;","map":{"version":3,"sources":["../../../../src/adaptor/source/index.ts"],"names":[],"mappings":";;;;;;;AAEA,IAAA,aAAA;AAAA;AAAA,YAAA;AAAA,WAAA,aAAA,GAAA,CAYC;;AAXQ,EAAA,aAAA,CAAA,WAAA,GAAP,UAAmB,MAAnB,EAAmD,WAAnD,EAA+E;AACrE,QAAA,EAAA,GAAyC,WAAW,CAAvC,IAAb;AAAA,QAAA,IAAI,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,MAAH,GAAS,EAAb;AAAA,QAAe,MAAM,GAAoB,WAAW,CAA/B,MAArB;AAAA,QAAuB,MAAM,GAAY,WAAW,CAAvB,MAA7B;AAAA,QAA+B,KAAK,GAAK,WAAW,CAAhB,KAApC;AACR,QAAM,MAAM,GAAG;AAAE,MAAA,IAAI,EAAA,IAAN;AAAQ,MAAA,IAAI,EAAE,MAAd;AAAsB,MAAA,MAAM,EAAA,MAA5B;AAA8B,MAAA,KAAK,EAAA;AAAnC,KAAf;;AACA,QAAI,MAAM,CAAC,UAAX,EAAuB;AACrB;AACA,MAAA,MAAM,CAAC,UAAP,GAAoB,MAAM,CAAC,UAAP,CAAkB,MAAlB,CAAyB,UAAC,SAAD,EAAU;AAAK,eAAA,SAAS,CAAC,IAAV,KAAmB,MAAM,CAAzB,IAAA;AAA8B,OAAtE,CAApB;AACA,MAAA,MAAM,CAAC,UAAP,CAAkB,IAAlB,CAAuB,MAAvB;AACD,KAJD,MAIO;AACL,MAAA,MAAM,CAAC,UAAP,GAAoB,CAAC,MAAD,CAApB;AACD;AACF,GAVM;;AAWT,SAAA,aAAA;AAAC,CAZD,EAAA;;AAAa,OAAA,CAAA,aAAA,GAAA,aAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MappingSource = void 0;\nvar MappingSource = /** @class */ (function () {\n    function MappingSource() {\n    }\n    MappingSource.aggregation = function (source, aggregation) {\n        var _a = aggregation.type, type = _a === void 0 ? 'grid' : _a, radius = aggregation.radius, method = aggregation.method, field = aggregation.field;\n        var config = { type: type, size: radius, method: method, field: field };\n        if (source.transforms) {\n            // 过滤 transform 有相同配置情况\n            source.transforms = source.transforms.filter(function (transform) { return transform.type !== config.type; });\n            source.transforms.push(config);\n        }\n        else {\n            source.transforms = [config];\n        }\n    };\n    return MappingSource;\n}());\nexports.MappingSource = MappingSource;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}