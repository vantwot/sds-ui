{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HeatmapLayer = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar util_1 = require(\"@antv/util\");\n\nvar l7_layers_1 = require(\"@antv/l7-layers\");\n\nvar plot_layer_1 = require(\"../../core/layer/plot-layer\");\n\nvar adaptor_1 = require(\"./adaptor\");\n\nvar DEFAULT_OPTIONS = {\n  source: {\n    data: [],\n    parser: {\n      type: 'json',\n      x: 'x',\n      y: 'y'\n    }\n  },\n  shape: 'heatmap',\n  size: {\n    value: [0, 1]\n  },\n  style: {\n    intensity: 3,\n    radius: 20,\n    opacity: 1,\n    colorsRamp: [{\n      color: 'rgba(33,102,172,0.0)',\n      position: 0\n    }, {\n      color: 'rgb(103,169,207)',\n      position: 0.2\n    }, {\n      color: 'rgb(209,229,240)',\n      position: 0.4\n    }, {\n      color: 'rgb(253,219,199)',\n      position: 0.6\n    }, {\n      color: 'rgb(239,138,98)',\n      position: 0.8\n    }, {\n      color: 'rgb(178,24,43,1.0)',\n      position: 1\n    }]\n  }\n};\nvar LAYER_OPTIONS_KEYS = ['shape', 'color', 'size', 'style', 'state'];\n\nvar HeatmapLayer =\n/** @class */\nfunction (_super) {\n  (0, tslib_1.__extends)(HeatmapLayer, _super);\n\n  function HeatmapLayer(options) {\n    var _this = _super.call(this, options) || this;\n    /**\n     * 图层类型\n     */\n\n\n    _this.type = plot_layer_1.PlotLayer.LayerType.HeatmapLayer;\n    /**\n     * 图层是否具有交互属性\n     */\n\n    _this.interaction = false;\n    var _a = _this.options,\n        name = _a.name,\n        source = _a.source;\n\n    var config = _this.pickLayerConfig(_this.options);\n\n    _this.name = name ? name : (0, util_1.uniqueId)(_this.type);\n    _this.layer = new l7_layers_1.HeatmapLayer((0, tslib_1.__assign)((0, tslib_1.__assign)({}, config), {\n      name: _this.name\n    }));\n\n    _this.mappingLayer(_this.layer, _this.options);\n\n    _this.setSource(source);\n\n    return _this;\n  }\n  /**\n   * 获取默认配置\n   */\n\n\n  HeatmapLayer.prototype.getDefaultOptions = function () {\n    return DEFAULT_OPTIONS;\n  };\n\n  HeatmapLayer.prototype.mappingLayer = function (layer, options) {\n    (0, adaptor_1.mappingLayer)(layer, options);\n  };\n\n  HeatmapLayer.prototype.update = function (options) {\n    _super.prototype.update.call(this, options);\n\n    this.mappingLayer(this.layer, this.options);\n  };\n  /**\n   * 默认配置项\n   */\n\n\n  HeatmapLayer.DefaultOptions = DEFAULT_OPTIONS;\n  /**\n   * 图层配置项 Keys\n   */\n\n  HeatmapLayer.LayerOptionsKeys = plot_layer_1.PlotLayer.LayerConfigkeys.concat(LAYER_OPTIONS_KEYS);\n  return HeatmapLayer;\n}(plot_layer_1.PlotLayer);\n\nexports.HeatmapLayer = HeatmapLayer;","map":{"version":3,"sources":["../../../../src/layers/heatmap-layer/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HeatmapLayer = void 0;\nvar tslib_1 = require(\"tslib\");\nvar util_1 = require(\"@antv/util\");\nvar l7_layers_1 = require(\"@antv/l7-layers\");\nvar plot_layer_1 = require(\"../../core/layer/plot-layer\");\nvar adaptor_1 = require(\"./adaptor\");\nvar DEFAULT_OPTIONS = {\n    source: {\n        data: [],\n        parser: {\n            type: 'json',\n            x: 'x',\n            y: 'y',\n        },\n    },\n    shape: 'heatmap',\n    size: {\n        value: [0, 1],\n    },\n    style: {\n        intensity: 3,\n        radius: 20,\n        opacity: 1,\n        colorsRamp: [\n            { color: 'rgba(33,102,172,0.0)', position: 0 },\n            { color: 'rgb(103,169,207)', position: 0.2 },\n            { color: 'rgb(209,229,240)', position: 0.4 },\n            { color: 'rgb(253,219,199)', position: 0.6 },\n            { color: 'rgb(239,138,98)', position: 0.8 },\n            { color: 'rgb(178,24,43,1.0)', position: 1 },\n        ],\n    },\n};\nvar LAYER_OPTIONS_KEYS = ['shape', 'color', 'size', 'style', 'state'];\nvar HeatmapLayer = /** @class */ (function (_super) {\n    (0, tslib_1.__extends)(HeatmapLayer, _super);\n    function HeatmapLayer(options) {\n        var _this = _super.call(this, options) || this;\n        /**\n         * 图层类型\n         */\n        _this.type = plot_layer_1.PlotLayer.LayerType.HeatmapLayer;\n        /**\n         * 图层是否具有交互属性\n         */\n        _this.interaction = false;\n        var _a = _this.options, name = _a.name, source = _a.source;\n        var config = _this.pickLayerConfig(_this.options);\n        _this.name = name ? name : (0, util_1.uniqueId)(_this.type);\n        _this.layer = new l7_layers_1.HeatmapLayer((0, tslib_1.__assign)((0, tslib_1.__assign)({}, config), { name: _this.name }));\n        _this.mappingLayer(_this.layer, _this.options);\n        _this.setSource(source);\n        return _this;\n    }\n    /**\n     * 获取默认配置\n     */\n    HeatmapLayer.prototype.getDefaultOptions = function () {\n        return DEFAULT_OPTIONS;\n    };\n    HeatmapLayer.prototype.mappingLayer = function (layer, options) {\n        (0, adaptor_1.mappingLayer)(layer, options);\n    };\n    HeatmapLayer.prototype.update = function (options) {\n        _super.prototype.update.call(this, options);\n        this.mappingLayer(this.layer, this.options);\n    };\n    /**\n     * 默认配置项\n     */\n    HeatmapLayer.DefaultOptions = DEFAULT_OPTIONS;\n    /**\n     * 图层配置项 Keys\n     */\n    HeatmapLayer.LayerOptionsKeys = plot_layer_1.PlotLayer.LayerConfigkeys.concat(LAYER_OPTIONS_KEYS);\n    return HeatmapLayer;\n}(plot_layer_1.PlotLayer));\nexports.HeatmapLayer = HeatmapLayer;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}