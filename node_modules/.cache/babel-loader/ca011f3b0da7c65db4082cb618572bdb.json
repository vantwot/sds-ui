{"ast":null,"code":"import _classCallCheck from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport { getJudgeFunction } from '../fn';\nimport { normalizeWheel } from './normalizeWheel';\nimport { requestAnimationFrame } from './animationFrame';\nexport var WheelHandler = function WheelHandler(options) {\n  var _this = this;\n\n  _classCallCheck(this, WheelHandler);\n\n  this.onWheel = function (e) {\n    var normalizedEvent = normalizeWheel(e);\n    var pixelX = normalizedEvent.pixelX,\n        pixelY = normalizedEvent.pixelY;\n    var deltaX = _this.deltaX + pixelX;\n    var deltaY = _this.deltaY + pixelY;\n\n    var handleScrollX = _this.shouldHandleScrollX(deltaX, deltaY);\n\n    var handleScrollY = _this.shouldHandleScrollY(deltaY, deltaX);\n\n    if (!handleScrollX && !handleScrollY) {\n      return;\n    }\n\n    _this.deltaX += handleScrollX ? pixelX : 0;\n    _this.deltaY += handleScrollY ? pixelY : 0;\n    var changed;\n\n    if (_this.deltaX !== 0 || _this.deltaY !== 0) {\n      if (_this.stopPropagation()) {\n        e.stopPropagation();\n      }\n\n      changed = true;\n    }\n\n    if (changed === true && _this.animationFrameID == null) {\n      _this.animationFrameID = requestAnimationFrame(_this.didWheel);\n    }\n  };\n\n  this.didWheel = function () {\n    _this.animationFrameID = null;\n\n    if (_this.callback) {\n      _this.callback(_this.deltaX, _this.deltaY);\n    }\n\n    _this.deltaX = 0;\n    _this.deltaY = 0;\n  };\n\n  this.callback = options.onWheel;\n  this.stopPropagation = getJudgeFunction(options.stopPropagation);\n  this.shouldHandleScrollX = getJudgeFunction(options.shouldHandleScrollX);\n  this.shouldHandleScrollY = getJudgeFunction(options.shouldHandleScrollY);\n  this.deltaX = 0;\n  this.deltaY = 0;\n};","map":{"version":3,"sources":["../../../src/util/dom/WheelHandler.ts"],"names":[],"mappings":";AAAA,SAAS,gBAAT,QAAiC,OAAjC;AACA,SAAS,cAAT,QAA+B,kBAA/B;AACA,SAAS,qBAAT,QAAsC,kBAAtC;AAEA,WAAa,YAAb,GAeE,sBAAY,OAAZ,EAAyC;AAAA;;AAAA;;AASzC,OAAA,OAAA,GAAU,UAAC,CAAD,EAAwB;AAChC,QAAM,eAAe,GAAG,cAAc,CAAC,CAAD,CAAtC;AACA,QAAQ,MAAR,GAA2B,eAA3B,CAAQ,MAAR;AAAA,QAAgB,MAAhB,GAA2B,eAA3B,CAAgB,MAAhB;AACA,QAAM,MAAM,GAAG,KAAI,CAAC,MAAL,GAAc,MAA7B;AACA,QAAM,MAAM,GAAG,KAAI,CAAC,MAAL,GAAc,MAA7B;;AACA,QAAM,aAAa,GAAG,KAAI,CAAC,mBAAL,CAAyB,MAAzB,EAAiC,MAAjC,CAAtB;;AACA,QAAM,aAAa,GAAG,KAAI,CAAC,mBAAL,CAAyB,MAAzB,EAAiC,MAAjC,CAAtB;;AAEA,QAAI,CAAC,aAAD,IAAkB,CAAC,aAAvB,EAAsC;AACpC;AACD;;AAED,IAAA,KAAI,CAAC,MAAL,IAAe,aAAa,GAAG,MAAH,GAAY,CAAxC;AACA,IAAA,KAAI,CAAC,MAAL,IAAe,aAAa,GAAG,MAAH,GAAY,CAAxC;AAEA,QAAI,OAAJ;;AACA,QAAI,KAAI,CAAC,MAAL,KAAgB,CAAhB,IAAqB,KAAI,CAAC,MAAL,KAAgB,CAAzC,EAA4C;AAC1C,UAAI,KAAI,CAAC,eAAL,EAAJ,EAA4B;AAC1B,QAAA,CAAC,CAAC,eAAF;AACD;;AACD,MAAA,OAAO,GAAG,IAAV;AACD;;AAED,QAAI,OAAO,KAAK,IAAZ,IAAoB,KAAI,CAAC,gBAAL,IAAyB,IAAjD,EAAuD;AACrD,MAAA,KAAI,CAAC,gBAAL,GAAwB,qBAAqB,CAAC,KAAI,CAAC,QAAN,CAA7C;AACD;AACF,GA1BD;;AA4BQ,OAAA,QAAA,GAAW,YAAK;AACtB,IAAA,KAAI,CAAC,gBAAL,GAAwB,IAAxB;;AACA,QAAI,KAAI,CAAC,QAAT,EAAmB;AACjB,MAAA,KAAI,CAAC,QAAL,CAAc,KAAI,CAAC,MAAnB,EAA2B,KAAI,CAAC,MAAhC;AACD;;AACD,IAAA,KAAI,CAAC,MAAL,GAAc,CAAd;AACA,IAAA,KAAI,CAAC,MAAL,GAAc,CAAd;AACD,GAPO;;AApCN,OAAK,QAAL,GAAgB,OAAO,CAAC,OAAxB;AACA,OAAK,eAAL,GAAuB,gBAAgB,CAAC,OAAO,CAAC,eAAT,CAAvC;AACA,OAAK,mBAAL,GAA2B,gBAAgB,CAAC,OAAO,CAAC,mBAAT,CAA3C;AACA,OAAK,mBAAL,GAA2B,gBAAgB,CAAC,OAAO,CAAC,mBAAT,CAA3C;AACA,OAAK,MAAL,GAAc,CAAd;AACA,OAAK,MAAL,GAAc,CAAd;AACD,CAtBH","sourceRoot":"","sourcesContent":["import { getJudgeFunction } from '../fn';\nimport { normalizeWheel } from './normalizeWheel';\nimport { requestAnimationFrame } from './animationFrame';\nexport class WheelHandler {\n    constructor(options) {\n        this.onWheel = (e) => {\n            const normalizedEvent = normalizeWheel(e);\n            const { pixelX, pixelY } = normalizedEvent;\n            const deltaX = this.deltaX + pixelX;\n            const deltaY = this.deltaY + pixelY;\n            const handleScrollX = this.shouldHandleScrollX(deltaX, deltaY);\n            const handleScrollY = this.shouldHandleScrollY(deltaY, deltaX);\n            if (!handleScrollX && !handleScrollY) {\n                return;\n            }\n            this.deltaX += handleScrollX ? pixelX : 0;\n            this.deltaY += handleScrollY ? pixelY : 0;\n            let changed;\n            if (this.deltaX !== 0 || this.deltaY !== 0) {\n                if (this.stopPropagation()) {\n                    e.stopPropagation();\n                }\n                changed = true;\n            }\n            if (changed === true && this.animationFrameID == null) {\n                this.animationFrameID = requestAnimationFrame(this.didWheel);\n            }\n        };\n        this.didWheel = () => {\n            this.animationFrameID = null;\n            if (this.callback) {\n                this.callback(this.deltaX, this.deltaY);\n            }\n            this.deltaX = 0;\n            this.deltaY = 0;\n        };\n        this.callback = options.onWheel;\n        this.stopPropagation = getJudgeFunction(options.stopPropagation);\n        this.shouldHandleScrollX = getJudgeFunction(options.shouldHandleScrollX);\n        this.shouldHandleScrollY = getJudgeFunction(options.shouldHandleScrollY);\n        this.deltaX = 0;\n        this.deltaY = 0;\n    }\n}\n//# sourceMappingURL=WheelHandler.js.map"]},"metadata":{},"sourceType":"module"}