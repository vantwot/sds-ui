{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\n\nvar _dec, _class;\n\nimport { injectable } from 'inversify';\nimport 'reflect-metadata';\nvar LayerModelPlugin = (_dec = injectable(), _dec(_class = function () {\n  function LayerModelPlugin() {\n    _classCallCheck(this, LayerModelPlugin);\n  }\n\n  _createClass(LayerModelPlugin, [{\n    key: \"apply\",\n    value: function apply(layer) {\n      layer.hooks.init.tap('LayerModelPlugin', function () {\n        layer.prepareBuildModel();\n        layer.buildModels();\n        layer.styleNeedUpdate = false;\n      });\n      layer.hooks.beforeRenderData.tap('DataSourcePlugin', function () {\n        layer.prepareBuildModel();\n        layer.clearModels();\n        layer.buildModels();\n        layer.layerModelNeedUpdate = false;\n        return false;\n      });\n    }\n  }]);\n\n  return LayerModelPlugin;\n}()) || _class);\nexport { LayerModelPlugin as default };","map":{"version":3,"sources":["../../src/plugins/LayerModelPlugin.ts"],"names":["injectable","LayerModelPlugin","layer"],"mappings":";;;;;AACA,SAAA,UAAA,QAAA,WAAA;AACA,OAAA,kBAAA;IAKqBC,gB,WADpBD,UAAU,E;;;;;;;WAET,SAAA,KAAA,CAAA,KAAA,EAA4B;AAC1BE,MAAAA,KAAK,CAALA,KAAAA,CAAAA,IAAAA,CAAAA,GAAAA,CAAAA,kBAAAA,EAAyC,YAAM;AAE7CA,QAAAA,KAAK,CAALA,iBAAAA;AAEAA,QAAAA,KAAK,CAALA,WAAAA;AACAA,QAAAA,KAAK,CAALA,eAAAA,GAAAA,KAAAA;AALFA,OAAAA;AAQAA,MAAAA,KAAK,CAALA,KAAAA,CAAAA,gBAAAA,CAAAA,GAAAA,CAAAA,kBAAAA,EAAqD,YAAM;AAEzDA,QAAAA,KAAK,CAALA,iBAAAA;AAEAA,QAAAA,KAAK,CAALA,WAAAA;AAEAA,QAAAA,KAAK,CAALA,WAAAA;AACAA,QAAAA,KAAK,CAALA,oBAAAA,GAAAA,KAAAA;AACA,eAAA,KAAA;AARFA,OAAAA;AAUD;;;;;SApBkBD,gB","sourcesContent":["import { ILayer, ILayerPlugin, IMapService, TYPES } from '@antv/l7-core';\nimport { injectable } from 'inversify';\nimport 'reflect-metadata';\n/**\n * Layer Model 初始化，更新，销毁\n */\n@injectable()\nexport default class LayerModelPlugin implements ILayerPlugin {\n  public apply(layer: ILayer) {\n    layer.hooks.init.tap('LayerModelPlugin', () => {\n      // 更新Model 配置项\n      layer.prepareBuildModel();\n      // 初始化 Model\n      layer.buildModels();\n      layer.styleNeedUpdate = false;\n    });\n\n    layer.hooks.beforeRenderData.tap('DataSourcePlugin', () => {\n      // 更新Model 配置项\n      layer.prepareBuildModel();\n\n      layer.clearModels();\n      // 初始化 Model\n      layer.buildModels();\n      layer.layerModelNeedUpdate = false;\n      return false;\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}