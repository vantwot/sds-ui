{"ast":null,"code":"var _jsxFileName = \"/home/manolo/sds-ui/src/components/SubjectsTable.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\n/* Components */\n\nimport ErrorWarning from './ErrorWarning';\nimport LoadingCard from './LoadingCard';\nimport SortCompendium from './SortCompendium';\n/* UI Library Components */\n\nimport { Card, Table } from 'antd';\n/* Utilities */\n\nimport { APIRequest } from '../apis/api';\nimport { Link } from 'react-router-dom';\n/* Charts */\n\nimport TinyColumnChart from './charts/TinyColumnChart';\nimport TinyWordCloudChart from './charts/TinyWordCloudChart';\n/* UI Library Sub-components */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Column\n} = Table;\n\nconst SubjectsTable = _ref => {\n  _s();\n\n  let {\n    core,\n    type\n  } = _ref;\n  const [pagination, setPagination] = useState({\n    max: 5,\n    page: 1\n  });\n  const [sort, setSort] = useState('citations');\n  const [state, setUrl] = APIRequest(`${core.URL}&data=${type}&max=${pagination.max}&page=${pagination.page}&sort=${sort}`);\n  const title = {\n    institutions: 'InstituciÃ³n',\n    groups: 'Grupo'\n  };\n  useEffect(() => {\n    setUrl(`${core.URL}&data=${type}&max=${pagination.max}&page=${pagination.page}&sort=${sort}`); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pagination, sort, core.URL]);\n\n  if (state.isError) {\n    return /*#__PURE__*/_jsxDEV(ErrorWarning, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 12\n    }, this);\n  } else if (state.isLoading) {\n    return /*#__PURE__*/_jsxDEV(LoadingCard, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    size: \"small\",\n    bordered: false,\n    style: {\n      backgroundColor: '#fafafa'\n    },\n    bodyStyle: {\n      padding: 0\n    },\n    extra: /*#__PURE__*/_jsxDEV(SortCompendium, {\n      sort: sort,\n      setSort: setSort\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 14\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      size: \"small\",\n      dataSource: state.data.data,\n      bordered: true,\n      rowKey: record => record.id,\n      pagination: {\n        total: state.data.total,\n        showSizeChanger: true,\n        current: pagination.page,\n        pageSize: pagination.max,\n        pageSizeOptions: [5, 10, 15],\n        onChange: (page, max) => setPagination({\n          page: page,\n          max: max\n        })\n      },\n      rowClassName: \"compendium__row--height\",\n      scroll: {\n        x: 1400\n      },\n      children: [/*#__PURE__*/_jsxDEV(Column, {\n        title: title[type],\n        render: item => /*#__PURE__*/_jsxDEV(Link, {\n          to: `/app/${type}?id=${item.id}`,\n          onClick: () => core.setURL(`/app/${type}?id=${item.id}`),\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), type === 'groups' && /*#__PURE__*/_jsxDEV(Column, {\n        title: \"Afiliaci\\xF3n\",\n        dataIndex: 'institution',\n        render: item => /*#__PURE__*/_jsxDEV(Link, {\n          to: `/app/institutions?id=${item.id}`,\n          onClick: () => core.setURL(`/app/institutions?id=${item.id}`),\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        title: \"Citas totales\",\n        dataIndex: 'citations_count',\n        align: \"center\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        title: \"Productos totales\",\n        dataIndex: 'products_count',\n        align: \"center\",\n        style: {\n          fontSize: '24px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        title: \"Productos por a\\xF1o\",\n        dataIndex: 'plot',\n        render: item => /*#__PURE__*/_jsxDEV(TinyColumnChart, {\n          data: item\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 29\n        }, this),\n        width: '30%'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        title: \"Temas\",\n        dataIndex: 'word_cloud',\n        width: '30%',\n        render: item => /*#__PURE__*/_jsxDEV(TinyWordCloudChart, {\n          data: item,\n          core: core\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SubjectsTable, \"ZcOl522unTNJ8sXTnotkpy4b56I=\");\n\n_c = SubjectsTable;\nexport default SubjectsTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"SubjectsTable\");","map":{"version":3,"sources":["/home/manolo/sds-ui/src/components/SubjectsTable.jsx"],"names":["React","useState","useEffect","ErrorWarning","LoadingCard","SortCompendium","Card","Table","APIRequest","Link","TinyColumnChart","TinyWordCloudChart","Column","SubjectsTable","core","type","pagination","setPagination","max","page","sort","setSort","state","setUrl","URL","title","institutions","groups","isError","isLoading","backgroundColor","padding","data","record","id","total","showSizeChanger","current","pageSize","pageSizeOptions","onChange","x","item","setURL","name","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\n/* Components */\nimport ErrorWarning from './ErrorWarning';\nimport LoadingCard from './LoadingCard';\nimport SortCompendium from './SortCompendium';\n\n/* UI Library Components */\nimport { Card, Table } from 'antd';\n\n/* Utilities */\nimport { APIRequest } from '../apis/api';\nimport { Link } from 'react-router-dom';\n\n/* Charts */\nimport TinyColumnChart from './charts/TinyColumnChart';\nimport TinyWordCloudChart from './charts/TinyWordCloudChart';\n\n/* UI Library Sub-components */\nconst { Column } = Table;\n\nconst SubjectsTable = ({ core, type }) => {\n  const [pagination, setPagination] = useState({ max: 5, page: 1 });\n  const [sort, setSort] = useState('citations');\n  const [state, setUrl] = APIRequest(\n    `${core.URL}&data=${type}&max=${pagination.max}&page=${pagination.page}&sort=${sort}`\n  );\n\n  const title = { institutions: 'InstituciÃ³n', groups: 'Grupo' };\n\n  useEffect(() => {\n    setUrl(\n      `${core.URL}&data=${type}&max=${pagination.max}&page=${pagination.page}&sort=${sort}`\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pagination, sort, core.URL]);\n\n  if (state.isError) {\n    return <ErrorWarning />;\n  } else if (state.isLoading) {\n    return <LoadingCard />;\n  }\n  return (\n    <Card\n      size=\"small\"\n      bordered={false}\n      style={{ backgroundColor: '#fafafa' }}\n      bodyStyle={{ padding: 0 }}\n      extra={<SortCompendium sort={sort} setSort={setSort} />}\n    >\n      <Table\n        size=\"small\"\n        dataSource={state.data.data}\n        bordered\n        rowKey={(record) => record.id}\n        pagination={{\n          total: state.data.total,\n          showSizeChanger: true,\n          current: pagination.page,\n          pageSize: pagination.max,\n          pageSizeOptions: [5, 10, 15],\n          onChange: (page, max) => setPagination({ page: page, max: max }),\n        }}\n        rowClassName=\"compendium__row--height\"\n        scroll={{ x: 1400 }}\n      >\n        <Column\n          title={title[type]}\n          render={(item) => (\n            <Link\n              to={`/app/${type}?id=${item.id}`}\n              onClick={() => core.setURL(`/app/${type}?id=${item.id}`)}\n            >\n              {item.name}\n            </Link>\n          )}\n        />\n        {type === 'groups' && (\n          <Column\n            title=\"AfiliaciÃ³n\"\n            dataIndex={'institution'}\n            render={(item) => (\n              <Link\n                to={`/app/institutions?id=${item.id}`}\n                onClick={() => core.setURL(`/app/institutions?id=${item.id}`)}\n              >\n                {item.name}\n              </Link>\n            )}\n          />\n        )}\n        <Column\n          title=\"Citas totales\"\n          dataIndex={'citations_count'}\n          align=\"center\"\n        />\n        <Column\n          title=\"Productos totales\"\n          dataIndex={'products_count'}\n          align=\"center\"\n          style={{ fontSize: '24px' }}\n        />\n        <Column\n          title=\"Productos por aÃ±o\"\n          dataIndex={'plot'}\n          render={(item) => <TinyColumnChart data={item} />}\n          width={'30%'}\n        />\n        <Column\n          title=\"Temas\"\n          dataIndex={'word_cloud'}\n          width={'30%'}\n          render={(item) => <TinyWordCloudChart data={item} core={core} />}\n        />\n      </Table>\n    </Card>\n  );\n};\n\nexport default SubjectsTable;\n"]},"metadata":{},"sourceType":"module"}