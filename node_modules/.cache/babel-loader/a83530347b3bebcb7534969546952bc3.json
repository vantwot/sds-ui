{"ast":null,"code":"import _get from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _classCallCheck from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Registry } from '../../registry';\nimport { Markup } from '../../view';\nimport { Node } from '../../model/node';\nimport { NodeView } from '../../view/node';\nimport { Base } from '../base';\nexport var HTML = /*#__PURE__*/function (_Base) {\n  _inherits(HTML, _Base);\n\n  var _super = _createSuper(HTML);\n\n  function HTML() {\n    _classCallCheck(this, HTML);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(HTML, [{\n    key: \"html\",\n    get: function get() {\n      return this.getHTML();\n    },\n    set: function set(val) {\n      this.setHTML(val);\n    }\n  }, {\n    key: \"getHTML\",\n    value: function getHTML() {\n      return this.store.get('html');\n    }\n  }, {\n    key: \"setHTML\",\n    value: function setHTML(html) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (html == null) {\n        this.removeHTML(options);\n      } else {\n        this.store.set('html', html, options);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"removeHTML\",\n    value: function removeHTML() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.store.remove('html', options);\n    }\n  }]);\n\n  return HTML;\n}(Base);\n\n(function (HTML) {\n  var View = /*#__PURE__*/function (_NodeView) {\n    _inherits(View, _NodeView);\n\n    var _super2 = _createSuper(View);\n\n    function View() {\n      _classCallCheck(this, View);\n\n      return _super2.apply(this, arguments);\n    }\n\n    _createClass(View, [{\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n\n        _get(_getPrototypeOf(View.prototype), \"init\", this).call(this);\n\n        this.cell.on('change:*', function () {\n          var shouldUpdate = _this.graph.hook.shouldUpdateHTMLComponent(_this.cell);\n\n          if (shouldUpdate) {\n            _this.renderHTMLComponent();\n          }\n        });\n      }\n    }, {\n      key: \"confirmUpdate\",\n      value: function confirmUpdate(flag) {\n        var _this2 = this;\n\n        var ret = _get(_getPrototypeOf(View.prototype), \"confirmUpdate\", this).call(this, flag);\n\n        return this.handleAction(ret, View.action, function () {\n          return _this2.renderHTMLComponent();\n        });\n      }\n    }, {\n      key: \"renderHTMLComponent\",\n      value: function renderHTMLComponent() {\n        var container = this.selectors.foContent;\n\n        if (container) {\n          var $wrap = this.$(container).empty();\n          var component = this.graph.hook.getHTMLComponent(this.cell);\n\n          if (component) {\n            if (typeof component === 'string') {\n              $wrap.html(component);\n            } else {\n              $wrap.append(component);\n            }\n          }\n        }\n      }\n    }]);\n\n    return View;\n  }(NodeView);\n\n  HTML.View = View;\n\n  (function (View) {\n    View.action = 'html';\n    View.config({\n      bootstrap: [View.action],\n      actions: {\n        html: View.action\n      }\n    });\n    NodeView.registry.register('html-view', View);\n  })(View = HTML.View || (HTML.View = {}));\n})(HTML || (HTML = {}));\n\n(function (HTML) {\n  HTML.config({\n    view: 'html-view',\n    markup: [{\n      tagName: 'rect',\n      selector: 'body'\n    }, Object.assign({}, Markup.getForeignObjectMarkup()), {\n      tagName: 'text',\n      selector: 'label'\n    }],\n    attrs: {\n      body: {\n        fill: 'none',\n        stroke: 'none',\n        refWidth: '100%',\n        refHeight: '100%'\n      },\n      fo: {\n        refWidth: '100%',\n        refHeight: '100%'\n      }\n    }\n  });\n  Node.registry.register('html', HTML);\n})(HTML || (HTML = {}));\n\n(function (HTML) {\n  HTML.componentRegistry = Registry.create({\n    type: 'html componnet'\n  });\n})(HTML || (HTML = {}));","map":{"version":3,"sources":["../../../src/shape/standard/html.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { Registry } from '../../registry';\nimport { Markup } from '../../view';\nimport { Node } from '../../model/node';\nimport { NodeView } from '../../view/node';\nimport { Base } from '../base';\nexport class HTML extends Base {\n    get html() {\n        return this.getHTML();\n    }\n    set html(val) {\n        this.setHTML(val);\n    }\n    getHTML() {\n        return this.store.get('html');\n    }\n    setHTML(html, options = {}) {\n        if (html == null) {\n            this.removeHTML(options);\n        }\n        else {\n            this.store.set('html', html, options);\n        }\n        return this;\n    }\n    removeHTML(options = {}) {\n        return this.store.remove('html', options);\n    }\n}\n(function (HTML) {\n    class View extends NodeView {\n        init() {\n            super.init();\n            this.cell.on('change:*', () => {\n                const shouldUpdate = this.graph.hook.shouldUpdateHTMLComponent(this.cell);\n                if (shouldUpdate) {\n                    this.renderHTMLComponent();\n                }\n            });\n        }\n        confirmUpdate(flag) {\n            const ret = super.confirmUpdate(flag);\n            return this.handleAction(ret, View.action, () => this.renderHTMLComponent());\n        }\n        renderHTMLComponent() {\n            const container = this.selectors.foContent;\n            if (container) {\n                const $wrap = this.$(container).empty();\n                const component = this.graph.hook.getHTMLComponent(this.cell);\n                if (component) {\n                    if (typeof component === 'string') {\n                        $wrap.html(component);\n                    }\n                    else {\n                        $wrap.append(component);\n                    }\n                }\n            }\n        }\n    }\n    HTML.View = View;\n    (function (View) {\n        View.action = 'html';\n        View.config({\n            bootstrap: [View.action],\n            actions: {\n                html: View.action,\n            },\n        });\n        NodeView.registry.register('html-view', View);\n    })(View = HTML.View || (HTML.View = {}));\n})(HTML || (HTML = {}));\n(function (HTML) {\n    HTML.config({\n        view: 'html-view',\n        markup: [\n            {\n                tagName: 'rect',\n                selector: 'body',\n            },\n            Object.assign({}, Markup.getForeignObjectMarkup()),\n            {\n                tagName: 'text',\n                selector: 'label',\n            },\n        ],\n        attrs: {\n            body: {\n                fill: 'none',\n                stroke: 'none',\n                refWidth: '100%',\n                refHeight: '100%',\n            },\n            fo: {\n                refWidth: '100%',\n                refHeight: '100%',\n            },\n        },\n    });\n    Node.registry.register('html', HTML);\n})(HTML || (HTML = {}));\n(function (HTML) {\n    HTML.componentRegistry = Registry.create({\n        type: 'html componnet',\n    });\n})(HTML || (HTML = {}));\n//# sourceMappingURL=html.js.map"]},"metadata":{},"sourceType":"module"}