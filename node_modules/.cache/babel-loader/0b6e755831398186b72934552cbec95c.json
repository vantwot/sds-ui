{"ast":null,"code":"import _slicedToArray from\"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';/* Components */import ErrorWarning from'./ErrorWarning';import LoadingCard from'./LoadingCard';import SortCompendium from'./SortCompendium';/* UI Library Components */import{Card,Table}from'antd';/* Utilities */import{APIRequest}from'../apis/api';import{Link}from'react-router-dom';/* Charts */import TinyColumnChart from'./charts/TinyColumnChart';import TinyWordCloudChart from'./charts/TinyWordCloudChart';/* UI Library Sub-components */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Column=Table.Column;var SubjectsTable=function SubjectsTable(_ref){var core=_ref.core,type=_ref.type;var _useState=useState({max:5,page:1}),_useState2=_slicedToArray(_useState,2),pagination=_useState2[0],setPagination=_useState2[1];var _useState3=useState('citations'),_useState4=_slicedToArray(_useState3,2),sort=_useState4[0],setSort=_useState4[1];var _APIRequest=APIRequest(\"\".concat(core.URL,\"&data=\").concat(type,\"&max=\").concat(pagination.max,\"&page=\").concat(pagination.page,\"&sort=\").concat(sort)),_APIRequest2=_slicedToArray(_APIRequest,2),state=_APIRequest2[0],setUrl=_APIRequest2[1];var title={institutions:'Institución',groups:'Grupo'};useEffect(function(){setUrl(\"\".concat(core.URL,\"&data=\").concat(type,\"&max=\").concat(pagination.max,\"&page=\").concat(pagination.page,\"&sort=\").concat(sort));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[pagination,sort,core.URL]);if(state.isError){return/*#__PURE__*/_jsx(ErrorWarning,{});}else if(state.isLoading){return/*#__PURE__*/_jsx(LoadingCard,{});}return/*#__PURE__*/_jsx(Card,{size:\"small\",bordered:false,style:{backgroundColor:'#fafafa'},bodyStyle:{padding:0},extra:/*#__PURE__*/_jsx(SortCompendium,{sort:sort,setSort:setSort}),children:/*#__PURE__*/_jsxs(Table,{size:\"small\",dataSource:state.data.data,bordered:true,rowKey:function rowKey(record){return record.id;},pagination:{total:state.data.total,showSizeChanger:true,current:pagination.page,pageSize:pagination.max,pageSizeOptions:[5,10,15],onChange:function onChange(page,max){return setPagination({page:page,max:max});}},rowClassName:\"compendium__row--height\",scroll:{x:1400},children:[/*#__PURE__*/_jsx(Column,{title:title[type],render:function render(item){return/*#__PURE__*/_jsx(Link,{to:\"/app/\".concat(type,\"?id=\").concat(item.id),onClick:function onClick(){return core.setURL(\"/app/\".concat(type,\"?id=\").concat(item.id));},children:item.name});}}),type==='groups'&&/*#__PURE__*/_jsx(Column,{title:\"Afiliaci\\xF3n\",dataIndex:'institution',render:function render(item){return/*#__PURE__*/_jsx(Link,{to:\"/app/institutions?id=\".concat(item.id),onClick:function onClick(){return core.setURL(\"/app/institutions?id=\".concat(item.id));},children:item.name});}}),/*#__PURE__*/_jsx(Column,{title:\"Citas totales\",dataIndex:'citations_count',align:\"center\"}),/*#__PURE__*/_jsx(Column,{title:\"Productos totales\",dataIndex:'products_count',align:\"center\",style:{fontSize:'24px'}}),/*#__PURE__*/_jsx(Column,{title:\"Productos por a\\xF1o\",dataIndex:'plot',render:function render(item){return/*#__PURE__*/_jsx(TinyColumnChart,{data:item});},width:'30%'}),/*#__PURE__*/_jsx(Column,{title:\"Temas\",dataIndex:'word_cloud',width:'30%',render:function render(item){return/*#__PURE__*/_jsx(TinyWordCloudChart,{data:item,core:core});}})]})});};export default SubjectsTable;","map":{"version":3,"sources":["/home/manolo/sds-ui/src/components/SubjectsTable.jsx"],"names":["React","useState","useEffect","ErrorWarning","LoadingCard","SortCompendium","Card","Table","APIRequest","Link","TinyColumnChart","TinyWordCloudChart","Column","SubjectsTable","core","type","max","page","pagination","setPagination","sort","setSort","URL","state","setUrl","title","institutions","groups","isError","isLoading","backgroundColor","padding","data","record","id","total","showSizeChanger","current","pageSize","pageSizeOptions","onChange","x","item","setURL","name","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\n/* Components */\nimport ErrorWarning from './ErrorWarning';\nimport LoadingCard from './LoadingCard';\nimport SortCompendium from './SortCompendium';\n\n/* UI Library Components */\nimport { Card, Table } from 'antd';\n\n/* Utilities */\nimport { APIRequest } from '../apis/api';\nimport { Link } from 'react-router-dom';\n\n/* Charts */\nimport TinyColumnChart from './charts/TinyColumnChart';\nimport TinyWordCloudChart from './charts/TinyWordCloudChart';\n\n/* UI Library Sub-components */\nconst { Column } = Table;\n\nconst SubjectsTable = ({ core, type }) => {\n  const [pagination, setPagination] = useState({ max: 5, page: 1 });\n  const [sort, setSort] = useState('citations');\n  const [state, setUrl] = APIRequest(\n    `${core.URL}&data=${type}&max=${pagination.max}&page=${pagination.page}&sort=${sort}`\n  );\n\n  const title = { institutions: 'Institución', groups: 'Grupo' };\n\n  useEffect(() => {\n    setUrl(\n      `${core.URL}&data=${type}&max=${pagination.max}&page=${pagination.page}&sort=${sort}`\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pagination, sort, core.URL]);\n\n  if (state.isError) {\n    return <ErrorWarning />;\n  } else if (state.isLoading) {\n    return <LoadingCard />;\n  }\n  return (\n    <Card\n      size=\"small\"\n      bordered={false}\n      style={{ backgroundColor: '#fafafa' }}\n      bodyStyle={{ padding: 0 }}\n      extra={<SortCompendium sort={sort} setSort={setSort} />}\n    >\n      <Table\n        size=\"small\"\n        dataSource={state.data.data}\n        bordered\n        rowKey={(record) => record.id}\n        pagination={{\n          total: state.data.total,\n          showSizeChanger: true,\n          current: pagination.page,\n          pageSize: pagination.max,\n          pageSizeOptions: [5, 10, 15],\n          onChange: (page, max) => setPagination({ page: page, max: max }),\n        }}\n        rowClassName=\"compendium__row--height\"\n        scroll={{ x: 1400 }}\n      >\n        <Column\n          title={title[type]}\n          render={(item) => (\n            <Link\n              to={`/app/${type}?id=${item.id}`}\n              onClick={() => core.setURL(`/app/${type}?id=${item.id}`)}\n            >\n              {item.name}\n            </Link>\n          )}\n        />\n        {type === 'groups' && (\n          <Column\n            title=\"Afiliación\"\n            dataIndex={'institution'}\n            render={(item) => (\n              <Link\n                to={`/app/institutions?id=${item.id}`}\n                onClick={() => core.setURL(`/app/institutions?id=${item.id}`)}\n              >\n                {item.name}\n              </Link>\n            )}\n          />\n        )}\n        <Column\n          title=\"Citas totales\"\n          dataIndex={'citations_count'}\n          align=\"center\"\n        />\n        <Column\n          title=\"Productos totales\"\n          dataIndex={'products_count'}\n          align=\"center\"\n          style={{ fontSize: '24px' }}\n        />\n        <Column\n          title=\"Productos por año\"\n          dataIndex={'plot'}\n          render={(item) => <TinyColumnChart data={item} />}\n          width={'30%'}\n        />\n        <Column\n          title=\"Temas\"\n          dataIndex={'word_cloud'}\n          width={'30%'}\n          render={(item) => <TinyWordCloudChart data={item} core={core} />}\n        />\n      </Table>\n    </Card>\n  );\n};\n\nexport default SubjectsTable;\n"]},"metadata":{},"sourceType":"module"}