{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar _dec, _class;\n\nimport { injectable } from 'inversify';\nimport 'reflect-metadata';\nimport { TYPES } from '../../types';\nvar MarkerService = (_dec = injectable(), _dec(_class = function () {\n  function MarkerService() {\n    _classCallCheck(this, MarkerService);\n\n    _defineProperty(this, \"container\", void 0);\n\n    _defineProperty(this, \"scene\", void 0);\n\n    _defineProperty(this, \"mapsService\", void 0);\n\n    _defineProperty(this, \"markers\", []);\n\n    _defineProperty(this, \"markerLayers\", []);\n\n    _defineProperty(this, \"unAddMarkers\", []);\n\n    _defineProperty(this, \"unAddMarkerLayers\", []);\n  }\n\n  _createClass(MarkerService, [{\n    key: \"addMarkerLayer\",\n    value: function addMarkerLayer(markerLayer) {\n      if (this.mapsService.map && this.mapsService.getMarkerContainer()) {\n        this.markerLayers.push(markerLayer);\n        markerLayer.addTo(this.scene);\n      } else {\n        this.unAddMarkerLayers.push(markerLayer);\n      }\n    }\n  }, {\n    key: \"removeMarkerLayer\",\n    value: function removeMarkerLayer(layer) {\n      layer.destroy();\n      this.markerLayers.indexOf(layer);\n      var markerIndex = this.markerLayers.indexOf(layer);\n\n      if (markerIndex > -1) {\n        this.markerLayers.splice(markerIndex, 1);\n      }\n    }\n  }, {\n    key: \"addMarker\",\n    value: function addMarker(marker) {\n      if (this.mapsService.map && this.mapsService.getMarkerContainer()) {\n        this.markers.push(marker);\n        marker.addTo(this.scene);\n      } else {\n        this.unAddMarkers.push(marker);\n      }\n    }\n  }, {\n    key: \"addMarkers\",\n    value: function addMarkers() {\n      var _this = this;\n\n      this.unAddMarkers.forEach(function (marker) {\n        marker.addTo(_this.scene);\n\n        _this.markers.push(marker);\n      });\n      this.unAddMarkers = [];\n    }\n  }, {\n    key: \"addMarkerLayers\",\n    value: function addMarkerLayers() {\n      var _this2 = this;\n\n      this.unAddMarkerLayers.forEach(function (markerLayer) {\n        _this2.markerLayers.push(markerLayer);\n\n        markerLayer.addTo(_this2.scene);\n      });\n      this.unAddMarkers = [];\n    }\n  }, {\n    key: \"removeMarker\",\n    value: function removeMarker(marker) {\n      marker.remove();\n      this.markers.indexOf(marker);\n      var markerIndex = this.markers.indexOf(marker);\n\n      if (markerIndex > -1) {\n        this.markers.splice(markerIndex, 1);\n      }\n    }\n  }, {\n    key: \"removeAllMarkers\",\n    value: function removeAllMarkers() {\n      this.destroy();\n    }\n  }, {\n    key: \"init\",\n    value: function init(scene) {\n      this.scene = scene;\n      this.mapsService = scene.get(TYPES.IMapService);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.markers.forEach(function (marker) {\n        marker.remove();\n      });\n      this.markers = [];\n      this.markerLayers.forEach(function (layer) {\n        layer.destroy();\n      });\n      this.markerLayers = [];\n    }\n  }, {\n    key: \"removeMakerLayerMarker\",\n    value: function removeMakerLayerMarker(layer) {\n      layer.destroy();\n    }\n  }]);\n\n  return MarkerService;\n}()) || _class);\nexport { MarkerService as default };","map":{"version":3,"sources":["../../../src/services/component/MarkerService.ts"],"names":["injectable","MarkerService","markerLayer","layer","markerIndex","marker","scene","TYPES"],"mappings":"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","sourcesContent":["import { Container, injectable } from 'inversify';\nimport 'reflect-metadata';\nimport { TYPES } from '../../types';\nimport { IMapService } from '../map/IMapService';\nimport {\n  IMarker,\n  IMarkerLayer,\n  IMarkerService,\n  IMarkerServiceCfg,\n} from './IMarkerService';\n\n@injectable()\nexport default class MarkerService implements IMarkerService {\n  public container: HTMLElement;\n  private scene: Container;\n  private mapsService: IMapService;\n  private markers: IMarker[] = [];\n  private markerLayers: IMarkerLayer[] = [];\n  private unAddMarkers: IMarker[] = [];\n  private unAddMarkerLayers: IMarkerLayer[] = [];\n\n  public addMarkerLayer(markerLayer: IMarkerLayer): void {\n    if (this.mapsService.map && this.mapsService.getMarkerContainer()) {\n      this.markerLayers.push(markerLayer);\n      markerLayer.addTo(this.scene);\n    } else {\n      this.unAddMarkerLayers.push(markerLayer);\n    }\n  }\n\n  public removeMarkerLayer(layer: IMarkerLayer): void {\n    layer.destroy();\n    this.markerLayers.indexOf(layer);\n    const markerIndex = this.markerLayers.indexOf(layer);\n    if (markerIndex > -1) {\n      this.markerLayers.splice(markerIndex, 1);\n    }\n  }\n\n  public addMarker(marker: IMarker): void {\n    if (this.mapsService.map && this.mapsService.getMarkerContainer()) {\n      this.markers.push(marker);\n      marker.addTo(this.scene);\n    } else {\n      this.unAddMarkers.push(marker);\n    }\n  }\n\n  public addMarkers(): void {\n    this.unAddMarkers.forEach((marker: IMarker) => {\n      marker.addTo(this.scene);\n      this.markers.push(marker);\n    });\n    this.unAddMarkers = [];\n  }\n\n  public addMarkerLayers(): void {\n    this.unAddMarkerLayers.forEach((markerLayer: IMarkerLayer) => {\n      this.markerLayers.push(markerLayer);\n      markerLayer.addTo(this.scene);\n    });\n    this.unAddMarkers = [];\n  }\n\n  public removeMarker(marker: IMarker): void {\n    marker.remove();\n    this.markers.indexOf(marker);\n    const markerIndex = this.markers.indexOf(marker);\n    if (markerIndex > -1) {\n      this.markers.splice(markerIndex, 1);\n    }\n  }\n\n  public removeAllMarkers(): void {\n    this.destroy();\n  }\n\n  public init(scene: Container): void {\n    // this.container = cfg.container;\n    this.scene = scene;\n    this.mapsService = scene.get<IMapService>(TYPES.IMapService);\n  }\n  public destroy(): void {\n    this.markers.forEach((marker: IMarker) => {\n      marker.remove();\n    });\n    this.markers = [];\n    this.markerLayers.forEach((layer: IMarkerLayer) => {\n      layer.destroy();\n    });\n    this.markerLayers = [];\n  }\n\n  private removeMakerLayerMarker(layer: IMarkerLayer) {\n    layer.destroy();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}