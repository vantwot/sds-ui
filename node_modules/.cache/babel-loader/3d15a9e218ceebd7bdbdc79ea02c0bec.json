{"ast":null,"code":"import _regeneratorRuntime from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { Deferred } from '../common/deferred';\nimport { Disposable } from '../common/disposable';\nexport var NsModelServiceConfig;\n\n(function (NsModelServiceConfig) {\n  NsModelServiceConfig.CONFIG_TYPE = 'MODEL_SERVICE_CONFIG';\n})(NsModelServiceConfig || (NsModelServiceConfig = {}));\n\nvar dispoableNoop = function dispoableNoop() {\n  return Disposable.create(function () {});\n};\n\nexport var ModelServiceConfig = function ModelServiceConfig() {\n  var _this = this;\n\n  _classCallCheck(this, ModelServiceConfig);\n\n  /** CONFIG_TYPE */\n  this.CONFIG_TYPE = NsModelServiceConfig.CONFIG_TYPE;\n  /** 外部注册context的方法 */\n\n  this.registerModelFn = dispoableNoop;\n  /** CONFIG_TYPE */\n\n  this.isMounted = new Deferred();\n\n  this.registerModel = function (registerModel) {\n    _this.registerModelFn = registerModel;\n  };\n\n  this.setMountState = function () {\n    _this.isMounted.resolve(true);\n  };\n\n  this.getConfig = function () {\n    return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.isMounted.promise;\n\n            case 2:\n              return _context.abrupt(\"return\", {\n                CONFIG_TYPE: this.CONFIG_TYPE,\n                modelRegisterFunc: this.registerModelFn || dispoableNoop\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n  };\n\n  this.dispose = function () {\n    _this.registerModelFn = dispoableNoop;\n    _this.isMounted = new Deferred();\n  };\n};","map":{"version":3,"sources":["../../src/model-service/config.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,QAAT,QAAyB,oBAAzB;AACA,SAAS,UAAT,QAA2B,sBAA3B;AAIA,OAAM,IAAW,oBAAX;;AAAN,CAAA,UAAiB,oBAAjB,EAAqC;AACtB,EAAA,oBAAA,CAAA,WAAA,GAAc,sBAAd;AACd,CAFD,EAAiB,oBAAoB,KAApB,oBAAoB,GAAA,EAAA,CAArC;;AAIA,IAAM,aAAa,GAAG,SAAhB,aAAgB;AAAA,SAAM,UAAU,CAAC,MAAX,CAAkB,YAAK,CAAG,CAA1B,CAAN;AAAA,CAAtB;;AAEA,WAAa,kBAAb,GAAA,8BAAA;AAAA;;AAAA;;AACE;AACS,OAAA,WAAA,GAAc,oBAAoB,CAAC,WAAnC;AAET;;AACQ,OAAA,eAAA,GAA2C,aAA3C;AAER;;AACQ,OAAA,SAAA,GAAY,IAAI,QAAJ,EAAZ;;AAER,OAAA,aAAA,GAAgB,UAAC,aAAD,EAA0C;AACxD,IAAA,KAAI,CAAC,eAAL,GAAuB,aAAvB;AACD,GAFD;;AAIA,OAAA,aAAA,GAAgB,YAAK;AACnB,IAAA,KAAI,CAAC,SAAL,CAAe,OAAf,CAAuB,IAAvB;AACD,GAFD;;AAIA,OAAA,SAAA,GAAY;AAAA,WAAW,SAAA,CAAA,KAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,wCAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACrB,qBAAM,KAAK,SAAL,CAAe,OAArB;;AADqB;AAAA,+CAEd;AACL,gBAAA,WAAW,EAAE,KAAK,WADb;AAEL,gBAAA,iBAAiB,EAAE,KAAK,eAAL,IAAwB;AAFtC,eAFc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAA,EAAX;AAAA,GAAZ;;AAQA,OAAA,OAAA,GAAU,YAAK;AACb,IAAA,KAAI,CAAC,eAAL,GAAuB,aAAvB;AACA,IAAA,KAAI,CAAC,SAAL,GAAiB,IAAI,QAAJ,EAAjB;AACD,GAHD;AAID,CA9BD","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Deferred } from '../common/deferred';\nimport { Disposable } from '../common/disposable';\nexport var NsModelServiceConfig;\n(function (NsModelServiceConfig) {\n    NsModelServiceConfig.CONFIG_TYPE = 'MODEL_SERVICE_CONFIG';\n})(NsModelServiceConfig || (NsModelServiceConfig = {}));\nconst dispoableNoop = () => Disposable.create(() => { });\nexport class ModelServiceConfig {\n    constructor() {\n        /** CONFIG_TYPE */\n        this.CONFIG_TYPE = NsModelServiceConfig.CONFIG_TYPE;\n        /** 外部注册context的方法 */\n        this.registerModelFn = dispoableNoop;\n        /** CONFIG_TYPE */\n        this.isMounted = new Deferred();\n        this.registerModel = (registerModel) => {\n            this.registerModelFn = registerModel;\n        };\n        this.setMountState = () => {\n            this.isMounted.resolve(true);\n        };\n        this.getConfig = () => __awaiter(this, void 0, void 0, function* () {\n            yield this.isMounted.promise;\n            return {\n                CONFIG_TYPE: this.CONFIG_TYPE,\n                modelRegisterFunc: this.registerModelFn || dispoableNoop,\n            };\n        });\n        this.dispose = () => {\n            this.registerModelFn = dispoableNoop;\n            this.isMounted = new Deferred();\n        };\n    }\n}\n//# sourceMappingURL=config.js.map"]},"metadata":{},"sourceType":"module"}