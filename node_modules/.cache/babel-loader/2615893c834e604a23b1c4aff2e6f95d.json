{"ast":null,"code":"import _slicedToArray from\"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';/* Components */import ErrorWarning from'./ErrorWarning';import LoadingCard from'./LoadingCard';import SortCompendium from'./SortCompendium';import InfoButton from'./infoButton';/* UI Library Components */import{Card,List,Row,Table}from'antd';/* Utilities */import{APIRequest}from'../apis/api';import{useLocation}from'react-router';import{Link}from'react-router-dom';/* Charts */import TinyColumnChart from'./charts/TinyColumnChart';import TinyWordCloudChart from'./charts/TinyWordCloudChart';/* UI Library Sub-components */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Column=Table.Column;var CompendiumTable=function CompendiumTable(_ref){var core=_ref.core,type=_ref.type;var _useState=useState({page:1,max:5}),_useState2=_slicedToArray(_useState,2),pagination=_useState2[0],setPagination=_useState2[1];var _useState3=useState('citations'),_useState4=_slicedToArray(_useState3,2),sort=_useState4[0],setSort=_useState4[1];var location=useLocation();var policies_flag=location.pathname==='/app/policies';var URL=new URLSearchParams(location.search);URL.delete('data');URL.set('data',type);var _APIRequest=APIRequest(\"\".concat(location.pathname,\"?\").concat(URL.toString(),\"&page=\").concat(pagination.page,\"&max=\").concat(pagination.max,\"&sort=\").concat(sort)),_APIRequest2=_slicedToArray(_APIRequest,2),state=_APIRequest2[0],setUrl=_APIRequest2[1];var title={groups:'Grupo de investigación',institutions:'Institución',subjects:'Tema'};var onPageChange=function onPageChange(_ref2){var page=_ref2.page,max=_ref2.max;setPagination({page:page,max:max});window.scrollTo(0,0);};useEffect(function(){setUrl(\"\".concat(location.pathname,\"?\").concat(URL.toString(),\"&page=\").concat(pagination.page,\"&max=\").concat(pagination.max,\"&sort=\").concat(sort));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[pagination,sort,core.URL]);if(state.isError){return/*#__PURE__*/_jsx(ErrorWarning,{});}else if(state.isLoading){return/*#__PURE__*/_jsx(LoadingCard,{});}if(type==='subjects'){return/*#__PURE__*/_jsx(Card,{size:\"small\",bordered:false,style:{backgroundColor:'#fafafa'},bodyStyle:{padding:0},extra:/*#__PURE__*/_jsx(SortCompendium,{sort:sort,setSort:setSort}),children:/*#__PURE__*/_jsxs(Table,{size:\"small\",dataSource:state.data.data,bordered:true,rowKey:function rowKey(record){return record.id;},pagination:{total:state.data.total,showSizeChanger:true,current:pagination.page,pageSize:pagination.max,pageSizeOptions:[5,10,15],onChange:function onChange(page,max){return onPageChange({page:page,max:max});}},rowClassName:\"compendium__row--height\",scroll:{x:1300},children:[!policies_flag&&/*#__PURE__*/_jsx(Column,{align:\"center\",title:\"Puesto\",dataIndex:\"index\",render:function render(index){return/*#__PURE__*/_jsx(\"b\",{children:index});}}),/*#__PURE__*/_jsx(Column,{title:title[type],render:function render(item){return/*#__PURE__*/_jsx(Link,{to:\"/app/\".concat(type,\"?id=\").concat(item.id),onClick:function onClick(){return core.setURL(\"/app/\".concat(type,\"?id=\").concat(item.id));},children:item.name});}}),/*#__PURE__*/_jsx(Column,{title:\"Productos totales\",dataIndex:'products_count'}),/*#__PURE__*/_jsx(Column,{title:\"Citas totales\",dataIndex:'citations_count'}),/*#__PURE__*/_jsx(Column,{width:'18%',title:\"Instituciones\",dataIndex:'institutions',render:function render(institutionsList){return/*#__PURE__*/_jsx(List,{size:\"small\",dataSource:institutionsList,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{style:{paddingTop:'3px',paddingBottom:'3px'},children:/*#__PURE__*/_jsx(Link,{to:\"/app/institutions?id=\".concat(item.id),onClick:function onClick(){return core.setURL(\"/app/institutions?id=\".concat(item.id));},children:item.name})});}});}}),/*#__PURE__*/_jsx(Column,{width:'18%',title:\"Grupos\",dataIndex:'groups',render:function render(groupsList){return/*#__PURE__*/_jsx(List,{size:\"small\",dataSource:groupsList,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(Link,{to:\"/app/groups?id=\".concat(item.id),onClick:function onClick(){return core.setURL(\"/app/groups?id=\".concat(item.id));},children:item.name})});}});}}),/*#__PURE__*/_jsx(Column,{width:'18%',title:\"Autores\",dataIndex:'authors',render:function render(authorsList){return/*#__PURE__*/_jsx(List,{size:\"small\",dataSource:authorsList,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(Link,{to:\"/app/authors?id=\".concat(item.id),onClick:function onClick(){return core.setURL(\"/app/authors?id=\".concat(item.id));},children:item.name})});}});}}),/*#__PURE__*/_jsx(Column,{title:function title(){return/*#__PURE__*/_jsxs(Row,{justify:\"space-between\",align:\"middle\",children:[\"Productos por a\\xF1os\",/*#__PURE__*/_jsx(\"div\",{id:\"table__infoButton\",children:/*#__PURE__*/_jsx(InfoButton,{title:\"Productos por a\\xF1o\",type:'columnLine'})})]});},dataIndex:'plot',render:function render(item){return/*#__PURE__*/_jsx(TinyColumnChart,{data:item});},width:'30%'})]})});}return/*#__PURE__*/_jsx(Card,{size:\"small\",bordered:false,style:{backgroundColor:'#fafafa'},bodyStyle:{padding:0},extra:/*#__PURE__*/_jsx(SortCompendium,{sort:sort,setSort:setSort}),children:/*#__PURE__*/_jsxs(Table,{size:\"small\",dataSource:state.data.data,bordered:true,rowKey:function rowKey(record){return record.id;},pagination:{total:state.data.total,showSizeChanger:true,current:pagination.page,pageSize:pagination.max,pageSizeOptions:[5,10,15],onChange:function onChange(page,max){return onPageChange({page:page,max:max});}},rowClassName:\"compendium__row--height\",scroll:{x:1300},children:[!policies_flag&&/*#__PURE__*/_jsx(Column,{align:\"center\",title:\"Puesto\",dataIndex:\"index\",render:function render(index){return/*#__PURE__*/_jsx(\"b\",{children:index});}}),/*#__PURE__*/_jsx(Column,{title:title[type],render:function render(item){return/*#__PURE__*/_jsx(Link,{to:\"/app/\".concat(type,\"?id=\").concat(item.id),onClick:function onClick(){return core.setURL(\"/app/\".concat(type,\"?id=\").concat(item.id));},children:item.name});}}),type!=='institutions'?/*#__PURE__*/_jsx(Column,{title:\"Afiliaci\\xF3n\",dataIndex:'affiliations',render:function render(item){var _item$institution;return/*#__PURE__*/_jsx(Link,{to:\"/app/institutions?id=\".concat((_item$institution=item.institution)===null||_item$institution===void 0?void 0:_item$institution.id),onClick:function onClick(){return core.setURL(\"/app/institutions?id=\".concat(item.institution.id));},children:item.institution.name});}}):'',/*#__PURE__*/_jsx(Column,{title:\"Productos totales\",dataIndex:'products_count'}),/*#__PURE__*/_jsx(Column,{title:\"Citas totales\",dataIndex:'citations_count'}),/*#__PURE__*/_jsx(Column,{title:function title(){return/*#__PURE__*/_jsxs(Row,{justify:\"space-between\",align:\"middle\",children:[\"Productos por a\\xF1os\",/*#__PURE__*/_jsx(\"div\",{id:\"table__infoButton\",children:/*#__PURE__*/_jsx(InfoButton,{title:\"Productos por a\\xF1o\",type:'columnLine'})})]});},dataIndex:'plot',render:function render(item){return/*#__PURE__*/_jsx(TinyColumnChart,{Chart:true,data:item});},width:'30%'}),/*#__PURE__*/_jsx(Column,{title:\"Temas\",dataIndex:'subjects',width:'30%',render:function render(item){return/*#__PURE__*/_jsx(TinyWordCloudChart,{data:item,core:core});}})]})});};export default CompendiumTable;","map":{"version":3,"sources":["/home/manolo/sds-ui/src/components/CompendiumTable.jsx"],"names":["React","useEffect","useState","ErrorWarning","LoadingCard","SortCompendium","InfoButton","Card","List","Row","Table","APIRequest","useLocation","Link","TinyColumnChart","TinyWordCloudChart","Column","CompendiumTable","core","type","page","max","pagination","setPagination","sort","setSort","location","policies_flag","pathname","URL","URLSearchParams","search","delete","set","toString","state","setUrl","title","groups","institutions","subjects","onPageChange","window","scrollTo","isError","isLoading","backgroundColor","padding","data","record","id","total","showSizeChanger","current","pageSize","pageSizeOptions","onChange","x","index","item","setURL","name","institutionsList","paddingTop","paddingBottom","groupsList","authorsList","institution"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\n\n/* Components */\nimport ErrorWarning from './ErrorWarning';\nimport LoadingCard from './LoadingCard';\nimport SortCompendium from './SortCompendium';\nimport InfoButton from './infoButton';\n\n/* UI Library Components */\nimport { Card, List, Row, Table } from 'antd';\n\n/* Utilities */\nimport { APIRequest } from '../apis/api';\nimport { useLocation } from 'react-router';\nimport { Link } from 'react-router-dom';\n\n/* Charts */\nimport TinyColumnChart from './charts/TinyColumnChart';\nimport TinyWordCloudChart from './charts/TinyWordCloudChart';\n\n/* UI Library Sub-components */\nconst { Column } = Table;\n\nconst CompendiumTable = ({ core, type }) => {\n  const [pagination, setPagination] = useState({ page: 1, max: 5 });\n  const [sort, setSort] = useState('citations');\n  const location = useLocation();\n  let policies_flag = location.pathname === '/app/policies';\n  let URL = new URLSearchParams(location.search);\n  URL.delete('data');\n  URL.set('data', type);\n\n  const [state, setUrl] = APIRequest(\n    `${location.pathname}?${URL.toString()}&page=${pagination.page}&max=${\n      pagination.max\n    }&sort=${sort}`\n  );\n\n  const title = {\n    groups: 'Grupo de investigación',\n    institutions: 'Institución',\n    subjects: 'Tema',\n  };\n\n  const onPageChange = ({ page, max }) => {\n    setPagination({ page: page, max: max });\n    window.scrollTo(0, 0);\n  };\n\n  useEffect(() => {\n    setUrl(\n      `${location.pathname}?${URL.toString()}&page=${pagination.page}&max=${\n        pagination.max\n      }&sort=${sort}`\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pagination, sort, core.URL]);\n\n  if (state.isError) {\n    return <ErrorWarning />;\n  } else if (state.isLoading) {\n    return <LoadingCard />;\n  }\n  if (type === 'subjects') {\n    return (\n      <Card\n        size=\"small\"\n        bordered={false}\n        style={{ backgroundColor: '#fafafa' }}\n        bodyStyle={{ padding: 0 }}\n        extra={<SortCompendium sort={sort} setSort={setSort} />}\n      >\n        <Table\n          size=\"small\"\n          dataSource={state.data.data}\n          bordered\n          rowKey={(record) => record.id}\n          pagination={{\n            total: state.data.total,\n            showSizeChanger: true,\n            current: pagination.page,\n            pageSize: pagination.max,\n            pageSizeOptions: [5, 10, 15],\n            onChange: (page, max) => onPageChange({ page: page, max: max }),\n          }}\n          rowClassName=\"compendium__row--height\"\n          scroll={{ x: 1300 }}\n        >\n          {!policies_flag && (\n            <Column\n              align=\"center\"\n              title=\"Puesto\"\n              dataIndex=\"index\"\n              render={(index) => <b>{index}</b>}\n            />\n          )}\n          <Column\n            title={title[type]}\n            render={(item) => (\n              <Link\n                to={`/app/${type}?id=${item.id}`}\n                onClick={() => core.setURL(`/app/${type}?id=${item.id}`)}\n              >\n                {item.name}\n              </Link>\n            )}\n          />\n          <Column title=\"Productos totales\" dataIndex={'products_count'} />\n          <Column title=\"Citas totales\" dataIndex={'citations_count'} />\n          <Column\n            width={'18%'}\n            title=\"Instituciones\"\n            dataIndex={'institutions'}\n            render={(institutionsList) => (\n              <List\n                size=\"small\"\n                dataSource={institutionsList}\n                renderItem={(item) => (\n                  <List.Item\n                    style={{ paddingTop: '3px', paddingBottom: '3px' }}\n                  >\n                    <Link\n                      to={`/app/institutions?id=${item.id}`}\n                      onClick={() =>\n                        core.setURL(`/app/institutions?id=${item.id}`)\n                      }\n                    >\n                      {item.name}\n                    </Link>\n                  </List.Item>\n                )}\n              />\n            )}\n          />\n          <Column\n            width={'18%'}\n            title=\"Grupos\"\n            dataIndex={'groups'}\n            render={(groupsList) => (\n              <List\n                size=\"small\"\n                dataSource={groupsList}\n                renderItem={(item) => (\n                  <List.Item>\n                    <Link\n                      to={`/app/groups?id=${item.id}`}\n                      onClick={() => core.setURL(`/app/groups?id=${item.id}`)}\n                    >\n                      {item.name}\n                    </Link>\n                  </List.Item>\n                )}\n              />\n            )}\n          />\n          <Column\n            width={'18%'}\n            title=\"Autores\"\n            dataIndex={'authors'}\n            render={(authorsList) => (\n              <List\n                size=\"small\"\n                dataSource={authorsList}\n                renderItem={(item) => (\n                  <List.Item>\n                    <Link\n                      to={`/app/authors?id=${item.id}`}\n                      onClick={() => core.setURL(`/app/authors?id=${item.id}`)}\n                    >\n                      {item.name}\n                    </Link>\n                  </List.Item>\n                )}\n              />\n            )}\n          />\n          <Column\n            title={() => {\n              return (\n                <Row justify=\"space-between\" align=\"middle\">\n                  Productos por años\n                  <div id=\"table__infoButton\">\n                    <InfoButton title=\"Productos por año\" type={'columnLine'} />\n                  </div>\n                </Row>\n              );\n            }}\n            dataIndex={'plot'}\n            render={(item) => <TinyColumnChart data={item} />}\n            width={'30%'}\n          />\n        </Table>\n      </Card>\n    );\n  }\n  return (\n    <Card\n      size=\"small\"\n      bordered={false}\n      style={{ backgroundColor: '#fafafa' }}\n      bodyStyle={{ padding: 0 }}\n      extra={<SortCompendium sort={sort} setSort={setSort} />}\n    >\n      <Table\n        size=\"small\"\n        dataSource={state.data.data}\n        bordered\n        rowKey={(record) => record.id}\n        pagination={{\n          total: state.data.total,\n          showSizeChanger: true,\n          current: pagination.page,\n          pageSize: pagination.max,\n          pageSizeOptions: [5, 10, 15],\n          onChange: (page, max) => onPageChange({ page: page, max: max }),\n        }}\n        rowClassName=\"compendium__row--height\"\n        scroll={{ x: 1300 }}\n      >\n        {!policies_flag && (\n          <Column\n            align=\"center\"\n            title=\"Puesto\"\n            dataIndex=\"index\"\n            render={(index) => <b>{index}</b>}\n          />\n        )}\n        <Column\n          title={title[type]}\n          render={(item) => (\n            <Link\n              to={`/app/${type}?id=${item.id}`}\n              onClick={() => core.setURL(`/app/${type}?id=${item.id}`)}\n            >\n              {item.name}\n            </Link>\n          )}\n        />\n        {type !== 'institutions' ? (\n          <Column\n            title=\"Afiliación\"\n            dataIndex={'affiliations'}\n            render={(item) => (\n              <Link\n                to={`/app/institutions?id=${item.institution?.id}`}\n                onClick={() =>\n                  core.setURL(`/app/institutions?id=${item.institution.id}`)\n                }\n              >\n                {item.institution.name}\n              </Link>\n            )}\n          />\n        ) : (\n          ''\n        )}\n        <Column title=\"Productos totales\" dataIndex={'products_count'} />\n        <Column title=\"Citas totales\" dataIndex={'citations_count'} />\n        <Column\n          title={() => {\n            return (\n              <Row justify=\"space-between\" align=\"middle\">\n                Productos por años\n                <div id=\"table__infoButton\">\n                  <InfoButton title=\"Productos por año\" type={'columnLine'} />\n                </div>\n              </Row>\n            );\n          }}\n          dataIndex={'plot'}\n          render={(item) => <TinyColumnChart Chart data={item} />}\n          width={'30%'}\n        />\n        <Column\n          title=\"Temas\"\n          dataIndex={'subjects'}\n          width={'30%'}\n          render={(item) => <TinyWordCloudChart data={item} core={core} />}\n        />\n      </Table>\n    </Card>\n  );\n};\n\nexport default CompendiumTable;\n"]},"metadata":{},"sourceType":"module"}