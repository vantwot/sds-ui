{"ast":null,"code":"import _regeneratorRuntime from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { IconStore, MODELS, XFlowGraphCommands } from '@antv/xflow-core';\nimport { ZoomInOutlined, ZoomOutOutlined, OneToOneOutlined, CompressOutlined } from '@ant-design/icons';\nimport { createToolbarConfig } from '../canvas-toolbar';\nexport var CANVAS_SCALE_TOOLBAR_CONFIG;\n\n(function (CANVAS_SCALE_TOOLBAR_CONFIG) {\n  IconStore.set('ZoomInOutlined', ZoomInOutlined);\n  IconStore.set('ZoomOutOutlined', ZoomOutOutlined);\n  IconStore.set('OneToOneOutlined', OneToOneOutlined);\n  IconStore.set('CompressOutlined', CompressOutlined);\n  CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_IN = XFlowGraphCommands.GRAPH_ZOOM.id + '-zoom-in';\n  CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_OUT = XFlowGraphCommands.GRAPH_ZOOM.id + '-zoom-out';\n  CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_ONE = XFlowGraphCommands.GRAPH_ZOOM.id + '-scale-to-one';\n  CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_FIT = XFlowGraphCommands.GRAPH_ZOOM.id + '-scale-to-fit';\n  CANVAS_SCALE_TOOLBAR_CONFIG.MAX_SCALE = 1.5;\n  CANVAS_SCALE_TOOLBAR_CONFIG.MIN_SCALE = 0.05;\n  CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions = {\n    maxScale: CANVAS_SCALE_TOOLBAR_CONFIG.MAX_SCALE,\n    minScale: CANVAS_SCALE_TOOLBAR_CONFIG.MIN_SCALE\n  };\n\n  CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig = function (zoomFactor) {\n    return [{\n      name: 'main',\n      items: [{\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_IN,\n        tooltip: '放大',\n        iconName: 'ZoomInOutlined',\n        onClick: function onClick(_ref) {\n          var commandService = _ref.commandService;\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: 0.1,\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_OUT,\n        tooltip: '缩小',\n        iconName: 'ZoomOutOutlined',\n        onClick: function onClick(_ref2) {\n          var commandService = _ref2.commandService;\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: -0.1,\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_ONE,\n        iconName: 'OneToOneOutlined',\n        tooltip: '缩放到1:1',\n        isEnabled: zoomFactor !== 1,\n        onClick: function onClick(_ref3) {\n          var commandService = _ref3.commandService;\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: 'real',\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_FIT,\n        tooltip: '缩放到适应屏幕',\n        iconName: 'CompressOutlined',\n        onClick: function onClick(_ref4) {\n          var commandService = _ref4.commandService;\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: 'fit',\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }]\n    }];\n  };\n})(CANVAS_SCALE_TOOLBAR_CONFIG || (CANVAS_SCALE_TOOLBAR_CONFIG = {}));\n\nexport var TOOLBAR_TYPE = 'CANVAS_SCALE_TOOLBAR';\nexport var useConfig = createToolbarConfig(function (config) {\n  config.setToolbarModelService(function (model, modelService) {\n    return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var graphScale, graphScaleModel;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return MODELS.GRAPH_SCALE.useValue(modelService);\n\n            case 2:\n              graphScale = _context.sent;\n\n              /** 设置初始值*/\n              model.setValue(function (m) {\n                m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig(graphScale.zoomFactor);\n              });\n              _context.next = 6;\n              return MODELS.GRAPH_SCALE.getModel(modelService);\n\n            case 6:\n              graphScaleModel = _context.sent;\n\n              /** graphScaleModel更新时联动 Toolbar*/\n              graphScaleModel.watch(function (_ref5) {\n                var zoomFactor = _ref5.zoomFactor;\n                model.setValue(function (m) {\n                  m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig(zoomFactor);\n                });\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n  });\n});","map":{"version":3,"sources":["../../src/canvas-scale-toolbar/config.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { IconStore, MODELS, XFlowGraphCommands } from '@antv/xflow-core';\nimport { ZoomInOutlined, ZoomOutOutlined, OneToOneOutlined, CompressOutlined, } from '@ant-design/icons';\nimport { createToolbarConfig } from '../canvas-toolbar';\nexport var CANVAS_SCALE_TOOLBAR_CONFIG;\n(function (CANVAS_SCALE_TOOLBAR_CONFIG) {\n    IconStore.set('ZoomInOutlined', ZoomInOutlined);\n    IconStore.set('ZoomOutOutlined', ZoomOutOutlined);\n    IconStore.set('OneToOneOutlined', OneToOneOutlined);\n    IconStore.set('CompressOutlined', CompressOutlined);\n    CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_IN = XFlowGraphCommands.GRAPH_ZOOM.id + '-zoom-in';\n    CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_OUT = XFlowGraphCommands.GRAPH_ZOOM.id + '-zoom-out';\n    CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_ONE = XFlowGraphCommands.GRAPH_ZOOM.id + '-scale-to-one';\n    CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_FIT = XFlowGraphCommands.GRAPH_ZOOM.id + '-scale-to-fit';\n    CANVAS_SCALE_TOOLBAR_CONFIG.MAX_SCALE = 1.5;\n    CANVAS_SCALE_TOOLBAR_CONFIG.MIN_SCALE = 0.05;\n    CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions = {\n        maxScale: CANVAS_SCALE_TOOLBAR_CONFIG.MAX_SCALE,\n        minScale: CANVAS_SCALE_TOOLBAR_CONFIG.MIN_SCALE,\n    };\n    CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig = (zoomFactor) => {\n        return [\n            {\n                name: 'main',\n                items: [\n                    {\n                        id: CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_IN,\n                        tooltip: '放大',\n                        iconName: 'ZoomInOutlined',\n                        onClick: ({ commandService }) => {\n                            commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n                                factor: 0.1,\n                                zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions,\n                            });\n                        },\n                    },\n                    {\n                        id: CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_OUT,\n                        tooltip: '缩小',\n                        iconName: 'ZoomOutOutlined',\n                        onClick: ({ commandService }) => {\n                            commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n                                factor: -0.1,\n                                zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions,\n                            });\n                        },\n                    },\n                    {\n                        id: CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_ONE,\n                        iconName: 'OneToOneOutlined',\n                        tooltip: '缩放到1:1',\n                        isEnabled: zoomFactor !== 1,\n                        onClick: ({ commandService }) => {\n                            commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n                                factor: 'real',\n                                zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions,\n                            });\n                        },\n                    },\n                    {\n                        id: CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_FIT,\n                        tooltip: '缩放到适应屏幕',\n                        iconName: 'CompressOutlined',\n                        onClick: ({ commandService }) => {\n                            commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n                                factor: 'fit',\n                                zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions,\n                            });\n                        },\n                    },\n                ],\n            },\n        ];\n    };\n})(CANVAS_SCALE_TOOLBAR_CONFIG || (CANVAS_SCALE_TOOLBAR_CONFIG = {}));\nexport const TOOLBAR_TYPE = 'CANVAS_SCALE_TOOLBAR';\nexport const useConfig = createToolbarConfig(config => {\n    config.setToolbarModelService((model, modelService) => __awaiter(void 0, void 0, void 0, function* () {\n        const graphScale = yield MODELS.GRAPH_SCALE.useValue(modelService);\n        /** 设置初始值*/\n        model.setValue(m => {\n            m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig(graphScale.zoomFactor);\n        });\n        const graphScaleModel = yield MODELS.GRAPH_SCALE.getModel(modelService);\n        /** graphScaleModel更新时联动 Toolbar*/\n        graphScaleModel.watch(({ zoomFactor }) => {\n            model.setValue(m => {\n                m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig(zoomFactor);\n            });\n        });\n    }));\n});\n//# sourceMappingURL=config.js.map"]},"metadata":{},"sourceType":"module"}