{"ast":null,"code":"import _regeneratorRuntime from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { DisposableCollection, Disposable } from '../../common/disposable';\nimport { HookConfig } from '../config';\nimport { singleton, inject } from 'mana-syringe';\nimport { IHookContribution } from '../interface';\nexport var NsGraphEventPlugin;\n\n(function (NsGraphEventPlugin) {\n  NsGraphEventPlugin.pluginId = 'GraphEventPlugin';\n})(NsGraphEventPlugin || (NsGraphEventPlugin = {}));\n/**\n * 内置的hook contribution\n * 处理 config上的runtime的注册项\n */\n\n\nvar RuntimeContribution = function RuntimeContribution() {\n  var _this = this;\n\n  _classCallCheck(this, RuntimeContribution);\n\n  this.toDispose = new DisposableCollection();\n\n  this.registerHook = function (hooks) {\n    return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$this$hookConfi, hookRegisterFn, d;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.hookConfig.getConfig();\n\n            case 2:\n              _yield$this$hookConfi = _context.sent;\n              hookRegisterFn = _yield$this$hookConfi.hookRegisterFn;\n              d = hookRegisterFn(hooks);\n              return _context.abrupt(\"return\", Disposable.create(function () {\n                d.dispose();\n              }));\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n  };\n\n  this.registerHookHub = function (registry) {\n    return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _yield$this$hookConfi2, hookhubRegisterFn, d;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.hookConfig.getConfig();\n\n            case 2:\n              _yield$this$hookConfi2 = _context2.sent;\n              hookhubRegisterFn = _yield$this$hookConfi2.hookhubRegisterFn;\n              d = hookhubRegisterFn(registry);\n              return _context2.abrupt(\"return\", Disposable.create(function () {\n                d.dispose();\n              }));\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n  };\n};\n\n__decorate([inject(HookConfig), __metadata(\"design:type\", HookConfig)], RuntimeContribution.prototype, \"hookConfig\", void 0);\n\nRuntimeContribution = __decorate([singleton({\n  contrib: IHookContribution\n})], RuntimeContribution);\nexport { RuntimeContribution };","map":{"version":3,"sources":["../../../src/hooks/contributions/default.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,oBAAT,EAA+B,UAA/B,QAAiD,yBAAjD;AACA,SAAS,UAAT,QAA2B,WAA3B;AAEA,SAAS,SAAT,EAAoB,MAApB,QAAkC,cAAlC;AAEA,SAAS,iBAAT,QAAkC,cAAlC;AACA,OAAM,IAAW,kBAAX;;AAAN,CAAA,UAAiB,kBAAjB,EAAmC;AACpB,EAAA,kBAAA,CAAA,QAAA,GAAW,kBAAX;AACd,CAFD,EAAiB,kBAAkB,KAAlB,kBAAkB,GAAA,EAAA,CAAnC;AAIA;;;AAGG;;;AAEH,IAAa,mBAAb,GAAA,+BAAA;AAAA;;AAAA;;AACE,OAAA,SAAA,GAAY,IAAI,oBAAJ,EAAZ;;AAKA,OAAA,YAAA,GAAe,UAAM,KAAN;AAAA,WAAc,SAAA,CAAA,KAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,wCAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,qBAAM,KAAK,UAAL,CAAgB,SAAhB,EAAN;;AADA;AAAA;AACnB,cAAA,cADmB,yBACnB,cADmB;AAErB,cAAA,CAFqB,GAEjB,cAAc,CAAC,KAAD,CAFG;AAAA,+CAGpB,UAAU,CAAC,MAAX,CAAkB,YAAK;AAC5B,gBAAA,CAAC,CAAC,OAAF;AACD,eAFM,CAHoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAA,EAAd;AAAA,GAAf;;AAQA,OAAA,eAAA,GAAkB,UAAO,QAAP;AAAA,WAAyC,SAAA,CAAA,KAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,wCAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAC3B,qBAAM,KAAK,UAAL,CAAgB,SAAhB,EAAN;;AAD2B;AAAA;AACjD,cAAA,iBADiD,0BACjD,iBADiD;AAEnD,cAAA,CAFmD,GAE/C,iBAAiB,CAAC,QAAD,CAF8B;AAAA,gDAGlD,UAAU,CAAC,MAAX,CAAkB,YAAK;AAC5B,gBAAA,CAAC,CAAC,OAAF;AACD,eAFM,CAHkD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAA,EAAzC;AAAA,GAAlB;AAOD,CArBD;;AAIsB,UAAA,CAAA,CAAnB,MAAM,CAAC,UAAD,CAAa,E,0BAAY,U,CAAZ,CAAA,E,6BAAA,E,YAAA,E,KAAsB,CAAtB,CAAA;;AAJT,mBAAmB,GAAA,UAAA,CAAA,CAD/B,SAAS,CAAC;AAAE,EAAA,OAAO,EAAE;AAAX,CAAD,CACsB,CAAA,EAAnB,mBAAmB,CAAnB;SAAA,mB","sourceRoot":"","sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DisposableCollection, Disposable } from '../../common/disposable';\nimport { HookConfig } from '../config';\nimport { singleton, inject } from 'mana-syringe';\nimport { IHookContribution } from '../interface';\nexport var NsGraphEventPlugin;\n(function (NsGraphEventPlugin) {\n    NsGraphEventPlugin.pluginId = 'GraphEventPlugin';\n})(NsGraphEventPlugin || (NsGraphEventPlugin = {}));\n/**\n * 内置的hook contribution\n * 处理 config上的runtime的注册项\n */\nlet RuntimeContribution = class RuntimeContribution {\n    constructor() {\n        this.toDispose = new DisposableCollection();\n        this.registerHook = (hooks) => __awaiter(this, void 0, void 0, function* () {\n            const { hookRegisterFn } = yield this.hookConfig.getConfig();\n            const d = hookRegisterFn(hooks);\n            return Disposable.create(() => {\n                d.dispose();\n            });\n        });\n        this.registerHookHub = (registry) => __awaiter(this, void 0, void 0, function* () {\n            const { hookhubRegisterFn } = yield this.hookConfig.getConfig();\n            const d = hookhubRegisterFn(registry);\n            return Disposable.create(() => {\n                d.dispose();\n            });\n        });\n    }\n};\n__decorate([\n    inject(HookConfig),\n    __metadata(\"design:type\", HookConfig)\n], RuntimeContribution.prototype, \"hookConfig\", void 0);\nRuntimeContribution = __decorate([\n    singleton({ contrib: IHookContribution })\n], RuntimeContribution);\nexport { RuntimeContribution };\n//# sourceMappingURL=default.js.map"]},"metadata":{},"sourceType":"module"}