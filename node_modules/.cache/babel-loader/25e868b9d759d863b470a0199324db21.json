{"ast":null,"code":"import { useEffect, useState } from 'react';\nimport { Log } from '../util';\n\nvar useFullscreen = function useFullscreen(el) {\n  var _a = useState(false),\n      fullscreen = _a[0],\n      setFullscreen = _a[1];\n\n  var handleFullScreenChange = function handleFullScreenChange() {\n    // if exit fullscreen\n    if (!document.fullscreenElement) {\n      setFullscreen(false);\n    }\n  };\n\n  var enterFullscreen = function enterFullscreen() {\n    if (el && el.requestFullscreen) {\n      el.requestFullscreen().then(function () {\n        setFullscreen(true);\n      }).catch(function (err) {\n        Log.error('requestFullscreen error: ', err);\n      });\n    }\n  };\n\n  var exitFullscreen = function exitFullscreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen().then(function () {\n        setFullscreen(false);\n      }).catch(function (err) {\n        Log.error('exitFullscreen error: ', err);\n      });\n    }\n  };\n\n  var toggleFullscreen = function toggleFullscreen() {\n    // 切换是否全屏\n    if (!el) {\n      Log.error('need dom');\n      return;\n    }\n\n    if (!fullscreen) {\n      enterFullscreen();\n    } else {\n      exitFullscreen();\n    }\n  };\n\n  useEffect(function () {\n    // 用户按Esc键退出全屏 或者 退出全屏都会触发这个事件\n    document.addEventListener('fullscreenchange', handleFullScreenChange, false);\n    return function () {\n      document.removeEventListener('fullscreenchange', handleFullScreenChange);\n    };\n  }, []);\n  return [fullscreen, toggleFullscreen];\n};\n\nexport default useFullscreen;","map":{"version":3,"sources":["/home/manolo/sds-ui/node_modules/@ant-design/flowchart/es/hooks/useFullscreen.js"],"names":["useEffect","useState","Log","useFullscreen","el","_a","fullscreen","setFullscreen","handleFullScreenChange","document","fullscreenElement","enterFullscreen","requestFullscreen","then","catch","err","error","exitFullscreen","toggleFullscreen","addEventListener","removeEventListener"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,GAAT,QAAoB,SAApB;;AACA,IAAIC,aAAa,GAAG,SAAhBA,aAAgB,CAAUC,EAAV,EAAc;AAC9B,MAAIC,EAAE,GAAGJ,QAAQ,CAAC,KAAD,CAAjB;AAAA,MAA0BK,UAAU,GAAGD,EAAE,CAAC,CAAD,CAAzC;AAAA,MAA8CE,aAAa,GAAGF,EAAE,CAAC,CAAD,CAAhE;;AACA,MAAIG,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAY;AACrC;AACA,QAAI,CAACC,QAAQ,CAACC,iBAAd,EAAiC;AAC7BH,MAAAA,aAAa,CAAC,KAAD,CAAb;AACH;AACJ,GALD;;AAMA,MAAII,eAAe,GAAG,SAAlBA,eAAkB,GAAY;AAC9B,QAAIP,EAAE,IAAIA,EAAE,CAACQ,iBAAb,EAAgC;AAC5BR,MAAAA,EAAE,CAACQ,iBAAH,GACKC,IADL,CACU,YAAY;AAClBN,QAAAA,aAAa,CAAC,IAAD,CAAb;AACH,OAHD,EAIKO,KAJL,CAIW,UAAUC,GAAV,EAAe;AACtBb,QAAAA,GAAG,CAACc,KAAJ,CAAU,2BAAV,EAAuCD,GAAvC;AACH,OAND;AAOH;AACJ,GAVD;;AAWA,MAAIE,cAAc,GAAG,SAAjBA,cAAiB,GAAY;AAC7B,QAAIR,QAAQ,CAACQ,cAAb,EAA6B;AACzBR,MAAAA,QAAQ,CACHQ,cADL,GAEKJ,IAFL,CAEU,YAAY;AAClBN,QAAAA,aAAa,CAAC,KAAD,CAAb;AACH,OAJD,EAKKO,KALL,CAKW,UAAUC,GAAV,EAAe;AACtBb,QAAAA,GAAG,CAACc,KAAJ,CAAU,wBAAV,EAAoCD,GAApC;AACH,OAPD;AAQH;AACJ,GAXD;;AAYA,MAAIG,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAY;AAC/B;AACA,QAAI,CAACd,EAAL,EAAS;AACLF,MAAAA,GAAG,CAACc,KAAJ,CAAU,UAAV;AACA;AACH;;AACD,QAAI,CAACV,UAAL,EAAiB;AACbK,MAAAA,eAAe;AAClB,KAFD,MAGK;AACDM,MAAAA,cAAc;AACjB;AACJ,GAZD;;AAaAjB,EAAAA,SAAS,CAAC,YAAY;AAClB;AACAS,IAAAA,QAAQ,CAACU,gBAAT,CAA0B,kBAA1B,EAA8CX,sBAA9C,EAAsE,KAAtE;AACA,WAAO,YAAY;AACfC,MAAAA,QAAQ,CAACW,mBAAT,CAA6B,kBAA7B,EAAiDZ,sBAAjD;AACH,KAFD;AAGH,GANQ,EAMN,EANM,CAAT;AAOA,SAAO,CAACF,UAAD,EAAaY,gBAAb,CAAP;AACH,CApDD;;AAqDA,eAAef,aAAf","sourcesContent":["import { useEffect, useState } from 'react';\nimport { Log } from '../util';\nvar useFullscreen = function (el) {\n    var _a = useState(false), fullscreen = _a[0], setFullscreen = _a[1];\n    var handleFullScreenChange = function () {\n        // if exit fullscreen\n        if (!document.fullscreenElement) {\n            setFullscreen(false);\n        }\n    };\n    var enterFullscreen = function () {\n        if (el && el.requestFullscreen) {\n            el.requestFullscreen()\n                .then(function () {\n                setFullscreen(true);\n            })\n                .catch(function (err) {\n                Log.error('requestFullscreen error: ', err);\n            });\n        }\n    };\n    var exitFullscreen = function () {\n        if (document.exitFullscreen) {\n            document\n                .exitFullscreen()\n                .then(function () {\n                setFullscreen(false);\n            })\n                .catch(function (err) {\n                Log.error('exitFullscreen error: ', err);\n            });\n        }\n    };\n    var toggleFullscreen = function () {\n        // 切换是否全屏\n        if (!el) {\n            Log.error('need dom');\n            return;\n        }\n        if (!fullscreen) {\n            enterFullscreen();\n        }\n        else {\n            exitFullscreen();\n        }\n    };\n    useEffect(function () {\n        // 用户按Esc键退出全屏 或者 退出全屏都会触发这个事件\n        document.addEventListener('fullscreenchange', handleFullScreenChange, false);\n        return function () {\n            document.removeEventListener('fullscreenchange', handleFullScreenChange);\n        };\n    }, []);\n    return [fullscreen, toggleFullscreen];\n};\nexport default useFullscreen;\n"]},"metadata":{},"sourceType":"module"}