{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar ReglAttribute = function () {\n  function ReglAttribute(gl, options) {\n    _classCallCheck(this, ReglAttribute);\n\n    _defineProperty(this, \"attribute\", void 0);\n\n    _defineProperty(this, \"buffer\", void 0);\n\n    var buffer = options.buffer,\n        offset = options.offset,\n        stride = options.stride,\n        normalized = options.normalized,\n        size = options.size,\n        divisor = options.divisor;\n    this.buffer = buffer;\n    this.attribute = {\n      buffer: buffer.get(),\n      offset: offset || 0,\n      stride: stride || 0,\n      normalized: normalized || false,\n      divisor: divisor || 0\n    };\n\n    if (size) {\n      this.attribute.size = size;\n    }\n  }\n\n  _createClass(ReglAttribute, [{\n    key: \"get\",\n    value: function get() {\n      return this.attribute;\n    }\n  }, {\n    key: \"updateBuffer\",\n    value: function updateBuffer(options) {\n      this.buffer.subData(options);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.buffer.destroy();\n    }\n  }]);\n\n  return ReglAttribute;\n}();\n\nexport { ReglAttribute as default };","map":{"version":3,"sources":["../../src/regl/ReglAttribute.ts"],"names":["ReglAttribute","buffer","offset","stride","normalized","size","divisor","options"],"mappings":";;;;IAWqBA,a;AAInB,WAAA,aAAA,CAAA,EAAA,EAAA,OAAA,EAAqE;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,aAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,QAAA,EAAA,KAAA,CAAA,CAAA;;AACnE,QAAQC,MAAR,GAA8DM,OAA9D,CAAA,MAAA;AAAA,QAAgBL,MAAhB,GAA8DK,OAA9D,CAAA,MAAA;AAAA,QAAwBJ,MAAxB,GAA8DI,OAA9D,CAAA,MAAA;AAAA,QAAgCH,UAAhC,GAA8DG,OAA9D,CAAA,UAAA;AAAA,QAA4CF,IAA5C,GAA8DE,OAA9D,CAAA,IAAA;AAAA,QAAkDD,OAAlD,GAA8DC,OAA9D,CAAA,OAAA;AACA,SAAA,MAAA,GAAA,MAAA;AACA,SAAA,SAAA,GAAiB;AACfN,MAAAA,MAAM,EAAGA,MAAD,CADO,GACNA,EADM;AAEfC,MAAAA,MAAM,EAAEA,MAAM,IAFC,CAAA;AAGfC,MAAAA,MAAM,EAAEA,MAAM,IAHC,CAAA;AAIfC,MAAAA,UAAU,EAAEA,UAAU,IAJP,KAAA;AAKfE,MAAAA,OAAO,EAAEA,OAAO,IAAI;AALL,KAAjB;;AAQA,QAAA,IAAA,EAAU;AACR,WAAA,SAAA,CAAA,IAAA,GAAA,IAAA;AACD;AACF;;;;WAED,SAAA,GAAA,GAAa;AACX,aAAO,KAAP,SAAA;AACD;;;WAED,SAAA,YAAA,CAAA,OAAA,EAKG;AACD,WAAA,MAAA,CAAA,OAAA,CAAA,OAAA;AACD;;;WAED,SAAA,OAAA,GAAiB;AACf,WAAA,MAAA,CAAA,OAAA;AACD;;;;;;SAnCkBN,a","sourcesContent":["import {\n  IAttribute,\n  IAttributeInitializationOptions,\n  IBuffer,\n} from '@antv/l7-core';\nimport regl from 'l7regl';\nimport ReglBuffer from './ReglBuffer';\n\n/**\n * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#attributes\n */\nexport default class ReglAttribute implements IAttribute {\n  private attribute: regl.Attribute;\n  private buffer: IBuffer;\n\n  constructor(gl: regl.Regl, options: IAttributeInitializationOptions) {\n    const { buffer, offset, stride, normalized, size, divisor } = options;\n    this.buffer = buffer;\n    this.attribute = {\n      buffer: (buffer as ReglBuffer).get(),\n      offset: offset || 0,\n      stride: stride || 0,\n      normalized: normalized || false,\n      divisor: divisor || 0,\n    };\n\n    if (size) {\n      this.attribute.size = size;\n    }\n  }\n\n  public get() {\n    return this.attribute;\n  }\n\n  public updateBuffer(options: {\n    // 用于替换的数据\n    data: number[] | number[][] | Uint8Array | Uint16Array | Uint32Array;\n    // 原 Buffer 替换位置，单位为 byte\n    offset: number;\n  }) {\n    this.buffer.subData(options);\n  }\n\n  public destroy() {\n    this.buffer.destroy();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}