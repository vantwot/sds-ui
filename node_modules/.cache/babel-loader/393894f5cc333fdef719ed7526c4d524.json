{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { Deferred } from '../common/deferred';\nimport { Disposable } from '../common/disposable';\nexport var NsContext;\n\n(function (NsContext) {\n  NsContext.CONFIG_TYPE = 'CONTEXT_CONFIG';\n})(NsContext || (NsContext = {}));\n\nconst noop = () => Disposable.create(() => {});\n\nexport class KeybindingConfig {\n  constructor() {\n    /** CONFIG_TYPE */\n    this.CONFIG_TYPE = NsContext.CONFIG_TYPE;\n    /** 外部注册context的方法 */\n\n    this.keybindingFunc = noop;\n    /** 是否已加载 */\n\n    this.isMounted = new Deferred();\n\n    this.setKeybindingFunc = fn => {\n      this.keybindingFunc = fn;\n    };\n\n    this.setMountState = () => {\n      this.isMounted.resolve(true);\n    };\n\n    this.getConfig = () => __awaiter(this, void 0, void 0, function* () {\n      yield this.isMounted.promise;\n      return {\n        CONFIG_TYPE: this.CONFIG_TYPE,\n        registerKeybindingFunc: this.keybindingFunc\n      };\n    });\n\n    this.dispose = () => {\n      this.keybindingFunc = noop;\n      this.isMounted = new Deferred();\n    };\n  }\n\n}","map":{"version":3,"sources":["../../src/keybinding/config.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,QAAT,QAAyB,oBAAzB;AAGA,SAAS,UAAT,QAA2B,sBAA3B;AACA,OAAM,IAAW,SAAX;;AAAN,CAAA,UAAiB,SAAjB,EAA0B;AACX,EAAA,SAAA,CAAA,WAAA,GAAc,gBAAd;AAKd,CAND,EAAiB,SAAS,KAAT,SAAS,GAAA,EAAA,CAA1B;;AAQA,MAAM,IAAI,GAAG,MAAM,UAAU,CAAC,MAAX,CAAkB,MAAK,CAAG,CAA1B,CAAnB;;AACA,OAAM,MAAO,gBAAP,CAAuB;AAA7B,EAAA,WAAA,GAAA;AACE;AACS,SAAA,WAAA,GAAc,SAAS,CAAC,WAAxB;AACT;;AACQ,SAAA,cAAA,GAA8C,IAA9C;AACR;;AACQ,SAAA,SAAA,GAAY,IAAI,QAAJ,EAAZ;;AAER,SAAA,iBAAA,GAAqB,EAAD,IAAoC;AACtD,WAAK,cAAL,GAAsB,EAAtB;AACD,KAFD;;AAIA,SAAA,aAAA,GAAgB,MAAK;AACnB,WAAK,SAAL,CAAe,OAAf,CAAuB,IAAvB;AACD,KAFD;;AAIA,SAAA,SAAA,GAAY,MAAW,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;AACrB,YAAM,KAAK,SAAL,CAAe,OAArB;AACA,aAAO;AACL,QAAA,WAAW,EAAE,KAAK,WADb;AAEL,QAAA,sBAAsB,EAAE,KAAK;AAFxB,OAAP;AAID,KANsB,CAAvB;;AAQA,SAAA,OAAA,GAAU,MAAK;AACb,WAAK,cAAL,GAAsB,IAAtB;AACA,WAAK,SAAL,GAAiB,IAAI,QAAJ,EAAjB;AACD,KAHD;AAID;;AA5B4B","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Deferred } from '../common/deferred';\nimport { Disposable } from '../common/disposable';\nexport var NsContext;\n(function (NsContext) {\n    NsContext.CONFIG_TYPE = 'CONTEXT_CONFIG';\n})(NsContext || (NsContext = {}));\nconst noop = () => Disposable.create(() => { });\nexport class KeybindingConfig {\n    constructor() {\n        /** CONFIG_TYPE */\n        this.CONFIG_TYPE = NsContext.CONFIG_TYPE;\n        /** 外部注册context的方法 */\n        this.keybindingFunc = noop;\n        /** 是否已加载 */\n        this.isMounted = new Deferred();\n        this.setKeybindingFunc = (fn) => {\n            this.keybindingFunc = fn;\n        };\n        this.setMountState = () => {\n            this.isMounted.resolve(true);\n        };\n        this.getConfig = () => __awaiter(this, void 0, void 0, function* () {\n            yield this.isMounted.promise;\n            return {\n                CONFIG_TYPE: this.CONFIG_TYPE,\n                registerKeybindingFunc: this.keybindingFunc,\n            };\n        });\n        this.dispose = () => {\n            this.keybindingFunc = noop;\n            this.isMounted = new Deferred();\n        };\n    }\n}\n//# sourceMappingURL=config.js.map"]},"metadata":{},"sourceType":"module"}