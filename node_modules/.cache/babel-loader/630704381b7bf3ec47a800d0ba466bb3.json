{"ast":null,"code":"var _jsxFileName = \"/home/manolo/sds-ui/src/components/CompendiumTable.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\n/* Components */\n\nimport ErrorWarning from './ErrorWarning';\nimport LoadingCard from './LoadingCard';\nimport SortCompendium from './SortCompendium';\nimport InfoButton from './infoButton';\n/* UI Library Components */\n\nimport { Card, List, Row, Table } from 'antd';\n/* Utilities */\n\nimport { APIRequest } from '../apis/api';\nimport { useLocation } from 'react-router';\nimport { Link } from 'react-router-dom';\n/* Charts */\n\nimport TinyColumnChart from './charts/TinyColumnChart';\nimport TinyWordCloudChart from './charts/TinyWordCloudChart';\n/* UI Library Sub-components */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Column\n} = Table;\n\nconst CompendiumTable = _ref => {\n  _s();\n\n  let {\n    core,\n    type\n  } = _ref;\n  const [pagination, setPagination] = useState({\n    page: 1,\n    max: 5\n  });\n  const [sort, setSort] = useState('citations');\n  const location = useLocation();\n  let policies_flag = location.pathname === '/app/policies';\n  let URL = new URLSearchParams(location.search);\n  URL.delete('data');\n  URL.set('data', type);\n  const [state, setUrl] = APIRequest(`${location.pathname}?${URL.toString()}&page=${pagination.page}&max=${pagination.max}&sort=${sort}`);\n  const title = {\n    groups: 'Grupo de investigación',\n    institutions: 'Institución',\n    subjects: 'Tema'\n  };\n\n  const onPageChange = _ref2 => {\n    let {\n      page,\n      max\n    } = _ref2;\n    setPagination({\n      page: page,\n      max: max\n    });\n    window.scrollTo(0, 0);\n  };\n\n  useEffect(() => {\n    setUrl(`${location.pathname}?${URL.toString()}&page=${pagination.page}&max=${pagination.max}&sort=${sort}`); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pagination, sort, core.URL]);\n\n  if (state.isError) {\n    return /*#__PURE__*/_jsxDEV(ErrorWarning, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 12\n    }, this);\n  } else if (state.isLoading) {\n    return /*#__PURE__*/_jsxDEV(LoadingCard, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 12\n    }, this);\n  }\n\n  if (type === 'subjects') {\n    return /*#__PURE__*/_jsxDEV(Card, {\n      size: \"small\",\n      bordered: false,\n      style: {\n        backgroundColor: '#fafafa'\n      },\n      bodyStyle: {\n        padding: 0\n      },\n      extra: /*#__PURE__*/_jsxDEV(SortCompendium, {\n        sort: sort,\n        setSort: setSort\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 16\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        size: \"small\",\n        dataSource: state.data.data,\n        bordered: true,\n        rowKey: record => record.id,\n        pagination: {\n          total: state.data.total,\n          showSizeChanger: true,\n          current: pagination.page,\n          pageSize: pagination.max,\n          pageSizeOptions: [5, 10, 15],\n          onChange: (page, max) => onPageChange({\n            page: page,\n            max: max\n          })\n        },\n        rowClassName: \"compendium__row--height\",\n        scroll: {\n          x: 1300\n        },\n        children: [!policies_flag && /*#__PURE__*/_jsxDEV(Column, {\n          align: \"center\",\n          title: \"Puesto\",\n          dataIndex: \"index\",\n          render: index => /*#__PURE__*/_jsxDEV(\"b\", {\n            children: index\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 34\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          title: title[type],\n          render: item => /*#__PURE__*/_jsxDEV(Link, {\n            to: `/app/${type}?id=${item.id}`,\n            onClick: () => core.setURL(`/app/${type}?id=${item.id}`),\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          title: \"Productos totales\",\n          dataIndex: 'products_count'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          title: \"Citas totales\",\n          dataIndex: 'citations_count'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          width: '18%',\n          title: \"Instituciones\",\n          dataIndex: 'institutions',\n          render: institutionsList => /*#__PURE__*/_jsxDEV(List, {\n            size: \"small\",\n            dataSource: institutionsList,\n            renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n              style: {\n                paddingTop: '3px',\n                paddingBottom: '3px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/app/institutions?id=${item.id}`,\n                onClick: () => core.setURL(`/app/institutions?id=${item.id}`),\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          width: '18%',\n          title: \"Grupos\",\n          dataIndex: 'groups',\n          render: groupsList => /*#__PURE__*/_jsxDEV(List, {\n            size: \"small\",\n            dataSource: groupsList,\n            renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/app/groups?id=${item.id}`,\n                onClick: () => core.setURL(`/app/groups?id=${item.id}`),\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          width: '18%',\n          title: \"Autores\",\n          dataIndex: 'authors',\n          render: authorsList => /*#__PURE__*/_jsxDEV(List, {\n            size: \"small\",\n            dataSource: authorsList,\n            renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/app/authors?id=${item.id}`,\n                onClick: () => core.setURL(`/app/authors?id=${item.id}`),\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          title: () => {\n            return /*#__PURE__*/_jsxDEV(Row, {\n              justify: \"space-between\",\n              align: \"middle\",\n              children: [\"Productos por a\\xF1os\", /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"table__infoButton\",\n                children: /*#__PURE__*/_jsxDEV(InfoButton, {\n                  title: \"Productos por a\\xF1o\",\n                  type: 'columnLine'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this);\n          },\n          dataIndex: 'plot',\n          render: item => /*#__PURE__*/_jsxDEV(TinyColumnChart, {\n            data: item\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 31\n          }, this),\n          width: '30%'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    size: \"small\",\n    bordered: false,\n    style: {\n      backgroundColor: '#fafafa'\n    },\n    bodyStyle: {\n      padding: 0\n    },\n    extra: /*#__PURE__*/_jsxDEV(SortCompendium, {\n      sort: sort,\n      setSort: setSort\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 14\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      size: \"small\",\n      dataSource: state.data.data,\n      bordered: true,\n      rowKey: record => record.id,\n      pagination: {\n        total: state.data.total,\n        showSizeChanger: true,\n        current: pagination.page,\n        pageSize: pagination.max,\n        pageSizeOptions: [5, 10, 15],\n        onChange: (page, max) => onPageChange({\n          page: page,\n          max: max\n        })\n      },\n      rowClassName: \"compendium__row--height\",\n      scroll: {\n        x: 1300\n      },\n      children: [!policies_flag && /*#__PURE__*/_jsxDEV(Column, {\n        align: \"center\",\n        title: \"Puesto\",\n        dataIndex: \"index\",\n        render: index => /*#__PURE__*/_jsxDEV(\"b\", {\n          children: index\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 32\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        title: title[type],\n        render: item => /*#__PURE__*/_jsxDEV(Link, {\n          to: `/app/${type}?id=${item.id}`,\n          onClick: () => core.setURL(`/app/${type}?id=${item.id}`),\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), type !== 'institutions' ? /*#__PURE__*/_jsxDEV(Column, {\n        title: \"Afiliaci\\xF3n\",\n        dataIndex: 'affiliations',\n        render: item => {\n          var _item$institution;\n\n          return /*#__PURE__*/_jsxDEV(Link, {\n            to: `/app/institutions?id=${(_item$institution = item.institution) === null || _item$institution === void 0 ? void 0 : _item$institution.id}`,\n            onClick: () => core.setURL(`/app/institutions?id=${item.institution.id}`),\n            children: item.institution.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this) : '', /*#__PURE__*/_jsxDEV(Column, {\n        title: \"Productos totales\",\n        dataIndex: 'products_count'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        title: \"Citas totales\",\n        dataIndex: 'citations_count'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        title: () => {\n          return /*#__PURE__*/_jsxDEV(Row, {\n            justify: \"space-between\",\n            align: \"middle\",\n            children: [\"Productos por a\\xF1os\", /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"table__infoButton\",\n              children: /*#__PURE__*/_jsxDEV(InfoButton, {\n                title: \"Productos por a\\xF1o\",\n                type: 'columnLine'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this);\n        },\n        dataIndex: 'plot',\n        render: item => /*#__PURE__*/_jsxDEV(TinyColumnChart, {\n          Chart: true,\n          data: item\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 29\n        }, this),\n        width: '30%'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        title: \"Temas\",\n        dataIndex: 'subjects',\n        width: '30%',\n        render: item => /*#__PURE__*/_jsxDEV(TinyWordCloudChart, {\n          data: item,\n          core: core\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CompendiumTable, \"g9FnJqCrqpxLLWA6yQmWPTxj6gM=\", false, function () {\n  return [useLocation];\n});\n\n_c = CompendiumTable;\nexport default CompendiumTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"CompendiumTable\");","map":{"version":3,"sources":["/home/manolo/sds-ui/src/components/CompendiumTable.jsx"],"names":["React","useEffect","useState","ErrorWarning","LoadingCard","SortCompendium","InfoButton","Card","List","Row","Table","APIRequest","useLocation","Link","TinyColumnChart","TinyWordCloudChart","Column","CompendiumTable","core","type","pagination","setPagination","page","max","sort","setSort","location","policies_flag","pathname","URL","URLSearchParams","search","delete","set","state","setUrl","toString","title","groups","institutions","subjects","onPageChange","window","scrollTo","isError","isLoading","backgroundColor","padding","data","record","id","total","showSizeChanger","current","pageSize","pageSizeOptions","onChange","x","index","item","setURL","name","institutionsList","paddingTop","paddingBottom","groupsList","authorsList","institution"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\n\n/* Components */\nimport ErrorWarning from './ErrorWarning';\nimport LoadingCard from './LoadingCard';\nimport SortCompendium from './SortCompendium';\nimport InfoButton from './infoButton';\n\n/* UI Library Components */\nimport { Card, List, Row, Table } from 'antd';\n\n/* Utilities */\nimport { APIRequest } from '../apis/api';\nimport { useLocation } from 'react-router';\nimport { Link } from 'react-router-dom';\n\n/* Charts */\nimport TinyColumnChart from './charts/TinyColumnChart';\nimport TinyWordCloudChart from './charts/TinyWordCloudChart';\n\n/* UI Library Sub-components */\nconst { Column } = Table;\n\nconst CompendiumTable = ({ core, type }) => {\n  const [pagination, setPagination] = useState({ page: 1, max: 5 });\n  const [sort, setSort] = useState('citations');\n  const location = useLocation();\n  let policies_flag = location.pathname === '/app/policies';\n  let URL = new URLSearchParams(location.search);\n  URL.delete('data');\n  URL.set('data', type);\n\n  const [state, setUrl] = APIRequest(\n    `${location.pathname}?${URL.toString()}&page=${pagination.page}&max=${\n      pagination.max\n    }&sort=${sort}`\n  );\n\n  const title = {\n    groups: 'Grupo de investigación',\n    institutions: 'Institución',\n    subjects: 'Tema',\n  };\n\n  const onPageChange = ({ page, max }) => {\n    setPagination({ page: page, max: max });\n    window.scrollTo(0, 0);\n  };\n\n  useEffect(() => {\n    setUrl(\n      `${location.pathname}?${URL.toString()}&page=${pagination.page}&max=${\n        pagination.max\n      }&sort=${sort}`\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pagination, sort, core.URL]);\n\n  if (state.isError) {\n    return <ErrorWarning />;\n  } else if (state.isLoading) {\n    return <LoadingCard />;\n  }\n  if (type === 'subjects') {\n    return (\n      <Card\n        size=\"small\"\n        bordered={false}\n        style={{ backgroundColor: '#fafafa' }}\n        bodyStyle={{ padding: 0 }}\n        extra={<SortCompendium sort={sort} setSort={setSort} />}\n      >\n        <Table\n          size=\"small\"\n          dataSource={state.data.data}\n          bordered\n          rowKey={(record) => record.id}\n          pagination={{\n            total: state.data.total,\n            showSizeChanger: true,\n            current: pagination.page,\n            pageSize: pagination.max,\n            pageSizeOptions: [5, 10, 15],\n            onChange: (page, max) => onPageChange({ page: page, max: max }),\n          }}\n          rowClassName=\"compendium__row--height\"\n          scroll={{ x: 1300 }}\n        >\n          {!policies_flag && (\n            <Column\n              align=\"center\"\n              title=\"Puesto\"\n              dataIndex=\"index\"\n              render={(index) => <b>{index}</b>}\n            />\n          )}\n          <Column\n            title={title[type]}\n            render={(item) => (\n              <Link\n                to={`/app/${type}?id=${item.id}`}\n                onClick={() => core.setURL(`/app/${type}?id=${item.id}`)}\n              >\n                {item.name}\n              </Link>\n            )}\n          />\n          <Column title=\"Productos totales\" dataIndex={'products_count'} />\n          <Column title=\"Citas totales\" dataIndex={'citations_count'} />\n          <Column\n            width={'18%'}\n            title=\"Instituciones\"\n            dataIndex={'institutions'}\n            render={(institutionsList) => (\n              <List\n                size=\"small\"\n                dataSource={institutionsList}\n                renderItem={(item) => (\n                  <List.Item\n                    style={{ paddingTop: '3px', paddingBottom: '3px' }}\n                  >\n                    <Link\n                      to={`/app/institutions?id=${item.id}`}\n                      onClick={() =>\n                        core.setURL(`/app/institutions?id=${item.id}`)\n                      }\n                    >\n                      {item.name}\n                    </Link>\n                  </List.Item>\n                )}\n              />\n            )}\n          />\n          <Column\n            width={'18%'}\n            title=\"Grupos\"\n            dataIndex={'groups'}\n            render={(groupsList) => (\n              <List\n                size=\"small\"\n                dataSource={groupsList}\n                renderItem={(item) => (\n                  <List.Item>\n                    <Link\n                      to={`/app/groups?id=${item.id}`}\n                      onClick={() => core.setURL(`/app/groups?id=${item.id}`)}\n                    >\n                      {item.name}\n                    </Link>\n                  </List.Item>\n                )}\n              />\n            )}\n          />\n          <Column\n            width={'18%'}\n            title=\"Autores\"\n            dataIndex={'authors'}\n            render={(authorsList) => (\n              <List\n                size=\"small\"\n                dataSource={authorsList}\n                renderItem={(item) => (\n                  <List.Item>\n                    <Link\n                      to={`/app/authors?id=${item.id}`}\n                      onClick={() => core.setURL(`/app/authors?id=${item.id}`)}\n                    >\n                      {item.name}\n                    </Link>\n                  </List.Item>\n                )}\n              />\n            )}\n          />\n          <Column\n            title={() => {\n              return (\n                <Row justify=\"space-between\" align=\"middle\">\n                  Productos por años\n                  <div id=\"table__infoButton\">\n                    <InfoButton title=\"Productos por año\" type={'columnLine'} />\n                  </div>\n                </Row>\n              );\n            }}\n            dataIndex={'plot'}\n            render={(item) => <TinyColumnChart data={item} />}\n            width={'30%'}\n          />\n        </Table>\n      </Card>\n    );\n  }\n  return (\n    <Card\n      size=\"small\"\n      bordered={false}\n      style={{ backgroundColor: '#fafafa' }}\n      bodyStyle={{ padding: 0 }}\n      extra={<SortCompendium sort={sort} setSort={setSort} />}\n    >\n      <Table\n        size=\"small\"\n        dataSource={state.data.data}\n        bordered\n        rowKey={(record) => record.id}\n        pagination={{\n          total: state.data.total,\n          showSizeChanger: true,\n          current: pagination.page,\n          pageSize: pagination.max,\n          pageSizeOptions: [5, 10, 15],\n          onChange: (page, max) => onPageChange({ page: page, max: max }),\n        }}\n        rowClassName=\"compendium__row--height\"\n        scroll={{ x: 1300 }}\n      >\n        {!policies_flag && (\n          <Column\n            align=\"center\"\n            title=\"Puesto\"\n            dataIndex=\"index\"\n            render={(index) => <b>{index}</b>}\n          />\n        )}\n        <Column\n          title={title[type]}\n          render={(item) => (\n            <Link\n              to={`/app/${type}?id=${item.id}`}\n              onClick={() => core.setURL(`/app/${type}?id=${item.id}`)}\n            >\n              {item.name}\n            </Link>\n          )}\n        />\n        {type !== 'institutions' ? (\n          <Column\n            title=\"Afiliación\"\n            dataIndex={'affiliations'}\n            render={(item) => (\n              <Link\n                to={`/app/institutions?id=${item.institution?.id}`}\n                onClick={() =>\n                  core.setURL(`/app/institutions?id=${item.institution.id}`)\n                }\n              >\n                {item.institution.name}\n              </Link>\n            )}\n          />\n        ) : (\n          ''\n        )}\n        <Column title=\"Productos totales\" dataIndex={'products_count'} />\n        <Column title=\"Citas totales\" dataIndex={'citations_count'} />\n        <Column\n          title={() => {\n            return (\n              <Row justify=\"space-between\" align=\"middle\">\n                Productos por años\n                <div id=\"table__infoButton\">\n                  <InfoButton title=\"Productos por año\" type={'columnLine'} />\n                </div>\n              </Row>\n            );\n          }}\n          dataIndex={'plot'}\n          render={(item) => <TinyColumnChart Chart data={item} />}\n          width={'30%'}\n        />\n        <Column\n          title=\"Temas\"\n          dataIndex={'subjects'}\n          width={'30%'}\n          render={(item) => <TinyWordCloudChart data={item} core={core} />}\n        />\n      </Table>\n    </Card>\n  );\n};\n\nexport default CompendiumTable;\n"]},"metadata":{},"sourceType":"module"}