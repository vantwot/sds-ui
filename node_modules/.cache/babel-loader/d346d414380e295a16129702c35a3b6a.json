{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport React from 'react';\nimport { // app service\nIconStore } from '@antv/xflow-core';\nimport { Menu } from '@antv/x6-react-components';\nexport const renderMenuOptions = props => {\n  const {\n    idx,\n    menuOptions: menuItem,\n    target,\n    modelService,\n    commandService,\n    onHide\n  } = props;\n  const {\n    id,\n    label,\n    isEnabled = true,\n    isVisible = true,\n    iconName,\n    submenu = [],\n    active,\n    hotkey,\n    render,\n    onClick\n  } = menuItem;\n\n  if (!isVisible) {\n    return null;\n  }\n  /** 分隔符：separator */\n\n\n  if (menuItem.type === 'separator') {\n    return React.createElement(Menu.Divider, {\n      key: String(menuItem.id) + idx\n    });\n  }\n  /** 根结点：root */\n\n\n  if (menuItem.type === 'root') {\n    return React.createElement(Menu, {\n      hasIcon: true\n    }, submenu.map((item, submenuIdx) => renderMenuOptions({\n      idx: submenuIdx,\n      target,\n      commandService,\n      modelService,\n      menuOptions: item,\n      onHide\n    })));\n  }\n  /** 子菜单：submenu */\n\n\n  if (menuItem.submenu && Array.isArray(menuItem.submenu)) {\n    const Icon = IconStore.get(iconName);\n    const isDisable = !isEnabled;\n    return React.createElement(Menu.SubMenu, {\n      key: String(id),\n      text: label,\n      disabled: isDisable || submenu.length === 0,\n      icon: Icon ? React.createElement(Icon, null) : null,\n      active: active,\n      hotkey: hotkey\n    }, submenu.map((item, submenuIdx) => renderMenuOptions({\n      idx: submenuIdx,\n      target,\n      commandService,\n      modelService,\n      menuOptions: item,\n      onHide\n    })));\n  }\n  /** 叶子节点 */\n\n\n  const Icon = IconStore.get(iconName);\n\n  if (render) {\n    return React.createElement(render, {\n      menuItem,\n      target,\n      commandService,\n      modelService,\n      onHide\n    }, [React.createElement(Menu.Item, {\n      key: String(id),\n      text: label,\n      disabled: !isEnabled,\n      icon: Icon ? React.createElement(Icon, null) : null,\n      active: active,\n      hotkey: hotkey\n    })]);\n  }\n\n  return React.createElement(Menu.Item, {\n    key: String(id),\n    text: label,\n    disabled: !isEnabled,\n    icon: Icon ? React.createElement(Icon, null) : null,\n    active: active,\n    hotkey: hotkey,\n    onClick: () => __awaiter(void 0, void 0, void 0, function* () {\n      yield onClick({\n        menuItem,\n        target,\n        commandService,\n        modelService\n      });\n      onHide && onHide();\n    })\n  });\n};","map":{"version":3,"sources":["../../../src/canvas-context-menu/components/menu-render.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport React from 'react';\nimport { \n// app service\nIconStore, } from '@antv/xflow-core';\nimport { Menu } from '@antv/x6-react-components';\nexport const renderMenuOptions = (props) => {\n    const { idx, menuOptions: menuItem, target, modelService, commandService, onHide } = props;\n    const { id, label, isEnabled = true, isVisible = true, iconName, submenu = [], active, hotkey, render, onClick, } = menuItem;\n    if (!isVisible) {\n        return null;\n    }\n    /** 分隔符：separator */\n    if (menuItem.type === 'separator') {\n        return React.createElement(Menu.Divider, { key: String(menuItem.id) + idx });\n    }\n    /** 根结点：root */\n    if (menuItem.type === 'root') {\n        return (React.createElement(Menu, { hasIcon: true }, submenu.map((item, submenuIdx) => renderMenuOptions({\n            idx: submenuIdx,\n            target,\n            commandService,\n            modelService,\n            menuOptions: item,\n            onHide,\n        }))));\n    }\n    /** 子菜单：submenu */\n    if (menuItem.submenu && Array.isArray(menuItem.submenu)) {\n        const Icon = IconStore.get(iconName);\n        const isDisable = !isEnabled;\n        return (React.createElement(Menu.SubMenu, { key: String(id), text: label, disabled: isDisable || submenu.length === 0, icon: Icon ? React.createElement(Icon, null) : null, active: active, hotkey: hotkey }, submenu.map((item, submenuIdx) => renderMenuOptions({\n            idx: submenuIdx,\n            target,\n            commandService,\n            modelService,\n            menuOptions: item,\n            onHide,\n        }))));\n    }\n    /** 叶子节点 */\n    const Icon = IconStore.get(iconName);\n    if (render) {\n        return React.createElement(render, { menuItem, target, commandService, modelService, onHide }, [\n            React.createElement(Menu.Item, { key: String(id), text: label, disabled: !isEnabled, icon: Icon ? React.createElement(Icon, null) : null, active: active, hotkey: hotkey }),\n        ]);\n    }\n    return (React.createElement(Menu.Item, { key: String(id), text: label, disabled: !isEnabled, icon: Icon ? React.createElement(Icon, null) : null, active: active, hotkey: hotkey, onClick: () => __awaiter(void 0, void 0, void 0, function* () {\n            yield onClick({ menuItem, target, commandService, modelService });\n            onHide && onHide();\n        }) }));\n};\n//# sourceMappingURL=menu-render.js.map"]},"metadata":{},"sourceType":"module"}