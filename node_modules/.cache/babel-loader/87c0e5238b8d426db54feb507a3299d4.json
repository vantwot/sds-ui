{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport React, { useCallback } from 'react';\nimport { Empty, Collapse } from 'antd';\nimport { get } from 'lodash';\nimport { Addon } from '@antv/x6';\nimport { getNodeReactComponent, useXFlowApp, uuidv4, XFlowNodeCommands } from '@antv/xflow-core';\nimport { setNodeRender } from './utils';\nimport { getProps } from '../flowchart-canvas/utils';\nimport { NodeTitle, defaultNodeFactory } from '../canvas-node-tree-panel/panel-body';\nconst {\n  Panel\n} = Collapse;\nexport const NodePanelBody = props => {\n  const {\n    x6NodeFactory,\n    dndOptions,\n    state,\n    prefixClz,\n    registerNode,\n    defaultActiveKey = ['official', 'custom']\n  } = props;\n  const {\n    title = '复制节点'\n  } = registerNode !== null && registerNode !== void 0 ? registerNode : {};\n  const {\n    graphProvider,\n    modelService,\n    commandService\n  } = useXFlowApp();\n  const [dnd, setDnd] = React.useState();\n  /** 获取graph实例 */\n\n  const [graph, setGraph] = React.useState();\n  graphProvider.getGraphInstance().then(x6Graph => {\n    setGraph(x6Graph);\n  });\n  let graphConfig = undefined;\n  graphProvider.getGraphOptions().then(x6GraphConfig => {\n    /** x6GraphConfig 上缺失 setNodeRender 方法  */\n    setNodeRender(getProps('graphConfig'), get(props, 'registerNode.nodes', []));\n    graphConfig = x6GraphConfig;\n  });\n  const onNodeDrop = useCallback(node => __awaiter(void 0, void 0, void 0, function* () {\n    var _a;\n\n    const {\n      ports\n    } = node;\n    const nodeConfig = Object.assign(Object.assign({}, node), {\n      id: `node-${uuidv4()}`,\n      zIndex: 10,\n      ports: Object.assign(Object.assign({}, ports), {\n        items: (_a = ports.items) === null || _a === void 0 ? void 0 : _a.map(item => Object.assign(Object.assign({}, item), {\n          id: uuidv4()\n        }))\n      })\n    });\n    const args = {\n      nodeConfig\n    };\n    yield commandService.executeCommand(XFlowNodeCommands.ADD_NODE.id, args);\n    const onAddNode = getProps('onAddNode');\n\n    if (typeof onAddNode === 'function') {\n      onAddNode(nodeConfig);\n    }\n  }), [commandService]);\n  React.useEffect(() => {\n    if (!graph) {\n      return;\n    }\n\n    const dndInstance = new Addon.Dnd(Object.assign(Object.assign({\n      scaled: false,\n      animation: false\n    }, dndOptions), {\n      target: graph,\n\n      /** 这里考虑到需要新增群组的需求，不使用x6的getDropNod方法\n       * 在validateNode时调用command添加\n       */\n      validateNode: droppingNode => __awaiter(void 0, void 0, void 0, function* () {\n        const nodeConfig = Object.assign(Object.assign({}, droppingNode.getData()), droppingNode.getPosition());\n        yield onNodeDrop(nodeConfig);\n        return false;\n      })\n    }));\n    setDnd(dndInstance);\n  }, [commandService, dndOptions, graph, modelService, onNodeDrop]);\n  const onMouseDown = React.useCallback(nodeConfig => e => {\n    if (!graph || !dnd || !graphConfig) {\n      return;\n    }\n\n    const renderKey = graphConfig.nodeTypeParser(nodeConfig);\n    const {\n      width = 180,\n      height = 40\n    } = nodeConfig;\n    const reactComponent = graphConfig.nodeRender.get(renderKey);\n    const wrappedComponent = getNodeReactComponent(reactComponent, commandService, modelService);\n    const nodeData = {\n      data: nodeConfig,\n      width,\n      height,\n      view: graphConfig.graphId,\n      component: wrappedComponent\n    };\n    const x6Node = x6NodeFactory ? x6NodeFactory(nodeData) : defaultNodeFactory(nodeData);\n    dnd.start(x6Node, e.nativeEvent);\n  }, [commandService, dnd, graph, graphConfig, modelService, x6NodeFactory]);\n  const renderTree = React.useCallback(function () {\n    let list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    return list.map(item => {\n      const {\n        popoverContent\n      } = item;\n      return React.createElement(NodeTitle, {\n        item: item,\n        key: item.id,\n        onMouseDown: onMouseDown(item),\n        popoverContent: popoverContent,\n        prefixClz: prefixClz,\n        modelService: modelService,\n        commandService: commandService,\n        graphConfig: graphConfig\n      });\n    });\n  }, [commandService, graphConfig, modelService, onMouseDown, prefixClz]);\n  const customNode = state.nodeList.filter(item => item.isCustom);\n  const officialNode = state.nodeList.filter(item => !item.isCustom);\n  const searchCustomNode = state.searchList.filter(item => item.isCustom);\n  const searchOfficialNode = state.searchList.filter(item => !item.isCustom);\n  const hasCustomNode = customNode.length > 0;\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: `${prefixClz}-body`\n  }, React.createElement(Collapse, {\n    defaultActiveKey: defaultActiveKey,\n    style: {\n      border: 'none'\n    }\n  }, React.createElement(Panel, {\n    header: \"\\u901A\\u7528\\u8282\\u70B9\",\n    key: \"official\",\n    style: {\n      border: 'none'\n    }\n  }, !state.keyword && React.createElement(\"div\", {\n    className: `${prefixClz}-official`\n  }, renderTree(officialNode)), state.searchList.length > 0 && React.createElement(\"div\", {\n    className: `${prefixClz}-official`\n  }, renderTree(searchOfficialNode))), hasCustomNode && React.createElement(Panel, {\n    header: title,\n    key: \"custom\",\n    style: {\n      border: 'none'\n    }\n  }, !state.keyword && React.createElement(\"div\", {\n    className: `${prefixClz}-custom`\n  }, renderTree(customNode)), state.searchList.length > 0 && React.createElement(\"div\", {\n    className: `${prefixClz}-custom`\n  }, renderTree(searchCustomNode)))), state.keyword && state.searchList.length === 0 && React.createElement(Empty, {\n    style: {\n      marginTop: '48px'\n    }\n  })));\n};","map":{"version":3,"sources":["../../src/flowchart-node-panel/panel-body.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport React, { useCallback } from 'react';\nimport { Empty, Collapse } from 'antd';\nimport { get } from 'lodash';\nimport { Addon } from '@antv/x6';\nimport { getNodeReactComponent, useXFlowApp, uuidv4, XFlowNodeCommands } from '@antv/xflow-core';\nimport { setNodeRender } from './utils';\nimport { getProps } from '../flowchart-canvas/utils';\nimport { NodeTitle, defaultNodeFactory } from '../canvas-node-tree-panel/panel-body';\nconst { Panel } = Collapse;\nexport const NodePanelBody = props => {\n    const { x6NodeFactory, dndOptions, state, prefixClz, registerNode, defaultActiveKey = ['official', 'custom'], } = props;\n    const { title = '复制节点' } = registerNode !== null && registerNode !== void 0 ? registerNode : {};\n    const { graphProvider, modelService, commandService } = useXFlowApp();\n    const [dnd, setDnd] = React.useState();\n    /** 获取graph实例 */\n    const [graph, setGraph] = React.useState();\n    graphProvider.getGraphInstance().then(x6Graph => {\n        setGraph(x6Graph);\n    });\n    let graphConfig = undefined;\n    graphProvider.getGraphOptions().then(x6GraphConfig => {\n        /** x6GraphConfig 上缺失 setNodeRender 方法  */\n        setNodeRender(getProps('graphConfig'), get(props, 'registerNode.nodes', []));\n        graphConfig = x6GraphConfig;\n    });\n    const onNodeDrop = useCallback((node) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        const { ports } = node;\n        const nodeConfig = Object.assign(Object.assign({}, node), { id: `node-${uuidv4()}`, zIndex: 10, ports: Object.assign(Object.assign({}, ports), { items: (_a = ports.items) === null || _a === void 0 ? void 0 : _a.map(item => (Object.assign(Object.assign({}, item), { id: uuidv4() }))) }) });\n        const args = {\n            nodeConfig,\n        };\n        yield commandService.executeCommand(XFlowNodeCommands.ADD_NODE.id, args);\n        const onAddNode = getProps('onAddNode');\n        if (typeof onAddNode === 'function') {\n            onAddNode(nodeConfig);\n        }\n    }), [commandService]);\n    React.useEffect(() => {\n        if (!graph) {\n            return;\n        }\n        const dndInstance = new Addon.Dnd(Object.assign(Object.assign({ scaled: false, animation: false }, dndOptions), { target: graph, \n            /** 这里考虑到需要新增群组的需求，不使用x6的getDropNod方法\n             * 在validateNode时调用command添加\n             */\n            validateNode: (droppingNode) => __awaiter(void 0, void 0, void 0, function* () {\n                const nodeConfig = Object.assign(Object.assign({}, droppingNode.getData()), droppingNode.getPosition());\n                yield onNodeDrop(nodeConfig);\n                return false;\n            }) }));\n        setDnd(dndInstance);\n    }, [commandService, dndOptions, graph, modelService, onNodeDrop]);\n    const onMouseDown = React.useCallback((nodeConfig) => (e) => {\n        if (!graph || !dnd || !graphConfig) {\n            return;\n        }\n        const renderKey = graphConfig.nodeTypeParser(nodeConfig);\n        const { width = 180, height = 40 } = nodeConfig;\n        const reactComponent = graphConfig.nodeRender.get(renderKey);\n        const wrappedComponent = getNodeReactComponent(reactComponent, commandService, modelService);\n        const nodeData = {\n            data: nodeConfig,\n            width,\n            height,\n            view: graphConfig.graphId,\n            component: wrappedComponent,\n        };\n        const x6Node = x6NodeFactory ? x6NodeFactory(nodeData) : defaultNodeFactory(nodeData);\n        dnd.start(x6Node, e.nativeEvent);\n    }, [commandService, dnd, graph, graphConfig, modelService, x6NodeFactory]);\n    const renderTree = React.useCallback((list = []) => {\n        return list.map(item => {\n            const { popoverContent } = item;\n            return (React.createElement(NodeTitle, { item: item, key: item.id, onMouseDown: onMouseDown(item), popoverContent: popoverContent, prefixClz: prefixClz, modelService: modelService, commandService: commandService, graphConfig: graphConfig }));\n        });\n    }, [commandService, graphConfig, modelService, onMouseDown, prefixClz]);\n    const customNode = state.nodeList.filter(item => item.isCustom);\n    const officialNode = state.nodeList.filter(item => !item.isCustom);\n    const searchCustomNode = state.searchList.filter(item => item.isCustom);\n    const searchOfficialNode = state.searchList.filter(item => !item.isCustom);\n    const hasCustomNode = customNode.length > 0;\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"div\", { className: `${prefixClz}-body` },\n            React.createElement(Collapse, { defaultActiveKey: defaultActiveKey, style: { border: 'none' } },\n                React.createElement(Panel, { header: \"\\u901A\\u7528\\u8282\\u70B9\", key: \"official\", style: { border: 'none' } },\n                    !state.keyword && (React.createElement(\"div\", { className: `${prefixClz}-official` }, renderTree(officialNode))),\n                    state.searchList.length > 0 && (React.createElement(\"div\", { className: `${prefixClz}-official` }, renderTree(searchOfficialNode)))),\n                hasCustomNode && (React.createElement(Panel, { header: title, key: \"custom\", style: { border: 'none' } },\n                    !state.keyword && (React.createElement(\"div\", { className: `${prefixClz}-custom` }, renderTree(customNode))),\n                    state.searchList.length > 0 && (React.createElement(\"div\", { className: `${prefixClz}-custom` }, renderTree(searchCustomNode)))))),\n            state.keyword && state.searchList.length === 0 && React.createElement(Empty, { style: { marginTop: '48px' } }))));\n};\n//# sourceMappingURL=panel-body.js.map"]},"metadata":{},"sourceType":"module"}