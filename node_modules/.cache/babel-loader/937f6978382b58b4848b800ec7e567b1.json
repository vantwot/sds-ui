{"ast":null,"code":"import React, { useState, useRef, useContext } from 'react';\nimport { render } from 'react-dom';\nimport { Button } from 'antd';\nimport { SketchPicker } from 'react-color';\nimport { getContainer } from '../../../../../util';\nimport appContext from '../../../../../context';\nimport { prefix } from '../constants';\n\nvar ColorPicker = function ColorPicker(props) {\n  var label = props.label,\n      _a = props.value,\n      value = _a === void 0 ? '' : _a,\n      onChange = props.onChange;\n\n  var _b = useState(false),\n      show = _b[0],\n      setShow = _b[1];\n\n  var colorRef = useRef(value);\n  var flowchartId = useContext(appContext).flowchartId;\n\n  var PickContainer = function PickContainer() {\n    return React.createElement(\"div\", {\n      className: \"\".concat(prefix, \"-popover\")\n    }, React.createElement(SketchPicker, {\n      style: {\n        width: '100%'\n      },\n      onChange: function onChange(color) {\n        colorRef.current = color.hex;\n      }\n    }), React.createElement(\"div\", {\n      className: \"foolter\"\n    }, React.createElement(Button, {\n      onClick: function onClick() {\n        setShow(false);\n      }\n    }, \"\\u53D6\\u6D88\"), React.createElement(Button, {\n      type: \"primary\",\n      onClick: function onClick() {\n        onChange === null || onChange === void 0 ? void 0 : onChange(colorRef.current);\n        setShow(false);\n      }\n    }, \"\\u786E\\u8BA4\")));\n  };\n  /**  react-color mouseOver 和上层事件冲突，不得已为之 */\n\n\n  var CreatePickColorContainer = function CreatePickColorContainer(visible) {\n    var container = getContainer(flowchartId);\n    var exist = document.querySelector(\"#\".concat(prefix, \"-pick-color-container\"));\n\n    if (exist) {\n      container.removeChild(exist);\n    }\n\n    if (!visible) {\n      return;\n    }\n\n    var div = document.createElement('div');\n    div.id = \"\".concat(prefix, \"-pick-color-container\");\n    div.className = \"\".concat(prefix, \"-pick-color-container\");\n    render(React.createElement(PickContainer, null), div);\n    container.appendChild(div);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"group\"\n  }, label && React.createElement(\"label\", null, label), React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"-color-container\"),\n    onClick: function onClick() {\n      setShow(true);\n    }\n  }, React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"-color\"),\n    style: {\n      backgroundColor: value,\n      height: '100%'\n    }\n  })), CreatePickColorContainer(show));\n};\n\nexport default ColorPicker;","map":{"version":3,"sources":["/home/manolo/sds-ui/node_modules/@ant-design/flowchart/es/components/editor-panel/control-map-service/components/fields/color.js"],"names":["React","useState","useRef","useContext","render","Button","SketchPicker","getContainer","appContext","prefix","ColorPicker","props","label","_a","value","onChange","_b","show","setShow","colorRef","flowchartId","PickContainer","createElement","className","concat","style","width","color","current","hex","onClick","type","CreatePickColorContainer","visible","container","exist","document","querySelector","removeChild","div","id","appendChild","backgroundColor","height"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useContext } from 'react';\nimport { render } from 'react-dom';\nimport { Button } from 'antd';\nimport { SketchPicker } from 'react-color';\nimport { getContainer } from '../../../../../util';\nimport appContext from '../../../../../context';\nimport { prefix } from '../constants';\nvar ColorPicker = function (props) {\n    var label = props.label, _a = props.value, value = _a === void 0 ? '' : _a, onChange = props.onChange;\n    var _b = useState(false), show = _b[0], setShow = _b[1];\n    var colorRef = useRef(value);\n    var flowchartId = useContext(appContext).flowchartId;\n    var PickContainer = function () {\n        return (React.createElement(\"div\", { className: \"\".concat(prefix, \"-popover\") },\n            React.createElement(SketchPicker, { style: {\n                    width: '100%',\n                }, onChange: function (color) {\n                    colorRef.current = color.hex;\n                } }),\n            React.createElement(\"div\", { className: \"foolter\" },\n                React.createElement(Button, { onClick: function () {\n                        setShow(false);\n                    } }, \"\\u53D6\\u6D88\"),\n                React.createElement(Button, { type: \"primary\", onClick: function () {\n                        onChange === null || onChange === void 0 ? void 0 : onChange(colorRef.current);\n                        setShow(false);\n                    } }, \"\\u786E\\u8BA4\"))));\n    };\n    /**  react-color mouseOver 和上层事件冲突，不得已为之 */\n    var CreatePickColorContainer = function (visible) {\n        var container = getContainer(flowchartId);\n        var exist = document.querySelector(\"#\".concat(prefix, \"-pick-color-container\"));\n        if (exist) {\n            container.removeChild(exist);\n        }\n        if (!visible) {\n            return;\n        }\n        var div = document.createElement('div');\n        div.id = \"\".concat(prefix, \"-pick-color-container\");\n        div.className = \"\".concat(prefix, \"-pick-color-container\");\n        render(React.createElement(PickContainer, null), div);\n        container.appendChild(div);\n    };\n    return (React.createElement(\"div\", { className: \"group\" },\n        label && React.createElement(\"label\", null, label),\n        React.createElement(\"div\", { className: \"\".concat(prefix, \"-color-container\"), onClick: function () {\n                setShow(true);\n            } },\n            React.createElement(\"div\", { className: \"\".concat(prefix, \"-color\"), style: {\n                    backgroundColor: value,\n                    height: '100%',\n                } })),\n        CreatePickColorContainer(show)));\n};\nexport default ColorPicker;\n"]},"metadata":{},"sourceType":"module"}