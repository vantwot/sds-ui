{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React, { useCallback, useEffect } from 'react';\nimport { Empty, Form, Tabs } from 'antd';\nimport classNames from 'classnames';\nimport { Log } from '../../../util';\nimport { xflowDefaultControls, makeControlMap, getControlFromMap } from './control-map/index';\nexport { FormItemWrapper } from './common/form-item-wrapper';\nvar TabPane = Tabs.TabPane;\nexport var SchemaForm = function (props) {\n  var _a;\n\n  var _b;\n\n  var schema = props.schema,\n      formInstance = props.form,\n      className = props.className,\n      triggerUpdate = props.triggerUpdate,\n      defaultControlRender = props.defaultControlRender,\n      afterUpdatingCb = props.afterUpdatingCb,\n      controlMapfromParent = props.controlMap,\n      otherProps = __rest(props, [\"schema\", \"form\", \"className\", \"triggerUpdate\", \"defaultControlRender\", \"afterUpdatingCb\", \"controlMap\"]);\n\n  var tabs = schema.tabs;\n  var form = Form.useForm(formInstance)[0];\n  var controlMap = React.useMemo(function () {\n    return props.controlMap ? props.controlMap : makeControlMap(xflowDefaultControls);\n  }, [props.controlMap]);\n  var innerTriggerUpdate = useCallback(function (values) {\n    if (typeof triggerUpdate === 'function') {\n      triggerUpdate(form, values);\n    }\n  }, [form, triggerUpdate]);\n  /** 初次挂载时设置一次值以激活首次联动 */\n\n  useEffect(function () {\n    form.setFieldsValue({});\n  }, [form]);\n  /** 切换标签时激活联动 */\n\n  var onClickTab = useCallback(function () {\n    requestAnimationFrame(function () {\n      form.setFieldsValue({});\n    });\n  }, [form]);\n  return React.createElement(Form, __assign({\n    size: \"small\",\n    form: form,\n    layout: \"vertical\",\n    className: classNames('xflow-json-form', className)\n  }, otherProps), React.createElement(Tabs, {\n    type: \"card\",\n    defaultActiveKey: (_b = tabs[0]) === null || _b === void 0 ? void 0 : _b.name,\n    className: classNames((_a = {}, _a['tabs'] = true, _a['xTab'] = true, _a['singleTab'] = (tabs === null || tabs === void 0 ? void 0 : tabs.length) === 1, _a['coupleTab'] = (tabs === null || tabs === void 0 ? void 0 : tabs.length) === 2, _a['ternateTab'] = (tabs === null || tabs === void 0 ? void 0 : tabs.length) === 3, _a)),\n    onTabClick: onClickTab\n  }, tabs.map(function (tab) {\n    var tabName = tab.name,\n        groups = tab.groups;\n    return React.createElement(TabPane, {\n      key: tabName,\n      tab: tabName\n    }, groups.length === 0 && React.createElement(Empty, null), groups.length > 0 && groups.map(function (group) {\n      var _a = group.controls,\n          groupControls = _a === void 0 ? [] : _a;\n\n      if (groupControls.length === 0) {\n        return React.createElement(Empty, {\n          style: {\n            padding: '12px 0'\n          }\n        });\n      }\n\n      return groupControls.map(function (control) {\n        var shape = control.shape,\n            controlName = control.name;\n        var ControlComponent = getControlFromMap(shape, controlMap, defaultControlRender);\n\n        if (!ControlComponent) {\n          Log.error('未找到对应的控件:', shape);\n          return null;\n        }\n\n        return React.createElement(ControlComponent, {\n          key: controlName,\n          form: form,\n          controlSchema: control,\n          triggerUpdate: innerTriggerUpdate,\n          afterUpdatingCb: afterUpdatingCb\n        });\n      });\n    }));\n  })));\n};","map":{"version":3,"sources":["/home/manolo/sds-ui/node_modules/@ant-design/flowchart/es/components/canvas-json-schema-form/schema-form/index.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","React","useCallback","useEffect","Empty","Form","Tabs","classNames","Log","xflowDefaultControls","makeControlMap","getControlFromMap","FormItemWrapper","TabPane","SchemaForm","props","_a","_b","schema","formInstance","form","className","triggerUpdate","defaultControlRender","afterUpdatingCb","controlMapfromParent","controlMap","otherProps","tabs","useForm","useMemo","innerTriggerUpdate","values","setFieldsValue","onClickTab","requestAnimationFrame","createElement","size","layout","type","defaultActiveKey","name","onTabClick","map","tab","tabName","groups","key","group","controls","groupControls","style","padding","control","shape","controlName","ControlComponent","error","controlSchema"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useCallback, useEffect } from 'react';\nimport { Empty, Form, Tabs } from 'antd';\nimport classNames from 'classnames';\nimport { Log } from '../../../util';\nimport { xflowDefaultControls, makeControlMap, getControlFromMap } from './control-map/index';\nexport { FormItemWrapper } from './common/form-item-wrapper';\nvar TabPane = Tabs.TabPane;\nexport var SchemaForm = function (props) {\n    var _a;\n    var _b;\n    var schema = props.schema, formInstance = props.form, className = props.className, triggerUpdate = props.triggerUpdate, defaultControlRender = props.defaultControlRender, afterUpdatingCb = props.afterUpdatingCb, controlMapfromParent = props.controlMap, otherProps = __rest(props, [\"schema\", \"form\", \"className\", \"triggerUpdate\", \"defaultControlRender\", \"afterUpdatingCb\", \"controlMap\"]);\n    var tabs = schema.tabs;\n    var form = Form.useForm(formInstance)[0];\n    var controlMap = React.useMemo(function () { return (props.controlMap ? props.controlMap : makeControlMap(xflowDefaultControls)); }, [props.controlMap]);\n    var innerTriggerUpdate = useCallback(function (values) {\n        if (typeof triggerUpdate === 'function') {\n            triggerUpdate(form, values);\n        }\n    }, [form, triggerUpdate]);\n    /** 初次挂载时设置一次值以激活首次联动 */\n    useEffect(function () {\n        form.setFieldsValue({});\n    }, [form]);\n    /** 切换标签时激活联动 */\n    var onClickTab = useCallback(function () {\n        requestAnimationFrame(function () {\n            form.setFieldsValue({});\n        });\n    }, [form]);\n    return (React.createElement(Form, __assign({ size: \"small\", form: form, layout: \"vertical\", className: classNames('xflow-json-form', className) }, otherProps),\n        React.createElement(Tabs, { type: \"card\", defaultActiveKey: (_b = tabs[0]) === null || _b === void 0 ? void 0 : _b.name, className: classNames((_a = {},\n                _a['tabs'] = true,\n                _a['xTab'] = true,\n                _a['singleTab'] = (tabs === null || tabs === void 0 ? void 0 : tabs.length) === 1,\n                _a['coupleTab'] = (tabs === null || tabs === void 0 ? void 0 : tabs.length) === 2,\n                _a['ternateTab'] = (tabs === null || tabs === void 0 ? void 0 : tabs.length) === 3,\n                _a)), onTabClick: onClickTab }, tabs.map(function (tab) {\n            var tabName = tab.name, groups = tab.groups;\n            return (React.createElement(TabPane, { key: tabName, tab: tabName },\n                groups.length === 0 && React.createElement(Empty, null),\n                groups.length > 0 &&\n                    groups.map(function (group) {\n                        var _a = group.controls, groupControls = _a === void 0 ? [] : _a;\n                        if (groupControls.length === 0) {\n                            return React.createElement(Empty, { style: { padding: '12px 0' } });\n                        }\n                        return groupControls.map(function (control) {\n                            var shape = control.shape, controlName = control.name;\n                            var ControlComponent = getControlFromMap(shape, controlMap, defaultControlRender);\n                            if (!ControlComponent) {\n                                Log.error('未找到对应的控件:', shape);\n                                return null;\n                            }\n                            return (React.createElement(ControlComponent, { key: controlName, form: form, controlSchema: control, triggerUpdate: innerTriggerUpdate, afterUpdatingCb: afterUpdatingCb }));\n                        });\n                    })));\n        }))));\n};\n"]},"metadata":{},"sourceType":"module"}