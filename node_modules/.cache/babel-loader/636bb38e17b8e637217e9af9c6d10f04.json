{"ast":null,"code":"import _defineProperty from \"/home/manolo/sds-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { ObjectExt } from '../../util';\nimport { Base } from '../base';\nexport function getMarkup(tagName) {\n  var noText = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return \"<g class=\\\"rotatable\\\"><g class=\\\"scalable\\\"><\".concat(tagName, \"/></g>\").concat(noText ? '' : '<text/>', \"</g>\");\n}\nexport function getName(name) {\n  return \"basic.\".concat(name);\n}\nexport function getImageUrlHook() {\n  var attrName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'xlink:href';\n\n  var hook = function hook(metadata) {\n    var imageUrl = metadata.imageUrl,\n        imageWidth = metadata.imageWidth,\n        imageHeight = metadata.imageHeight,\n        others = __rest(metadata, [\"imageUrl\", \"imageWidth\", \"imageHeight\"]);\n\n    if (imageUrl != null || imageWidth != null || imageHeight != null) {\n      var apply = function apply() {\n        if (others.attrs) {\n          var image = others.attrs.image;\n\n          if (imageUrl != null) {\n            image[attrName] = imageUrl;\n          }\n\n          if (imageWidth != null) {\n            image.width = imageWidth;\n          }\n\n          if (imageHeight != null) {\n            image.height = imageHeight;\n          }\n\n          others.attrs.image = image;\n        }\n      };\n\n      if (others.attrs) {\n        if (others.attrs.image == null) {\n          others.attrs.image = {};\n        }\n\n        apply();\n      } else {\n        others.attrs = {\n          image: {}\n        };\n        apply();\n      }\n    }\n\n    return others;\n  };\n\n  return hook;\n}\nexport function createShape(shape, config) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var name = getName(shape);\n  var defaults = {\n    constructorName: name,\n    attrs: _defineProperty({\n      '.': {\n        fill: '#ffffff',\n        stroke: 'none'\n      }\n    }, shape, {\n      fill: '#ffffff',\n      stroke: '#000000'\n    })\n  };\n\n  if (!options.ignoreMarkup) {\n    defaults.markup = getMarkup(shape, options.noText === true);\n  }\n\n  var base = options.parent || Base;\n  return base.define(ObjectExt.merge(defaults, config, {\n    shape: name\n  }));\n}","map":{"version":3,"sources":["../../../src/shape/basic/util.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,SAAS,SAAT,QAA0B,YAA1B;AAGA,SAAS,IAAT,QAAqB,SAArB;AAEA,OAAM,SAAU,SAAV,CAAoB,OAApB,EAAmD;AAAA,MAAd,MAAc,uEAAL,KAAK;AACvD,iEAAoD,OAApD,mBACE,MAAM,GAAG,EAAH,GAAQ,SADhB;AAGD;AAED,OAAM,SAAU,OAAV,CAAkB,IAAlB,EAA8B;AAClC,yBAAgB,IAAhB;AACD;AAED,OAAM,SAAU,eAAV,GAAiD;AAAA,MAAvB,QAAuB,uEAAZ,YAAY;;AACrD,MAAM,IAAI,GAAkB,SAAtB,IAAsB,CAAC,QAAD,EAAa;AACvC,QAAQ,QAAR,GAAyD,QAAzD,CAAQ,QAAR;AAAA,QAAkB,UAAlB,GAAyD,QAAzD,CAAkB,UAAlB;AAAA,QAA8B,WAA9B,GAAyD,QAAzD,CAA8B,WAA9B;AAAA,QAA8C,MAA9C,GAAoD,MAAA,CAAK,QAAL,EAA9C,CAAA,UAAA,EAAA,YAAA,EAAA,aAAA,CAA8C,CAApD;;AACA,QAAI,QAAQ,IAAI,IAAZ,IAAoB,UAAU,IAAI,IAAlC,IAA0C,WAAW,IAAI,IAA7D,EAAmE;AACjE,UAAM,KAAK,GAAG,SAAR,KAAQ,GAAK;AACjB,YAAI,MAAM,CAAC,KAAX,EAAkB;AAChB,cAAM,KAAK,GAAG,MAAM,CAAC,KAAP,CAAa,KAA3B;;AACA,cAAI,QAAQ,IAAI,IAAhB,EAAsB;AACpB,YAAA,KAAK,CAAC,QAAD,CAAL,GAAkB,QAAlB;AACD;;AACD,cAAI,UAAU,IAAI,IAAlB,EAAwB;AACtB,YAAA,KAAK,CAAC,KAAN,GAAc,UAAd;AACD;;AACD,cAAI,WAAW,IAAI,IAAnB,EAAyB;AACvB,YAAA,KAAK,CAAC,MAAN,GAAe,WAAf;AACD;;AACD,UAAA,MAAM,CAAC,KAAP,CAAa,KAAb,GAAqB,KAArB;AACD;AACF,OAdD;;AAgBA,UAAI,MAAM,CAAC,KAAX,EAAkB;AAChB,YAAI,MAAM,CAAC,KAAP,CAAa,KAAb,IAAsB,IAA1B,EAAgC;AAC9B,UAAA,MAAM,CAAC,KAAP,CAAa,KAAb,GAAqB,EAArB;AACD;;AACD,QAAA,KAAK;AACN,OALD,MAKO;AACL,QAAA,MAAM,CAAC,KAAP,GAAe;AACb,UAAA,KAAK,EAAE;AADM,SAAf;AAGA,QAAA,KAAK;AACN;AACF;;AAED,WAAO,MAAP;AACD,GAjCD;;AAmCA,SAAO,IAAP;AACD;AAED,OAAM,SAAU,WAAV,CACJ,KADI,EAEJ,MAFI,EAOE;AAAA,MAJN,OAIM,uEAAF,EAAE;AAEN,MAAM,IAAI,GAAG,OAAO,CAAC,KAAD,CAApB;AACA,MAAM,QAAQ,GAAgB;AAC5B,IAAA,eAAe,EAAE,IADW;AAE5B,IAAA,KAAK;AACH,WAAK;AACH,QAAA,IAAI,EAAE,SADH;AAEH,QAAA,MAAM,EAAE;AAFL;AADF,OAKF,KALE,EAKM;AACP,MAAA,IAAI,EAAE,SADC;AAEP,MAAA,MAAM,EAAE;AAFD,KALN;AAFuB,GAA9B;;AAcA,MAAI,CAAC,OAAO,CAAC,YAAb,EAA2B;AACzB,IAAA,QAAQ,CAAC,MAAT,GAAkB,SAAS,CAAC,KAAD,EAAQ,OAAO,CAAC,MAAR,KAAmB,IAA3B,CAA3B;AACD;;AAED,MAAM,IAAI,GAAG,OAAO,CAAC,MAAR,IAAkB,IAA/B;AACA,SAAO,IAAI,CAAC,MAAL,CACL,SAAS,CAAC,KAAV,CAAgB,QAAhB,EAA0B,MAA1B,EAAkC;AAAE,IAAA,KAAK,EAAE;AAAT,GAAlC,CADK,CAAP;AAGD","sourceRoot":"","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '../../util';\nimport { Base } from '../base';\nexport function getMarkup(tagName, noText = false) {\n    return `<g class=\"rotatable\"><g class=\"scalable\"><${tagName}/></g>${noText ? '' : '<text/>'}</g>`;\n}\nexport function getName(name) {\n    return `basic.${name}`;\n}\nexport function getImageUrlHook(attrName = 'xlink:href') {\n    const hook = (metadata) => {\n        const { imageUrl, imageWidth, imageHeight } = metadata, others = __rest(metadata, [\"imageUrl\", \"imageWidth\", \"imageHeight\"]);\n        if (imageUrl != null || imageWidth != null || imageHeight != null) {\n            const apply = () => {\n                if (others.attrs) {\n                    const image = others.attrs.image;\n                    if (imageUrl != null) {\n                        image[attrName] = imageUrl;\n                    }\n                    if (imageWidth != null) {\n                        image.width = imageWidth;\n                    }\n                    if (imageHeight != null) {\n                        image.height = imageHeight;\n                    }\n                    others.attrs.image = image;\n                }\n            };\n            if (others.attrs) {\n                if (others.attrs.image == null) {\n                    others.attrs.image = {};\n                }\n                apply();\n            }\n            else {\n                others.attrs = {\n                    image: {},\n                };\n                apply();\n            }\n        }\n        return others;\n    };\n    return hook;\n}\nexport function createShape(shape, config, options = {}) {\n    const name = getName(shape);\n    const defaults = {\n        constructorName: name,\n        attrs: {\n            '.': {\n                fill: '#ffffff',\n                stroke: 'none',\n            },\n            [shape]: {\n                fill: '#ffffff',\n                stroke: '#000000',\n            },\n        },\n    };\n    if (!options.ignoreMarkup) {\n        defaults.markup = getMarkup(shape, options.noText === true);\n    }\n    const base = options.parent || Base;\n    return base.define(ObjectExt.merge(defaults, config, { shape: name }));\n}\n//# sourceMappingURL=util.js.map"]},"metadata":{},"sourceType":"module"}