{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport Base from '../base'; // 网格背景图片\n\nvar GRID_PNG = 'url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)';\n\nvar Grid =\n/** @class */\nfunction (_super) {\n  __extends(Grid, _super);\n\n  function Grid(config) {\n    return _super.call(this, config) || this;\n  }\n\n  Grid.prototype.getDefaultCfgs = function () {\n    return {\n      img: GRID_PNG,\n      follow: true\n    };\n  };\n\n  Grid.prototype.init = function () {\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var canvas = graph.get('canvas').get('el');\n    var img = this.get('img') || GRID_PNG;\n    var container = createDom(\"<div class='g6-grid-container' style=\\\"position:absolute;overflow:hidden;z-index: -1;\\\"></div>\");\n    var gridContainer = createDom(\"<div\\n        class='g6-grid'\\n        style='position:absolute;\\n        background-image: \" + img + \";\\n        user-select: none\\n        '></div>\");\n    this.set('container', container);\n    this.set('gridContainer', gridContainer);\n    this.positionInit();\n    container.appendChild(gridContainer);\n    graphContainer.insertBefore(container, canvas);\n  };\n  /** 定位信息初始化 */\n\n\n  Grid.prototype.positionInit = function () {\n    var graph = this.get('graph');\n    var minZoom = graph.get('minZoom');\n    var width = graph.get('width');\n    var height = graph.get('height');\n    modifyCSS(this.get('container'), {\n      width: width + \"px\",\n      height: height + \"px\"\n    }); // 网格 40*40 需保证 (gridContainerWidth / 2) % 40 = 0 才能让网格线对齐左上角 故 * 80\n\n    var gridContainerWidth = width * 80 / minZoom;\n    var gridContainerHeight = height * 80 / minZoom;\n    modifyCSS(this.get('gridContainer'), {\n      width: gridContainerWidth + \"px\",\n      height: gridContainerHeight + \"px\",\n      left: \"-\" + gridContainerWidth / 2 + \"px\",\n      top: \"-\" + gridContainerHeight / 2 + \"px\"\n    });\n  }; // class-methods-use-this\n\n\n  Grid.prototype.getEvents = function () {\n    return {\n      viewportchange: 'updateGrid'\n    };\n  };\n  /**\n   * viewport change 事件的响应函数\n   * @param param\n   */\n\n\n  Grid.prototype.updateGrid = function (param) {\n    var gridContainer = this.get('gridContainer');\n    var matrix = param.matrix;\n    if (!matrix) matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var isFollow = this.get('follow');\n    var transform = \"matrix(\" + matrix[0] + \", \" + matrix[1] + \", \" + matrix[3] + \", \" + matrix[4] + \", \" + (isFollow ? matrix[6] : '0') + \", \" + (isFollow ? matrix[7] : '0') + \")\";\n    modifyCSS(gridContainer, {\n      transform: transform\n    });\n  };\n\n  Grid.prototype.getContainer = function () {\n    return this.get('container');\n  };\n\n  Grid.prototype.destroy = function () {\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var container = this.get('container');\n    graphContainer.removeChild(container);\n  };\n\n  return Grid;\n}(Base);\n\nexport default Grid;","map":{"version":3,"sources":["/home/manolo/sds-ui/node_modules/@antv/g6-plugin/es/grid/index.js"],"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","modifyCSS","createDom","Base","GRID_PNG","Grid","_super","config","getDefaultCfgs","img","follow","init","graph","get","graphContainer","canvas","container","gridContainer","set","positionInit","appendChild","insertBefore","minZoom","width","height","gridContainerWidth","gridContainerHeight","left","top","getEvents","viewportchange","updateGrid","param","matrix","isFollow","transform","getContainer","destroy","removeChild"],"mappings":"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","sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport Base from '../base'; // 网格背景图片\n\nvar GRID_PNG = 'url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)';\n\nvar Grid =\n/** @class */\nfunction (_super) {\n  __extends(Grid, _super);\n\n  function Grid(config) {\n    return _super.call(this, config) || this;\n  }\n\n  Grid.prototype.getDefaultCfgs = function () {\n    return {\n      img: GRID_PNG,\n      follow: true\n    };\n  };\n\n  Grid.prototype.init = function () {\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var canvas = graph.get('canvas').get('el');\n    var img = this.get('img') || GRID_PNG;\n    var container = createDom(\"<div class='g6-grid-container' style=\\\"position:absolute;overflow:hidden;z-index: -1;\\\"></div>\");\n    var gridContainer = createDom(\"<div\\n        class='g6-grid'\\n        style='position:absolute;\\n        background-image: \" + img + \";\\n        user-select: none\\n        '></div>\");\n    this.set('container', container);\n    this.set('gridContainer', gridContainer);\n    this.positionInit();\n    container.appendChild(gridContainer);\n    graphContainer.insertBefore(container, canvas);\n  };\n  /** 定位信息初始化 */\n\n\n  Grid.prototype.positionInit = function () {\n    var graph = this.get('graph');\n    var minZoom = graph.get('minZoom');\n    var width = graph.get('width');\n    var height = graph.get('height');\n    modifyCSS(this.get('container'), {\n      width: width + \"px\",\n      height: height + \"px\"\n    }); // 网格 40*40 需保证 (gridContainerWidth / 2) % 40 = 0 才能让网格线对齐左上角 故 * 80\n\n    var gridContainerWidth = width * 80 / minZoom;\n    var gridContainerHeight = height * 80 / minZoom;\n    modifyCSS(this.get('gridContainer'), {\n      width: gridContainerWidth + \"px\",\n      height: gridContainerHeight + \"px\",\n      left: \"-\" + gridContainerWidth / 2 + \"px\",\n      top: \"-\" + gridContainerHeight / 2 + \"px\"\n    });\n  }; // class-methods-use-this\n\n\n  Grid.prototype.getEvents = function () {\n    return {\n      viewportchange: 'updateGrid'\n    };\n  };\n  /**\n   * viewport change 事件的响应函数\n   * @param param\n   */\n\n\n  Grid.prototype.updateGrid = function (param) {\n    var gridContainer = this.get('gridContainer');\n    var matrix = param.matrix;\n    if (!matrix) matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var isFollow = this.get('follow');\n    var transform = \"matrix(\" + matrix[0] + \", \" + matrix[1] + \", \" + matrix[3] + \", \" + matrix[4] + \", \" + (isFollow ? matrix[6] : '0') + \", \" + (isFollow ? matrix[7] : '0') + \")\";\n    modifyCSS(gridContainer, {\n      transform: transform\n    });\n  };\n\n  Grid.prototype.getContainer = function () {\n    return this.get('container');\n  };\n\n  Grid.prototype.destroy = function () {\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var container = this.get('container');\n    graphContainer.removeChild(container);\n  };\n\n  return Grid;\n}(Base);\n\nexport default Grid;"]},"metadata":{},"sourceType":"module"}