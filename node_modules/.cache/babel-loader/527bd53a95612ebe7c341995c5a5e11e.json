{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { IconStore, MODELS, XFlowGraphCommands } from '@antv/xflow-core';\nimport { ZoomInOutlined, ZoomOutOutlined, OneToOneOutlined, CompressOutlined, FullscreenOutlined, FullscreenExitOutlined } from '@ant-design/icons';\nimport { createToolbarConfig } from '../canvas-toolbar';\nexport var CANVAS_SCALE_TOOLBAR_CONFIG;\n\n(function (CANVAS_SCALE_TOOLBAR_CONFIG) {\n  IconStore.set('ZoomInOutlined', ZoomInOutlined);\n  IconStore.set('ZoomOutOutlined', ZoomOutOutlined);\n  IconStore.set('OneToOneOutlined', OneToOneOutlined);\n  IconStore.set('CompressOutlined', CompressOutlined);\n  IconStore.set('FullscreenOutlined', FullscreenOutlined);\n  IconStore.set('FullscreenExitOutlined', FullscreenExitOutlined);\n  CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_IN = XFlowGraphCommands.GRAPH_ZOOM.id + '-zoom-in';\n  CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_OUT = XFlowGraphCommands.GRAPH_ZOOM.id + '-zoom-out';\n  CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_ONE = XFlowGraphCommands.GRAPH_ZOOM.id + '-scale-to-one';\n  CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_FIT = XFlowGraphCommands.GRAPH_ZOOM.id + '-scale-to-fit';\n  CANVAS_SCALE_TOOLBAR_CONFIG.MAX_SCALE = 1.5;\n  CANVAS_SCALE_TOOLBAR_CONFIG.MIN_SCALE = 0.05;\n  CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions = {\n    maxScale: CANVAS_SCALE_TOOLBAR_CONFIG.MAX_SCALE,\n    minScale: CANVAS_SCALE_TOOLBAR_CONFIG.MIN_SCALE\n  };\n\n  CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig = function (zoomFactor) {\n    return [{\n      name: 'main',\n      items: [{\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_IN,\n        tooltip: '放大',\n        iconName: 'ZoomInOutlined',\n        onClick: function onClick(_a) {\n          var commandService = _a.commandService;\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: 0.1,\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_OUT,\n        tooltip: '缩小',\n        iconName: 'ZoomOutOutlined',\n        onClick: function onClick(_a) {\n          var commandService = _a.commandService;\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: -0.1,\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_ONE,\n        iconName: 'OneToOneOutlined',\n        tooltip: '缩放到1:1',\n        isEnabled: zoomFactor !== 1,\n        onClick: function onClick(_a) {\n          var commandService = _a.commandService;\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: 'real',\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_FIT,\n        tooltip: '缩放到适应屏幕',\n        iconName: 'CompressOutlined',\n        onClick: function onClick(_a) {\n          var commandService = _a.commandService;\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: 'fit',\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }]\n    }];\n  };\n})(CANVAS_SCALE_TOOLBAR_CONFIG || (CANVAS_SCALE_TOOLBAR_CONFIG = {}));\n\nexport var TOOLBAR_TYPE = 'CANVAS_SCALE_TOOLBAR';\nexport var useConfig = createToolbarConfig(function (config) {\n  config.setToolbarModelService(function (model, modelService) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var graphScale, graphScaleModel;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , MODELS.GRAPH_SCALE.useValue(modelService)];\n\n          case 1:\n            graphScale = _a.sent();\n            /** 设置初始值*/\n\n            model.setValue(function (m) {\n              m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig(graphScale.zoomFactor);\n            });\n            return [4\n            /*yield*/\n            , MODELS.GRAPH_SCALE.getModel(modelService)];\n\n          case 2:\n            graphScaleModel = _a.sent();\n            /** graphScaleModel更新时联动 Toolbar*/\n\n            graphScaleModel.watch(function (_a) {\n              var zoomFactor = _a.zoomFactor;\n              model.setValue(function (m) {\n                m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig(zoomFactor);\n              });\n            });\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  });\n});","map":{"version":3,"sources":["/home/manolo/sds-ui/node_modules/@ant-design/flowchart/es/components/canvas-scale-toolbar/config.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","IconStore","MODELS","XFlowGraphCommands","ZoomInOutlined","ZoomOutOutlined","OneToOneOutlined","CompressOutlined","FullscreenOutlined","FullscreenExitOutlined","createToolbarConfig","CANVAS_SCALE_TOOLBAR_CONFIG","set","ZOOM_IN","GRAPH_ZOOM","id","ZOOM_OUT","SCALE_TO_ONE","SCALE_TO_FIT","MAX_SCALE","MIN_SCALE","zoomOptions","maxScale","minScale","getToolbarConfig","zoomFactor","name","items","tooltip","iconName","onClick","_a","commandService","executeCommand","factor","isEnabled","TOOLBAR_TYPE","useConfig","config","setToolbarModelService","model","modelService","graphScale","graphScaleModel","GRAPH_SCALE","useValue","setValue","m","mainGroups","getModel","watch"],"mappings":"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","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { IconStore, MODELS, XFlowGraphCommands } from '@antv/xflow-core';\nimport { ZoomInOutlined, ZoomOutOutlined, OneToOneOutlined, CompressOutlined, FullscreenOutlined, FullscreenExitOutlined, } from '@ant-design/icons';\nimport { createToolbarConfig } from '../canvas-toolbar';\nexport var CANVAS_SCALE_TOOLBAR_CONFIG;\n(function (CANVAS_SCALE_TOOLBAR_CONFIG) {\n    IconStore.set('ZoomInOutlined', ZoomInOutlined);\n    IconStore.set('ZoomOutOutlined', ZoomOutOutlined);\n    IconStore.set('OneToOneOutlined', OneToOneOutlined);\n    IconStore.set('CompressOutlined', CompressOutlined);\n    IconStore.set('FullscreenOutlined', FullscreenOutlined);\n    IconStore.set('FullscreenExitOutlined', FullscreenExitOutlined);\n    CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_IN = XFlowGraphCommands.GRAPH_ZOOM.id + '-zoom-in';\n    CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_OUT = XFlowGraphCommands.GRAPH_ZOOM.id + '-zoom-out';\n    CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_ONE = XFlowGraphCommands.GRAPH_ZOOM.id + '-scale-to-one';\n    CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_FIT = XFlowGraphCommands.GRAPH_ZOOM.id + '-scale-to-fit';\n    CANVAS_SCALE_TOOLBAR_CONFIG.MAX_SCALE = 1.5;\n    CANVAS_SCALE_TOOLBAR_CONFIG.MIN_SCALE = 0.05;\n    CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions = {\n        maxScale: CANVAS_SCALE_TOOLBAR_CONFIG.MAX_SCALE,\n        minScale: CANVAS_SCALE_TOOLBAR_CONFIG.MIN_SCALE,\n    };\n    CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig = function (zoomFactor) {\n        return [\n            {\n                name: 'main',\n                items: [\n                    {\n                        id: CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_IN,\n                        tooltip: '放大',\n                        iconName: 'ZoomInOutlined',\n                        onClick: function (_a) {\n                            var commandService = _a.commandService;\n                            commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n                                factor: 0.1,\n                                zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions,\n                            });\n                        },\n                    },\n                    {\n                        id: CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_OUT,\n                        tooltip: '缩小',\n                        iconName: 'ZoomOutOutlined',\n                        onClick: function (_a) {\n                            var commandService = _a.commandService;\n                            commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n                                factor: -0.1,\n                                zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions,\n                            });\n                        },\n                    },\n                    {\n                        id: CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_ONE,\n                        iconName: 'OneToOneOutlined',\n                        tooltip: '缩放到1:1',\n                        isEnabled: zoomFactor !== 1,\n                        onClick: function (_a) {\n                            var commandService = _a.commandService;\n                            commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n                                factor: 'real',\n                                zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions,\n                            });\n                        },\n                    },\n                    {\n                        id: CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_FIT,\n                        tooltip: '缩放到适应屏幕',\n                        iconName: 'CompressOutlined',\n                        onClick: function (_a) {\n                            var commandService = _a.commandService;\n                            commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n                                factor: 'fit',\n                                zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions,\n                            });\n                        },\n                    },\n                ],\n            },\n        ];\n    };\n})(CANVAS_SCALE_TOOLBAR_CONFIG || (CANVAS_SCALE_TOOLBAR_CONFIG = {}));\nexport var TOOLBAR_TYPE = 'CANVAS_SCALE_TOOLBAR';\nexport var useConfig = createToolbarConfig(function (config) {\n    config.setToolbarModelService(function (model, modelService) { return __awaiter(void 0, void 0, void 0, function () {\n        var graphScale, graphScaleModel;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, MODELS.GRAPH_SCALE.useValue(modelService)];\n                case 1:\n                    graphScale = _a.sent();\n                    /** 设置初始值*/\n                    model.setValue(function (m) {\n                        m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig(graphScale.zoomFactor);\n                    });\n                    return [4 /*yield*/, MODELS.GRAPH_SCALE.getModel(modelService)];\n                case 2:\n                    graphScaleModel = _a.sent();\n                    /** graphScaleModel更新时联动 Toolbar*/\n                    graphScaleModel.watch(function (_a) {\n                        var zoomFactor = _a.zoomFactor;\n                        model.setValue(function (m) {\n                            m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig(zoomFactor);\n                        });\n                    });\n                    return [2 /*return*/];\n            }\n        });\n    }); });\n});\n"]},"metadata":{},"sourceType":"module"}