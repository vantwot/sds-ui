{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\n\nvar earth_1 = require(\"../crs/earth\");\n\nvar util_1 = require(\"../../util\");\n\nvar lng_lat_bounds_1 = require(\"./lng-lat-bounds\");\n\nvar LngLat =\n/** @class */\nfunction () {\n  function LngLat(lng, lat, alt) {\n    if (isNaN(lat) || isNaN(lng)) {\n      throw new Error(\"\\u65E0\\u6548\\u7684\\u7ECF\\u7EAC\\u5EA6\\u53C2\\u6570: (\" + lng + \",' \" + lat);\n    }\n\n    this.lat = +lat;\n    this.lng = +lng;\n\n    if (alt !== undefined) {\n      this.alt = +alt;\n    }\n  }\n\n  LngLat.prototype.equals = function (lnglat, threshold) {\n    if (!lnglat) {\n      return false;\n    }\n\n    var newLnglat = toLngLat(lnglat);\n\n    if (newLnglat === undefined) {\n      return false;\n    }\n\n    var margin = Math.max(Math.abs(this.lat - newLnglat.lat), Math.abs(this.lng - newLnglat.lng));\n    return margin <= (threshold === undefined ? 1.0e-9 : threshold);\n  };\n\n  LngLat.prototype.toString = function (precision) {\n    return \"LngLat(\" + util_1.formatNum(this.lng, precision) + \", \" + util_1.formatNum(this.lat, precision) + \")\";\n  };\n\n  LngLat.prototype.distanceTo = function (other) {\n    return earth_1.earth.distance(this, toLngLat(other));\n  };\n\n  LngLat.prototype.wrap = function () {\n    // console.log(earth.infinite);\n    return earth_1.earth.wrapLngLat(this);\n  };\n\n  LngLat.prototype.toBounds = function (sizeInMeters) {\n    var latAccuracy = 180 * sizeInMeters / 40075017;\n    var lngAccuracy = latAccuracy / Math.cos(Math.PI / 180 * this.lat);\n    return lng_lat_bounds_1.toLngLatBounds([this.lng - lngAccuracy, this.lat - latAccuracy], [this.lng + lngAccuracy, this.lat + latAccuracy]);\n  };\n\n  LngLat.prototype.clone = function () {\n    return new LngLat(this.lng, this.lat, this.alt);\n  };\n\n  return LngLat;\n}();\n\nexports.LngLat = LngLat;\n\nfunction toLngLat(a, b, c) {\n  if (a instanceof LngLat) {\n    return a;\n  }\n\n  if (Array.isArray(a) && typeof a[0] !== 'object') {\n    if (a.length === 3) {\n      return new LngLat(a[0], a[1], a[2]);\n    }\n\n    if (a.length === 2) {\n      return new LngLat(a[0], a[1]);\n    }\n  }\n\n  if (a === undefined || a === null) {\n    throw new Error(\"\\u65E0\\u6548\\u7684\\u7ECF\\u7EAC\\u5EA6\\u53C2\\u6570: (\" + a + \", \" + b + \")\");\n  }\n\n  if (typeof a === 'object' && 'lat' in a) {\n    return new LngLat(a.lng, 'lng' in a ? a.lat : 0, a.alt);\n  }\n\n  if (b === undefined) {\n    throw new Error(\"\\u65E0\\u6548\\u7684\\u7ECF\\u7EAC\\u5EA6\\u53C2\\u6570: (\" + a + \", \" + b + \")\");\n  }\n\n  return new LngLat(Number(a), b, c);\n}\n\nexports.toLngLat = toLngLat;","map":{"version":3,"sources":["../../../src/geo/geometry/lng-lat.ts"],"names":[],"mappings":";;;;AAAA,IAAA,OAAA,GAAA,OAAA,CAAA,cAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;AACA,IAAA,gBAAA,GAAA,OAAA,CAAA,kBAAA,CAAA;;AAGA,IAAA,MAAA;AAAA;AAAA,YAAA;AAIE,WAAA,MAAA,CAAY,GAAZ,EAAyB,GAAzB,EAAsC,GAAtC,EAAkD;AAChD,QAAI,KAAK,CAAC,GAAD,CAAL,IAAc,KAAK,CAAC,GAAD,CAAvB,EAA8B;AAC5B,YAAM,IAAI,KAAJ,CAAU,wDAAc,GAAd,GAAiB,KAAjB,GAAuB,GAAjC,CAAN;AACD;;AACD,SAAK,GAAL,GAAW,CAAC,GAAZ;AACA,SAAK,GAAL,GAAW,CAAC,GAAZ;;AACA,QAAI,GAAG,KAAK,SAAZ,EAAuB;AACrB,WAAK,GAAL,GAAW,CAAC,GAAZ;AACD;AACF;;AACD,EAAA,MAAA,CAAA,SAAA,CAAA,MAAA,GAAA,UAAO,MAAP,EAAiC,SAAjC,EAAmD;AACjD,QAAI,CAAC,MAAL,EAAa;AACX,aAAO,KAAP;AACD;;AACD,QAAM,SAAS,GAAY,QAAQ,CAAC,MAAD,CAAnC;;AACA,QAAI,SAAS,KAAK,SAAlB,EAA6B;AAC3B,aAAO,KAAP;AACD;;AACD,QAAM,MAAM,GAAG,IAAI,CAAC,GAAL,CACb,IAAI,CAAC,GAAL,CAAS,KAAK,GAAL,GAAW,SAAS,CAAC,GAA9B,CADa,EAEb,IAAI,CAAC,GAAL,CAAS,KAAK,GAAL,GAAW,SAAS,CAAC,GAA9B,CAFa,CAAf;AAIA,WAAO,MAAM,KAAK,SAAS,KAAK,SAAd,GAA0B,MAA1B,GAAmC,SAAxC,CAAb;AACD,GAbD;;AAcA,EAAA,MAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAS,SAAT,EAA0B;AACxB,WACE,YAAU,MAAA,CAAA,SAAA,CAAU,KAAK,GAAf,EAAoB,SAApB,CAAV,GAAwC,IAAxC,GAA6C,MAAA,CAAA,SAAA,CAAU,KAAK,GAAf,EAAoB,SAApB,CAA7C,GAA2E,GAD7E;AAGD,GAJD;;AAKA,EAAA,MAAA,CAAA,SAAA,CAAA,UAAA,GAAA,UAAW,KAAX,EAAiC;AAC/B,WAAO,OAAA,CAAA,KAAA,CAAM,QAAN,CAAe,IAAf,EAAqB,QAAQ,CAAC,KAAD,CAA7B,CAAP;AACD,GAFD;;AAGA,EAAA,MAAA,CAAA,SAAA,CAAA,IAAA,GAAA,YAAA;AACE;AACA,WAAO,OAAA,CAAA,KAAA,CAAM,UAAN,CAAiB,IAAjB,CAAP;AACD,GAHD;;AAIA,EAAA,MAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAS,YAAT,EAA4B;AAC1B,QAAM,WAAW,GAAG,MAAM,YAAN,GAAqB,QAAzC;AACA,QAAM,WAAW,GAAG,WAAW,GAAG,IAAI,CAAC,GAAL,CAAU,IAAI,CAAC,EAAL,GAAU,GAAX,GAAkB,KAAK,GAAhC,CAAlC;AAEA,WAAO,gBAAA,CAAA,cAAA,CACG,CAAC,KAAK,GAAL,GAAW,WAAZ,EAAyB,KAAK,GAAL,GAAW,WAApC,CADH,EAEG,CAAC,KAAK,GAAL,GAAW,WAAZ,EAAyB,KAAK,GAAL,GAAW,WAApC,CAFH,CAAP;AAGD,GAPD;;AAQA,EAAA,MAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AACE,WAAO,IAAI,MAAJ,CAAW,KAAK,GAAhB,EAAqB,KAAK,GAA1B,EAA+B,KAAK,GAApC,CAAP;AACD,GAFD;;AAGF,SAAA,MAAA;AAAC,CAnDD,EAAA;;AAAa,OAAA,CAAA,MAAA,GAAA,MAAA;;AAoDb,SAAgB,QAAhB,CACE,CADF,EAEE,CAFF,EAGE,CAHF,EAGY;AAEV,MAAI,CAAC,YAAY,MAAjB,EAAyB;AACvB,WAAO,CAAP;AACD;;AACD,MAAI,KAAK,CAAC,OAAN,CAAc,CAAd,KAAoB,OAAO,CAAC,CAAC,CAAD,CAAR,KAAgB,QAAxC,EAAkD;AAChD,QAAI,CAAC,CAAC,MAAF,KAAa,CAAjB,EAAoB;AAClB,aAAO,IAAI,MAAJ,CAAW,CAAC,CAAC,CAAD,CAAZ,EAAiB,CAAC,CAAC,CAAD,CAAlB,EAAuB,CAAC,CAAC,CAAD,CAAxB,CAAP;AACD;;AACD,QAAI,CAAC,CAAC,MAAF,KAAa,CAAjB,EAAoB;AAClB,aAAO,IAAI,MAAJ,CAAW,CAAC,CAAC,CAAD,CAAZ,EAAiB,CAAC,CAAC,CAAD,CAAlB,CAAP;AACD;AACF;;AACD,MAAI,CAAC,KAAK,SAAN,IAAmB,CAAC,KAAK,IAA7B,EAAmC;AACjC,UAAM,IAAI,KAAJ,CAAU,wDAAc,CAAd,GAAe,IAAf,GAAoB,CAApB,GAAqB,GAA/B,CAAN;AACD;;AACD,MAAI,OAAO,CAAP,KAAa,QAAb,IAAyB,SAAS,CAAtC,EAAyC;AACvC,WAAO,IAAI,MAAJ,CAAW,CAAC,CAAC,GAAb,EAAkB,SAAS,CAAT,GAAa,CAAC,CAAC,GAAf,GAAqB,CAAvC,EAA0C,CAAC,CAAC,GAA5C,CAAP;AACD;;AACD,MAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,UAAM,IAAI,KAAJ,CAAU,wDAAc,CAAd,GAAe,IAAf,GAAoB,CAApB,GAAqB,GAA/B,CAAN;AACD;;AACD,SAAO,IAAI,MAAJ,CAAW,MAAM,CAAC,CAAD,CAAjB,EAAsB,CAAtB,EAAyB,CAAzB,CAAP;AACD;;AA1BD,OAAA,CAAA,QAAA,GAAA,QAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nexports.__esModule = true;\nvar earth_1 = require(\"../crs/earth\");\nvar util_1 = require(\"../../util\");\nvar lng_lat_bounds_1 = require(\"./lng-lat-bounds\");\nvar LngLat = /** @class */ (function () {\n    function LngLat(lng, lat, alt) {\n        if (isNaN(lat) || isNaN(lng)) {\n            throw new Error(\"\\u65E0\\u6548\\u7684\\u7ECF\\u7EAC\\u5EA6\\u53C2\\u6570: (\" + lng + \",' \" + lat);\n        }\n        this.lat = +lat;\n        this.lng = +lng;\n        if (alt !== undefined) {\n            this.alt = +alt;\n        }\n    }\n    LngLat.prototype.equals = function (lnglat, threshold) {\n        if (!lnglat) {\n            return false;\n        }\n        var newLnglat = toLngLat(lnglat);\n        if (newLnglat === undefined) {\n            return false;\n        }\n        var margin = Math.max(Math.abs(this.lat - newLnglat.lat), Math.abs(this.lng - newLnglat.lng));\n        return margin <= (threshold === undefined ? 1.0e-9 : threshold);\n    };\n    LngLat.prototype.toString = function (precision) {\n        return (\"LngLat(\" + util_1.formatNum(this.lng, precision) + \", \" + util_1.formatNum(this.lat, precision) + \")\");\n    };\n    LngLat.prototype.distanceTo = function (other) {\n        return earth_1.earth.distance(this, toLngLat(other));\n    };\n    LngLat.prototype.wrap = function () {\n        // console.log(earth.infinite);\n        return earth_1.earth.wrapLngLat(this);\n    };\n    LngLat.prototype.toBounds = function (sizeInMeters) {\n        var latAccuracy = 180 * sizeInMeters / 40075017;\n        var lngAccuracy = latAccuracy / Math.cos((Math.PI / 180) * this.lat);\n        return lng_lat_bounds_1.toLngLatBounds([this.lng - lngAccuracy, this.lat - latAccuracy], [this.lng + lngAccuracy, this.lat + latAccuracy]);\n    };\n    LngLat.prototype.clone = function () {\n        return new LngLat(this.lng, this.lat, this.alt);\n    };\n    return LngLat;\n}());\nexports.LngLat = LngLat;\nfunction toLngLat(a, b, c) {\n    if (a instanceof LngLat) {\n        return a;\n    }\n    if (Array.isArray(a) && typeof a[0] !== 'object') {\n        if (a.length === 3) {\n            return new LngLat(a[0], a[1], a[2]);\n        }\n        if (a.length === 2) {\n            return new LngLat(a[0], a[1]);\n        }\n    }\n    if (a === undefined || a === null) {\n        throw new Error(\"\\u65E0\\u6548\\u7684\\u7ECF\\u7EAC\\u5EA6\\u53C2\\u6570: (\" + a + \", \" + b + \")\");\n    }\n    if (typeof a === 'object' && 'lat' in a) {\n        return new LngLat(a.lng, 'lng' in a ? a.lat : 0, a.alt);\n    }\n    if (b === undefined) {\n        throw new Error(\"\\u65E0\\u6548\\u7684\\u7ECF\\u7EAC\\u5EA6\\u53C2\\u6570: (\" + a + \", \" + b + \")\");\n    }\n    return new LngLat(Number(a), b, c);\n}\nexports.toLngLat = toLngLat;\n//# sourceMappingURL=lng-lat.js.map"]},"metadata":{},"sourceType":"script"}