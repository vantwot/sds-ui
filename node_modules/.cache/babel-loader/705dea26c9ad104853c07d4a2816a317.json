{"ast":null,"code":"var _jsxFileName = \"/home/manolo/sds-ui/src/components/FilterMenu.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\n/* Components */\n\nimport FilterMultipleSelect from './FilterMultipleSelect';\nimport YearsRangeFilter from './YearsRangeFilter';\n/* UI Library Components */\n\nimport { Button, Menu } from 'antd';\n/* Icons */\n\nimport { BankOutlined, TeamOutlined, CalendarOutlined } from '@ant-design/icons';\n/* Utilities */\n\nimport { useHistory } from 'react-router-dom';\n/* UI Library Sub-components */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  SubMenu\n} = Menu;\n\nconst FilterMenu = _ref => {\n  _s();\n\n  var _core$filters, _core$filters2, _core$filters3, _core$filters4, _core$filters5, _core$filters5$years, _core$filters6, _core$filters6$years;\n\n  let {\n    core,\n    onClose\n  } = _ref;\n  const history = useHistory();\n  const [institutions, setInstitutions] = useState('');\n  const [groups, setGroups] = useState('');\n  const [years, setYears] = useState('');\n  const rootSubmenuKeys = ['institutions', 'groups', 'years'];\n  const [openKeys, setOpenKeys] = React.useState(['']);\n\n  const onOpenChange = keys => {\n    const latestOpenKey = keys.find(key => openKeys.indexOf(key) === -1);\n\n    if (rootSubmenuKeys.indexOf(latestOpenKey) === -1) {\n      setOpenKeys(keys);\n    } else {\n      setOpenKeys(latestOpenKey ? [latestOpenKey] : []);\n    }\n  };\n\n  const onClick = type => {\n    const URL = new URLSearchParams(history.location.search);\n    let filteredURL = `${history.location.pathname}?`;\n    filteredURL += URL.has('data') ? `data=${URL.get('data')}` : '';\n    filteredURL += URL.has('id') ? `id=${URL.get('id')}` : '';\n    filteredURL += URL.has('keywords') ? `&keywords=${URL.get('keywords')}` : '';\n\n    if (type !== 'institutions') {\n      filteredURL += URL.has('institutions') ? `&institutions=${URL.get('institutions')}` : '';\n    }\n\n    if (type !== 'groups') {\n      filteredURL += URL.has('groups') ? `&groups=${URL.get('groups')}` : '';\n    }\n\n    if (type !== 'years') {\n      filteredURL += URL.has('start_year') ? `&start_year=${URL.get('start_year')}` : '';\n      filteredURL += URL.has('end_year') ? `&end_year=${URL.get('end_year')}` : '';\n    }\n\n    if (type === 'institutions' && core.filters.institutions && institutions) {\n      filteredURL += `&institutions=${institutions}`;\n    }\n\n    if (type === 'groups' && core.filters.groups && groups) {\n      filteredURL += `&groups=${groups}`;\n    }\n\n    if (type === 'years' && core.filters.years.start_year && years) {\n      filteredURL += `&start_year=${years.start_year}&end_year=${years.end_year}`;\n    }\n\n    core.setURL(filteredURL);\n    history.push(filteredURL);\n    onClose();\n  };\n\n  useEffect(() => {\n    setInstitutions('');\n    setGroups('');\n    setYears(''); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [core.URL]);\n  return /*#__PURE__*/_jsxDEV(Menu, {\n    mode: \"inline\",\n    openKeys: openKeys,\n    onOpenChange: onOpenChange,\n    selectable: false,\n    children: [((_core$filters = core.filters) === null || _core$filters === void 0 ? void 0 : _core$filters.institutions) ? /*#__PURE__*/_jsxDEV(SubMenu, {\n      title: \"Instituciones\",\n      icon: /*#__PURE__*/_jsxDEV(BankOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Menu.Item, {\n        style: {\n          height: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(FilterMultipleSelect, {\n          list: (_core$filters2 = core.filters) === null || _core$filters2 === void 0 ? void 0 : _core$filters2.institutions,\n          setFilter: setInstitutions\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter__button\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            type: \"primary\",\n            onClick: () => onClick('institutions'),\n            disabled: institutions ? false : true,\n            children: \"Aplicar Filtro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)]\n      }, \"1\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)\n    }, \"institutions\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(SubMenu, {\n      title: \"Instituciones\",\n      icon: /*#__PURE__*/_jsxDEV(BankOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this),\n      disabled: true\n    }, \"institutions\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this), ((_core$filters3 = core.filters) === null || _core$filters3 === void 0 ? void 0 : _core$filters3.groups) ? /*#__PURE__*/_jsxDEV(SubMenu, {\n      title: \"Grupos\",\n      icon: /*#__PURE__*/_jsxDEV(TeamOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 52\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Menu.Item, {\n        style: {\n          height: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(FilterMultipleSelect, {\n          list: (_core$filters4 = core.filters) === null || _core$filters4 === void 0 ? void 0 : _core$filters4.groups,\n          setFilter: setGroups\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter__button\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            type: \"primary\",\n            onClick: () => onClick('groups'),\n            disabled: groups ? false : true,\n            children: \"Aplicar Filtro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this)]\n      }, \"2\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)\n    }, \"groups\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(SubMenu, {\n      title: \"Grupos\",\n      icon: /*#__PURE__*/_jsxDEV(TeamOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this),\n      disabled: true\n    }, \"groups\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }, this), ((_core$filters5 = core.filters) === null || _core$filters5 === void 0 ? void 0 : (_core$filters5$years = _core$filters5.years) === null || _core$filters5$years === void 0 ? void 0 : _core$filters5$years.start_year) ? /*#__PURE__*/_jsxDEV(SubMenu, {\n      title: \"Rango de a\\xF1os\",\n      icon: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 58\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Menu.Item, {\n        style: {\n          height: 'auto'\n        },\n        children: [((_core$filters6 = core.filters) === null || _core$filters6 === void 0 ? void 0 : (_core$filters6$years = _core$filters6.years) === null || _core$filters6$years === void 0 ? void 0 : _core$filters6$years.start_year) && /*#__PURE__*/_jsxDEV(YearsRangeFilter, {\n          filters: core.filters.years,\n          setYears: setYears\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter__button\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            type: \"primary\",\n            onClick: () => onClick('years'),\n            disabled: years ? false : true,\n            children: \"Aplicar Filtro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this)]\n      }, \"3\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }, this)\n    }, \"years\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(SubMenu, {\n      title: \"Rango de a\\xF1os\",\n      icon: /*#__PURE__*/_jsxDEV(CalendarOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }, this),\n      disabled: true\n    }, \"years\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FilterMenu, \"p9Ycgb1C8i12UwN75vDKzvwAJVA=\", false, function () {\n  return [useHistory];\n});\n\n_c = FilterMenu;\nexport default FilterMenu;\n\nvar _c;\n\n$RefreshReg$(_c, \"FilterMenu\");","map":{"version":3,"sources":["/home/manolo/sds-ui/src/components/FilterMenu.jsx"],"names":["React","useState","useEffect","FilterMultipleSelect","YearsRangeFilter","Button","Menu","BankOutlined","TeamOutlined","CalendarOutlined","useHistory","SubMenu","FilterMenu","core","onClose","history","institutions","setInstitutions","groups","setGroups","years","setYears","rootSubmenuKeys","openKeys","setOpenKeys","onOpenChange","keys","latestOpenKey","find","key","indexOf","onClick","type","URL","URLSearchParams","location","search","filteredURL","pathname","has","get","filters","start_year","end_year","setURL","push","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\n/* Components */\nimport FilterMultipleSelect from './FilterMultipleSelect';\nimport YearsRangeFilter from './YearsRangeFilter';\n\n/* UI Library Components */\nimport { Button, Menu } from 'antd';\n\n/* Icons */\nimport {\n  BankOutlined,\n  TeamOutlined,\n  CalendarOutlined,\n} from '@ant-design/icons';\n\n/* Utilities */\nimport { useHistory } from 'react-router-dom';\n\n/* UI Library Sub-components */\nconst { SubMenu } = Menu;\n\nconst FilterMenu = ({ core, onClose }) => {\n  const history = useHistory();\n  const [institutions, setInstitutions] = useState('');\n  const [groups, setGroups] = useState('');\n  const [years, setYears] = useState('');\n  const rootSubmenuKeys = ['institutions', 'groups', 'years'];\n  const [openKeys, setOpenKeys] = React.useState(['']);\n\n  const onOpenChange = (keys) => {\n    const latestOpenKey = keys.find((key) => openKeys.indexOf(key) === -1);\n\n    if (rootSubmenuKeys.indexOf(latestOpenKey) === -1) {\n      setOpenKeys(keys);\n    } else {\n      setOpenKeys(latestOpenKey ? [latestOpenKey] : []);\n    }\n  };\n\n  const onClick = (type) => {\n    const URL = new URLSearchParams(history.location.search);\n    let filteredURL = `${history.location.pathname}?`;\n\n    filteredURL += URL.has('data') ? `data=${URL.get('data')}` : '';\n    filteredURL += URL.has('id') ? `id=${URL.get('id')}` : '';\n    filteredURL += URL.has('keywords')\n      ? `&keywords=${URL.get('keywords')}`\n      : '';\n    if (type !== 'institutions') {\n      filteredURL += URL.has('institutions')\n        ? `&institutions=${URL.get('institutions')}`\n        : '';\n    }\n    if (type !== 'groups') {\n      filteredURL += URL.has('groups') ? `&groups=${URL.get('groups')}` : '';\n    }\n    if (type !== 'years') {\n      filteredURL += URL.has('start_year')\n        ? `&start_year=${URL.get('start_year')}`\n        : '';\n      filteredURL += URL.has('end_year')\n        ? `&end_year=${URL.get('end_year')}`\n        : '';\n    }\n\n    if (type === 'institutions' && core.filters.institutions && institutions) {\n      filteredURL += `&institutions=${institutions}`;\n    }\n    if (type === 'groups' && core.filters.groups && groups) {\n      filteredURL += `&groups=${groups}`;\n    }\n    if (type === 'years' && core.filters.years.start_year && years) {\n      filteredURL += `&start_year=${years.start_year}&end_year=${years.end_year}`;\n    }\n    core.setURL(filteredURL);\n    history.push(filteredURL);\n    onClose();\n  };\n\n  useEffect(() => {\n    setInstitutions('');\n    setGroups('');\n    setYears('');\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [core.URL]);\n\n  return (\n    <Menu\n      mode=\"inline\"\n      openKeys={openKeys}\n      onOpenChange={onOpenChange}\n      selectable={false}\n    >\n      {core.filters?.institutions ? (\n        <SubMenu\n          key=\"institutions\"\n          title=\"Instituciones\"\n          icon={<BankOutlined />}\n        >\n          <Menu.Item key=\"1\" style={{ height: 'auto' }}>\n            <FilterMultipleSelect\n              list={core.filters?.institutions}\n              setFilter={setInstitutions}\n            />\n            <div className=\"filter__button\">\n              <Button\n                size=\"small\"\n                type=\"primary\"\n                onClick={() => onClick('institutions')}\n                disabled={institutions ? false : true}\n              >\n                Aplicar Filtro\n              </Button>\n            </div>\n          </Menu.Item>\n        </SubMenu>\n      ) : (\n        <SubMenu\n          key=\"institutions\"\n          title=\"Instituciones\"\n          icon={<BankOutlined />}\n          disabled={true}\n        />\n      )}\n      {core.filters?.groups ? (\n        <SubMenu key=\"groups\" title=\"Grupos\" icon={<TeamOutlined />}>\n          <Menu.Item key=\"2\" style={{ height: 'auto' }}>\n            <FilterMultipleSelect\n              list={core.filters?.groups}\n              setFilter={setGroups}\n            />\n            <div className=\"filter__button\">\n              <Button\n                size=\"small\"\n                type=\"primary\"\n                onClick={() => onClick('groups')}\n                disabled={groups ? false : true}\n              >\n                Aplicar Filtro\n              </Button>\n            </div>\n          </Menu.Item>\n        </SubMenu>\n      ) : (\n        <SubMenu\n          key=\"groups\"\n          title=\"Grupos\"\n          icon={<TeamOutlined />}\n          disabled={true}\n        />\n      )}\n      {core.filters?.years?.start_year ? (\n        <SubMenu key=\"years\" title=\"Rango de años\" icon={<CalendarOutlined />}>\n          <Menu.Item key=\"3\" style={{ height: 'auto' }}>\n            {core.filters?.years?.start_year && (\n              <YearsRangeFilter\n                filters={core.filters.years}\n                setYears={setYears}\n              />\n            )}\n            <div className=\"filter__button\">\n              <Button\n                size=\"small\"\n                type=\"primary\"\n                onClick={() => onClick('years')}\n                disabled={years ? false : true}\n              >\n                Aplicar Filtro\n              </Button>\n            </div>\n          </Menu.Item>\n        </SubMenu>\n      ) : (\n        <SubMenu\n          key=\"years\"\n          title=\"Rango de años\"\n          icon={<CalendarOutlined />}\n          disabled={true}\n        />\n      )}\n    </Menu>\n  );\n};\n\nexport default FilterMenu;\n"]},"metadata":{},"sourceType":"module"}